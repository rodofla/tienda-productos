(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function lT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rm={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function OS(){if(uv)return Nl;uv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Nl.Fragment=e,Nl.jsx=n,Nl.jsxs=n,Nl}var cv;function xS(){return cv||(cv=1,rm.exports=OS()),rm.exports}var Y=xS(),sm={exports:{}},Dl={},am={exports:{}},om={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function MS(){return hv||(hv=1,(function(r){function e(Z,le){var pe=Z.length;Z.push(le);e:for(;0<pe;){var je=pe-1>>>1,x=Z[je];if(0<o(x,le))Z[je]=le,Z[pe]=x,pe=je;else break e}}function n(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var le=Z[0],pe=Z.pop();if(pe!==le){Z[0]=pe;e:for(var je=0,x=Z.length,re=x>>>1;je<re;){var ue=2*(je+1)-1,ae=Z[ue],ye=ue+1,Ce=Z[ye];if(0>o(ae,pe))ye<x&&0>o(Ce,ae)?(Z[je]=Ce,Z[ye]=pe,je=ye):(Z[je]=ae,Z[ue]=pe,je=ue);else if(ye<x&&0>o(Ce,pe))Z[je]=Ce,Z[ye]=pe,je=ye;else break e}}return le}function o(Z,le){var pe=Z.sortIndex-le.sortIndex;return pe!==0?pe:Z.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var p=[],y=[],E=1,b=null,w=3,D=!1,k=!1,F=!1,U=!1,B=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function I(Z){for(var le=n(y);le!==null;){if(le.callback===null)s(y);else if(le.startTime<=Z)s(y),le.sortIndex=le.expirationTime,e(p,le);else break;le=n(y)}}function L(Z){if(F=!1,I(Z),!k)if(n(p)!==null)k=!0,de||(de=!0,z());else{var le=n(y);le!==null&&ot(L,le.startTime-Z)}}var de=!1,O=-1,S=5,R=-1;function V(){return U?!0:!(r.unstable_now()-R<S)}function P(){if(U=!1,de){var Z=r.unstable_now();R=Z;var le=!0;try{e:{k=!1,F&&(F=!1,W(O),O=-1),D=!0;var pe=w;try{t:{for(I(Z),b=n(p);b!==null&&!(b.expirationTime>Z&&V());){var je=b.callback;if(typeof je=="function"){b.callback=null,w=b.priorityLevel;var x=je(b.expirationTime<=Z);if(Z=r.unstable_now(),typeof x=="function"){b.callback=x,I(Z),le=!0;break t}b===n(p)&&s(p),I(Z)}else s(p);b=n(p)}if(b!==null)le=!0;else{var re=n(y);re!==null&&ot(L,re.startTime-Z),le=!1}}break e}finally{b=null,w=pe,D=!1}le=void 0}}finally{le?z():de=!1}}}var z;if(typeof se=="function")z=function(){se(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,bt=N.port2;N.port1.onmessage=P,z=function(){bt.postMessage(null)}}else z=function(){B(P,0)};function ot(Z,le){O=B(function(){Z(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var le=3;break;default:le=w}var pe=w;w=le;try{return Z()}finally{w=pe}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var pe=w;w=Z;try{return le()}finally{w=pe}},r.unstable_scheduleCallback=function(Z,le,pe){var je=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?je+pe:je):pe=je,Z){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=pe+x,Z={id:E++,callback:le,priorityLevel:Z,startTime:pe,expirationTime:x,sortIndex:-1},pe>je?(Z.sortIndex=pe,e(y,Z),n(p)===null&&Z===n(y)&&(F?(W(O),O=-1):F=!0,ot(L,pe-je))):(Z.sortIndex=x,e(p,Z),k||D||(k=!0,de||(de=!0,z()))),Z},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(Z){var le=w;return function(){var pe=w;w=le;try{return Z.apply(this,arguments)}finally{w=pe}}}})(om)),om}var fv;function VS(){return fv||(fv=1,am.exports=MS()),am.exports}var lm={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function PS(){if(dv)return Re;dv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.iterator;function w(x){return x===null||typeof x!="object"?null:(x=b&&x[b]||x["@@iterator"],typeof x=="function"?x:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,F={};function U(x,re,ue){this.props=x,this.context=re,this.refs=F,this.updater=ue||D}U.prototype.isReactComponent={},U.prototype.setState=function(x,re){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,re,"setState")},U.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function B(){}B.prototype=U.prototype;function W(x,re,ue){this.props=x,this.context=re,this.refs=F,this.updater=ue||D}var se=W.prototype=new B;se.constructor=W,k(se,U.prototype),se.isPureReactComponent=!0;var I=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function O(x,re,ue,ae,ye,Ce){return ue=Ce.ref,{$$typeof:r,type:x,key:re,ref:ue!==void 0?ue:null,props:Ce}}function S(x,re){return O(x.type,re,void 0,void 0,void 0,x.props)}function R(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function V(x){var re={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ue){return re[ue]})}var P=/\/+/g;function z(x,re){return typeof x=="object"&&x!==null&&x.key!=null?V(""+x.key):re.toString(36)}function N(){}function bt(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(N,N):(x.status="pending",x.then(function(re){x.status==="pending"&&(x.status="fulfilled",x.value=re)},function(re){x.status==="pending"&&(x.status="rejected",x.reason=re)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function ot(x,re,ue,ae,ye){var Ce=typeof x;(Ce==="undefined"||Ce==="boolean")&&(x=null);var be=!1;if(x===null)be=!0;else switch(Ce){case"bigint":case"string":case"number":be=!0;break;case"object":switch(x.$$typeof){case r:case e:be=!0;break;case E:return be=x._init,ot(be(x._payload),re,ue,ae,ye)}}if(be)return ye=ye(x),be=ae===""?"."+z(x,0):ae,I(ye)?(ue="",be!=null&&(ue=be.replace(P,"$&/")+"/"),ot(ye,re,ue,"",function(Fn){return Fn})):ye!=null&&(R(ye)&&(ye=S(ye,ue+(ye.key==null||x&&x.key===ye.key?"":(""+ye.key).replace(P,"$&/")+"/")+be)),re.push(ye)),1;be=0;var Dt=ae===""?".":ae+":";if(I(x))for(var Ze=0;Ze<x.length;Ze++)ae=x[Ze],Ce=Dt+z(ae,Ze),be+=ot(ae,re,ue,Ce,ye);else if(Ze=w(x),typeof Ze=="function")for(x=Ze.call(x),Ze=0;!(ae=x.next()).done;)ae=ae.value,Ce=Dt+z(ae,Ze++),be+=ot(ae,re,ue,Ce,ye);else if(Ce==="object"){if(typeof x.then=="function")return ot(bt(x),re,ue,ae,ye);throw re=String(x),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return be}function Z(x,re,ue){if(x==null)return x;var ae=[],ye=0;return ot(x,ae,"","",function(Ce){return re.call(ue,Ce,ye++)}),ae}function le(x){if(x._status===-1){var re=x._result;re=re(),re.then(function(ue){(x._status===0||x._status===-1)&&(x._status=1,x._result=ue)},function(ue){(x._status===0||x._status===-1)&&(x._status=2,x._result=ue)}),x._status===-1&&(x._status=0,x._result=re)}if(x._status===1)return x._result.default;throw x._result}var pe=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function je(){}return Re.Children={map:Z,forEach:function(x,re,ue){Z(x,function(){re.apply(this,arguments)},ue)},count:function(x){var re=0;return Z(x,function(){re++}),re},toArray:function(x){return Z(x,function(re){return re})||[]},only:function(x){if(!R(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Re.Component=U,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=W,Re.StrictMode=s,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Re.__COMPILER_RUNTIME={__proto__:null,c:function(x){return L.H.useMemoCache(x)}},Re.cache=function(x){return function(){return x.apply(null,arguments)}},Re.cloneElement=function(x,re,ue){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var ae=k({},x.props),ye=x.key,Ce=void 0;if(re!=null)for(be in re.ref!==void 0&&(Ce=void 0),re.key!==void 0&&(ye=""+re.key),re)!de.call(re,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&re.ref===void 0||(ae[be]=re[be]);var be=arguments.length-2;if(be===1)ae.children=ue;else if(1<be){for(var Dt=Array(be),Ze=0;Ze<be;Ze++)Dt[Ze]=arguments[Ze+2];ae.children=Dt}return O(x.type,ye,void 0,void 0,Ce,ae)},Re.createContext=function(x){return x={$$typeof:f,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:u,_context:x},x},Re.createElement=function(x,re,ue){var ae,ye={},Ce=null;if(re!=null)for(ae in re.key!==void 0&&(Ce=""+re.key),re)de.call(re,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ye[ae]=re[ae]);var be=arguments.length-2;if(be===1)ye.children=ue;else if(1<be){for(var Dt=Array(be),Ze=0;Ze<be;Ze++)Dt[Ze]=arguments[Ze+2];ye.children=Dt}if(x&&x.defaultProps)for(ae in be=x.defaultProps,be)ye[ae]===void 0&&(ye[ae]=be[ae]);return O(x,Ce,void 0,void 0,null,ye)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(x){return{$$typeof:m,render:x}},Re.isValidElement=R,Re.lazy=function(x){return{$$typeof:E,_payload:{_status:-1,_result:x},_init:le}},Re.memo=function(x,re){return{$$typeof:y,type:x,compare:re===void 0?null:re}},Re.startTransition=function(x){var re=L.T,ue={};L.T=ue;try{var ae=x(),ye=L.S;ye!==null&&ye(ue,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(je,pe)}catch(Ce){pe(Ce)}finally{L.T=re}},Re.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Re.use=function(x){return L.H.use(x)},Re.useActionState=function(x,re,ue){return L.H.useActionState(x,re,ue)},Re.useCallback=function(x,re){return L.H.useCallback(x,re)},Re.useContext=function(x){return L.H.useContext(x)},Re.useDebugValue=function(){},Re.useDeferredValue=function(x,re){return L.H.useDeferredValue(x,re)},Re.useEffect=function(x,re,ue){var ae=L.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(x,re)},Re.useId=function(){return L.H.useId()},Re.useImperativeHandle=function(x,re,ue){return L.H.useImperativeHandle(x,re,ue)},Re.useInsertionEffect=function(x,re){return L.H.useInsertionEffect(x,re)},Re.useLayoutEffect=function(x,re){return L.H.useLayoutEffect(x,re)},Re.useMemo=function(x,re){return L.H.useMemo(x,re)},Re.useOptimistic=function(x,re){return L.H.useOptimistic(x,re)},Re.useReducer=function(x,re,ue){return L.H.useReducer(x,re,ue)},Re.useRef=function(x){return L.H.useRef(x)},Re.useState=function(x){return L.H.useState(x)},Re.useSyncExternalStore=function(x,re,ue){return L.H.useSyncExternalStore(x,re,ue)},Re.useTransition=function(){return L.H.useTransition()},Re.version="19.1.1",Re}var mv;function Mh(){return mv||(mv=1,lm.exports=PS()),lm.exports}var um={exports:{}},Qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function kS(){if(pv)return Qt;pv=1;var r=Mh();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:y,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Qt.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,E)},Qt.flushSync=function(p){var y=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=E,s.d.f()}},Qt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Qt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Qt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,b=m(E,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:D}):E==="script"&&s.d.X(p,{crossOrigin:b,integrity:w,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Qt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Qt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,b=m(E,y.crossOrigin);s.d.L(p,E,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Qt.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Qt.requestFormReset=function(p){s.d.r(p)},Qt.unstable_batchedUpdates=function(p,y){return p(y)},Qt.useFormState=function(p,y,E){return f.H.useFormState(p,y,E)},Qt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Qt.version="19.1.1",Qt}var gv;function US(){if(gv)return um.exports;gv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),um.exports=kS(),um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function LS(){if(yv)return Dl;yv=1;var r=VS(),e=Mh(),n=US();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=d;break}if(T===l){v=!0,l=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=h;break}if(T===l){v=!0,l=d,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),se=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function bt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case U:return"Profiler";case F:return"StrictMode";case L:return"Suspense";case de:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case D:return"Portal";case se:return(t.displayName||"Context")+".Provider";case W:return(t._context.displayName||"Context")+".Consumer";case I:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return i=t.displayName||null,i!==null?i:bt(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return bt(t(i))}catch{}}return null}var ot=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},je=[],x=-1;function re(t){return{current:t}}function ue(t){0>x||(t.current=je[x],je[x]=null,x--)}function ae(t,i){x++,je[x]=t.current,t.current=i}var ye=re(null),Ce=re(null),be=re(null),Dt=re(null);function Ze(t,i){switch(ae(be,i),ae(Ce,t),ae(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?U_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=U_(i),t=L_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(ye),ae(ye,t)}function Fn(){ue(ye),ue(Ce),ue(be)}function rr(t){t.memoizedState!==null&&ae(Dt,t);var i=ye.current,a=L_(i,t.type);i!==a&&(ae(Ce,t),ae(ye,a))}function Ai(t){Ce.current===t&&(ue(ye),ue(Ce)),Dt.current===t&&(ue(Dt),Sl._currentValue=pe)}var Jr=Object.prototype.hasOwnProperty,es=r.unstable_scheduleCallback,ts=r.unstable_cancelCallback,To=r.unstable_shouldYield,_u=r.unstable_requestPaint,_n=r.unstable_now,rf=r.unstable_getCurrentPriorityLevel,Ao=r.unstable_ImmediatePriority,ta=r.unstable_UserBlockingPriority,ns=r.unstable_NormalPriority,sf=r.unstable_LowPriority,na=r.unstable_IdlePriority,bo=r.log,vu=r.unstable_setDisableYieldValue,lt=null,Fe=null;function ln(t){if(typeof bo=="function"&&vu(t),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(lt,t)}catch{}}var Yt=Math.clz32?Math.clz32:is,Eu=Math.log,af=Math.LN2;function is(t){return t>>>=0,t===0?32:31-(Eu(t)/af|0)|0}var rs=256,ss=4194304;function Mn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ia(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=Mn(l):(v&=T,v!==0?h=Mn(v):a||(a=T&~t,a!==0&&(h=Mn(a))))):(T=l&~d,T!==0?h=Mn(T):v!==0?h=Mn(v):a||(a=l&~t,a!==0&&(h=Mn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function as(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function So(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(){var t=rs;return rs<<=1,(rs&4194048)===0&&(rs=256),t}function Ro(){var t=ss;return ss<<=1,(ss&62914560)===0&&(ss=4194304),t}function bi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Si(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Io(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,C=t.expirationTimes,G=t.hiddenUpdates;for(a=v&~a;0<a;){var J=31-Yt(a),ne=1<<J;T[J]=0,C[J]=-1;var K=G[J];if(K!==null)for(G[J]=null,J=0;J<K.length;J++){var Q=K[J];Q!==null&&(Q.lane&=-536870913)}a&=~ne}l!==0&&Gn(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Gn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Yt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Co(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Yt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function sr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ra(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ar(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:iv(t.type))}function Tu(t,i){var a=le.p;try{return le.p=t,i()}finally{le.p=a}}var nt=Math.random().toString(36).slice(2),St="__reactFiber$"+nt,pt="__reactProps$"+nt,vn="__reactContainer$"+nt,No="__reactEvents$"+nt,of="__reactListeners$"+nt,or="__reactHandles$"+nt,Au="__reactResources$"+nt,os="__reactMarker$"+nt;function lr(t){delete t[St],delete t[pt],delete t[No],delete t[of],delete t[or]}function wi(t){var i=t[St];if(i)return i;for(var a=t.parentNode;a;){if(i=a[vn]||a[St]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=q_(t);t!==null;){if(a=t[St])return a;t=q_(t)}return i}t=a,a=t.parentNode}return null}function Yn(t){if(t=t[St]||t[vn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Kn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Jt(t){var i=t[Au];return i||(i=t[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ht(t){t[os]=!0}var Do=new Set,sa={};function Vn(t,i){Ri(t,i),Ri(t+"Capture",i)}function Ri(t,i){for(sa[t]=i,t=0;t<i.length;t++)Do.add(i[t])}var bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Su={},ls={};function wu(t){return Jr.call(ls,t)?!0:Jr.call(Su,t)?!1:bu.test(t)?ls[t]=!0:(Su[t]=!0,!1)}function ur(t,i,a){if(wu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Qn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Ut(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var us,Ru;function Ii(t){if(us===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);us=i&&i[1]||"",Ru=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+us+t+Ru}var aa=!1;function oa(t,i){if(!t||aa)return"";aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var K=Q}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(Q){K=Q}t.call(ne.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var C=v.split(`
`),G=T.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===G.length)for(l=C.length-1,h=G.length-1;1<=l&&0<=h&&C[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==G[h]){var J=`
`+C[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=h);break}}}finally{aa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ii(a):""}function Oo(t){switch(t.tag){case 26:case 27:case 5:return Ii(t.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return oa(t.type,!1);case 11:return oa(t.type.render,!1);case 1:return oa(t.type,!0);case 31:return Ii("Activity");default:return""}}function la(t){try{var i="";do i+=Oo(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function lf(t){var i=xo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ua(t){t._valueTracker||(t._valueTracker=lf(t))}function Mo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=xo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function cs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var uf=/[\n"\\]/g;function gt(t){return t.replace(uf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function un(t,i,a,l,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+en(i)):t.value!==""+en(i)&&(t.value=""+en(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?cr(t,v,en(i)):a!=null?cr(t,v,en(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+en(T):t.removeAttribute("name")}function hs(t,i,a,l,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+en(a):"",i=i!=null?""+en(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function cr(t,i,a){i==="number"&&cs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ci(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+en(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ke(t,i,a){if(i!=null&&(i=""+en(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+en(a):""}function fs(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ot(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=en(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function En(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Iu(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ds.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Vo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Iu(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Iu(t,d,i[d])}function Po(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(t){return hf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ni=null;function Tn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Di=null,Oi=null;function ko(t){var i=Yn(t);if(i&&(t=i.stateNode)){var a=t[pt]||null;e:switch(t=i.stateNode,i.type){case"input":if(un(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[pt]||null;if(!h)throw Error(s(90));un(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Mo(l)}break e;case"textarea":Ke(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ci(t,!!a.multiple,i,!1)}}}var $n=!1;function Cu(t,i,a){if($n)return t(i,a);$n=!0;try{var l=t(i);return l}finally{if($n=!1,(Di!==null||Oi!==null)&&(Tc(),Di&&(i=Di,t=Oi,Oi=Di=null,ko(i),t)))for(i=0;i<t.length;i++)ko(t[i])}}function ms(t,i){var a=t.stateNode;if(a===null)return null;var l=a[pt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(Pn)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){An=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{An=!1}var Xn=null,hr=null,xi=null;function Uo(){if(xi)return xi;var t,i=hr,a=i.length,l,h="value"in Xn?Xn.value:Xn.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return xi=h.slice(t,1<l?1-l:void 0)}function Wn(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Zn(){return!0}function Lo(){return!1}function Ot(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Zn:Lo,this.isPropagationStopped=Lo,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),i}var qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Ot(qe),gs=E({},qe,{view:0,detail:0}),Nu=Ot(gs),fa,da,Jn,ys=E({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jn&&(Jn&&t.type==="mousemove"?(fa=t.screenX-Jn.screenX,da=t.screenY-Jn.screenY):da=fa=0,Jn=t),fa)},movementY:function(t){return"movementY"in t?t.movementY:da}}),bn=Ot(ys),Du=E({},ys,{dataTransfer:0}),ff=Ot(Du),_s=E({},gs,{relatedTarget:0}),ma=Ot(_s),zo=E({},qe,{animationName:0,elapsedTime:0,pseudoElement:0}),pa=Ot(zo),Ou=E({},qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ga=Ot(Ou),df=E({},qe,{data:0}),jo=Ot(df),vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Mu[t])?!!i[t]:!1}function Es(){return Bo}var Vu=E({},gs,{key:function(t){if(t.key){var i=vs[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Wn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(t){return t.type==="keypress"?Wn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ya=Ot(Vu),Pu=E({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qo=Ot(Pu),Mi=E({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),ku=Ot(Mi),Uu=E({},qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lu=Ot(Uu),zu=E({},ys,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_a=Ot(zu),tn=E({},qe,{newState:0,oldState:0}),ju=Ot(tn),Bu=[9,13,27,32],ei=Pn&&"CompositionEvent"in window,c=null;Pn&&"documentMode"in document&&(c=document.documentMode);var g=Pn&&"TextEvent"in window&&!c,_=Pn&&(!ei||c&&8<c&&11>=c),A=" ",q=!1;function $(t,i){switch(t){case"keyup":return Bu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pe=!1;function wt(t,i){switch(t){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(q=!0,A);case"textInput":return t=i.data,t===A&&q?null:t;default:return null}}function ke(t,i){if(Pe)return t==="compositionend"||!ei&&$(t,i)?(t=Uo(),xi=hr=Xn=null,Pe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var xt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!xt[t.type]:i==="textarea"}function Vi(t,i,a,l){Di?Oi?Oi.push(l):Oi=[l]:Di=l,i=Ic(i,"onChange"),0<i.length&&(a=new ha("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Lt=null,ti=null;function Ho(t){x_(t,0)}function qu(t){var i=Kn(t);if(Mo(i))return t}function Jp(t,i){if(t==="change")return i}var eg=!1;if(Pn){var mf;if(Pn){var pf="oninput"in document;if(!pf){var tg=document.createElement("div");tg.setAttribute("oninput","return;"),pf=typeof tg.oninput=="function"}mf=pf}else mf=!1;eg=mf&&(!document.documentMode||9<document.documentMode)}function ng(){Lt&&(Lt.detachEvent("onpropertychange",ig),ti=Lt=null)}function ig(t){if(t.propertyName==="value"&&qu(ti)){var i=[];Vi(i,ti,t,Tn(t)),Cu(Ho,i)}}function ob(t,i,a){t==="focusin"?(ng(),Lt=i,ti=a,Lt.attachEvent("onpropertychange",ig)):t==="focusout"&&ng()}function lb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qu(ti)}function ub(t,i){if(t==="click")return qu(i)}function cb(t,i){if(t==="input"||t==="change")return qu(i)}function hb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var cn=typeof Object.is=="function"?Object.is:hb;function Fo(t,i){if(cn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Jr.call(i,h)||!cn(t[h],i[h]))return!1}return!0}function rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sg(t,i){var a=rg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rg(a)}}function ag(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ag(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function og(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=cs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=cs(t.document)}return i}function gf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var fb=Pn&&"documentMode"in document&&11>=document.documentMode,va=null,yf=null,Go=null,_f=!1;function lg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_f||va==null||va!==cs(l)||(l=va,"selectionStart"in l&&gf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Go&&Fo(Go,l)||(Go=l,l=Ic(yf,"onSelect"),0<l.length&&(i=new ha("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=va)))}function Ts(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ea={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},vf={},ug={};Pn&&(ug=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function As(t){if(vf[t])return vf[t];if(!Ea[t])return t;var i=Ea[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in ug)return vf[t]=i[a];return t}var cg=As("animationend"),hg=As("animationiteration"),fg=As("animationstart"),db=As("transitionrun"),mb=As("transitionstart"),pb=As("transitioncancel"),dg=As("transitionend"),mg=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function kn(t,i){mg.set(t,i),Vn(i,[t])}var pg=new WeakMap;function Sn(t,i){if(typeof t=="object"&&t!==null){var a=pg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:la(i)},pg.set(t,i),i)}return{value:t,source:i,stack:la(i)}}var wn=[],Ta=0,Tf=0;function Hu(){for(var t=Ta,i=Tf=Ta=0;i<t;){var a=wn[i];wn[i++]=null;var l=wn[i];wn[i++]=null;var h=wn[i];wn[i++]=null;var d=wn[i];if(wn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&gg(a,h,d)}}function Fu(t,i,a,l){wn[Ta++]=t,wn[Ta++]=i,wn[Ta++]=a,wn[Ta++]=l,Tf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Af(t,i,a,l){return Fu(t,i,a,l),Gu(t)}function Aa(t,i){return Fu(t,null,null,i),Gu(t)}function gg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Yt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Gu(t){if(50<gl)throw gl=0,Cd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ba={};function gb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,i,a,l){return new gb(t,i,a,l)}function bf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pi(t,i){var a=t.alternate;return a===null?(a=hn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function yg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Yu(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")bf(t)&&(v=1);else if(typeof t=="string")v=_S(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=hn(31,a,i,h),t.elementType=R,t.lanes=d,t;case k:return bs(a.children,h,d,i);case F:v=8,h|=24;break;case U:return t=hn(12,a,i,h|2),t.elementType=U,t.lanes=d,t;case L:return t=hn(13,a,i,h),t.elementType=L,t.lanes=d,t;case de:return t=hn(19,a,i,h),t.elementType=de,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:case se:v=10;break e;case W:v=9;break e;case I:v=11;break e;case O:v=14;break e;case S:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=hn(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function bs(t,i,a,l){return t=hn(7,t,l,i),t.lanes=a,t}function Sf(t,i,a){return t=hn(6,t,null,i),t.lanes=a,t}function wf(t,i,a){return i=hn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Sa=[],wa=0,Ku=null,Qu=0,Rn=[],In=0,Ss=null,ki=1,Ui="";function ws(t,i){Sa[wa++]=Qu,Sa[wa++]=Ku,Ku=t,Qu=i}function _g(t,i,a){Rn[In++]=ki,Rn[In++]=Ui,Rn[In++]=Ss,Ss=t;var l=ki;t=Ui;var h=32-Yt(l)-1;l&=~(1<<h),a+=1;var d=32-Yt(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,ki=1<<32-Yt(i)+h|a<<h|l,Ui=d+t}else ki=1<<d|a<<h|l,Ui=t}function Rf(t){t.return!==null&&(ws(t,1),_g(t,1,0))}function If(t){for(;t===Ku;)Ku=Sa[--wa],Sa[wa]=null,Qu=Sa[--wa],Sa[wa]=null;for(;t===Ss;)Ss=Rn[--In],Rn[In]=null,Ui=Rn[--In],Rn[In]=null,ki=Rn[--In],Rn[In]=null}var nn=null,ut=null,Be=!1,Rs=null,ni=!1,Cf=Error(s(519));function Is(t){var i=Error(s(418,""));throw Qo(Sn(i,t)),Cf}function vg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[St]=t,i[pt]=l,a){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(a=0;a<_l.length;a++)Oe(_l[a],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),hs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ua(i);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),fs(i,l.value,l.defaultValue,l.children),ua(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||k_(i.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),l.onScroll!=null&&Oe("scroll",i),l.onScrollEnd!=null&&Oe("scrollend",i),l.onClick!=null&&(i.onclick=Cc),i=!0):i=!1,i||Is(t)}function Eg(t){for(nn=t.return;nn;)switch(nn.tag){case 5:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:nn=nn.return}}function Yo(t){if(t!==nn)return!1;if(!Be)return Eg(t),Be=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Fd(t.type,t.memoizedProps)),a=!a),a&&ut&&Is(t),Eg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ut=Ln(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ut=null}}else i===27?(i=ut,Ir(t.type)?(t=Qd,Qd=null,ut=t):ut=i):ut=nn?Ln(t.stateNode.nextSibling):null;return!0}function Ko(){ut=nn=null,Be=!1}function Tg(){var t=Rs;return t!==null&&(an===null?an=t:an.push.apply(an,t),Rs=null),t}function Qo(t){Rs===null?Rs=[t]:Rs.push(t)}var Nf=re(null),Cs=null,Li=null;function fr(t,i,a){ae(Nf,i._currentValue),i._currentValue=a}function zi(t){t._currentValue=Nf.current,ue(Nf)}function Df(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Of(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var C=0;C<i.length;C++)if(T.context===i[C]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Df(d.return,a,t),l||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Df(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function $o(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;cn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===Dt.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Sl):t=[Sl])}h=h.return}t!==null&&Of(i,t,a,l),i.flags|=262144}function $u(t){for(t=t.firstContext;t!==null;){if(!cn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ns(t){Cs=t,Li=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return Ag(Cs,t)}function Xu(t,i){return Cs===null&&Ns(t),Ag(t,i)}function Ag(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Li===null){if(t===null)throw Error(s(308));Li=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Li=Li.next=i;return a}var yb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},_b=r.unstable_scheduleCallback,vb=r.unstable_NormalPriority,It={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xf(){return{controller:new yb,data:new Map,refCount:0}}function Xo(t){t.refCount--,t.refCount===0&&_b(vb,function(){t.controller.abort()})}var Wo=null,Mf=0,Ra=0,Ia=null;function Eb(t,i){if(Wo===null){var a=Wo=[];Mf=0,Ra=Pd(),Ia={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Mf++,i.then(bg,bg),i}function bg(){if(--Mf===0&&Wo!==null){Ia!==null&&(Ia.status="fulfilled");var t=Wo;Wo=null,Ra=0,Ia=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Tb(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Sg=Z.S;Z.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Eb(t,i),Sg!==null&&Sg(t,i)};var Ds=re(null);function Vf(){var t=Ds.current;return t!==null?t:Je.pooledCache}function Wu(t,i){i===null?ae(Ds,Ds.current):ae(Ds,i.pool)}function wg(){var t=Vf();return t===null?null:{parent:It._currentValue,pool:t}}var Zo=Error(s(460)),Rg=Error(s(474)),Zu=Error(s(542)),Pf={then:function(){}};function Ig(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ju(){}function Cg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Ju,Ju),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Dg(t),t;default:if(typeof i.status=="string")i.then(Ju,Ju);else{if(t=Je,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Dg(t),t}throw Jo=i,Zo}}var Jo=null;function Ng(){if(Jo===null)throw Error(s(459));var t=Jo;return Jo=null,t}function Dg(t){if(t===Zo||t===Zu)throw Error(s(483))}var dr=!1;function kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Gu(t),gg(t,null,a),i}return Fu(t,l,i,a),Gu(t)}function el(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Co(t,a)}}function Lf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var zf=!1;function tl(){if(zf){var t=Ia;if(t!==null)throw t}}function nl(t,i,a,l){zf=!1;var h=t.updateQueue;dr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,G=C.next;C.next=null,v===null?d=G:v.next=G,v=C;var J=t.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==v&&(T===null?J.firstBaseUpdate=G:T.next=G,J.lastBaseUpdate=C))}if(d!==null){var ne=h.baseState;v=0,J=G=C=null,T=d;do{var K=T.lane&-536870913,Q=K!==T.lane;if(Q?(Ue&K)===K:(l&K)===K){K!==0&&K===Ra&&(zf=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ae=t,_e=T;K=i;var Xe=a;switch(_e.tag){case 1:if(Ae=_e.payload,typeof Ae=="function"){ne=Ae.call(Xe,ne,K);break e}ne=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=_e.payload,K=typeof Ae=="function"?Ae.call(Xe,ne,K):Ae,K==null)break e;ne=E({},ne,K);break e;case 2:dr=!0}}K=T.callback,K!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(G=J=Q,C=ne):J=J.next=Q,v|=K;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);J===null&&(C=ne),h.baseState=C,h.firstBaseUpdate=G,h.lastBaseUpdate=J,d===null&&(h.shared.lanes=0),br|=v,t.lanes=v,t.memoizedState=ne}}function Og(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function xg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Og(a[t],i)}var Ca=re(null),ec=re(0);function Mg(t,i){t=Yi,ae(ec,t),ae(Ca,i),Yi=t|i.baseLanes}function jf(){ae(ec,Yi),ae(Ca,Ca.current)}function Bf(){Yi=ec.current,ue(Ca),ue(ec)}var gr=0,Ie=null,Qe=null,yt=null,tc=!1,Na=!1,Os=!1,nc=0,il=0,Da=null,Ab=0;function ft(){throw Error(s(321))}function qf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!cn(t[a],i[a]))return!1;return!0}function Hf(t,i,a,l,h,d){return gr=d,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=t===null||t.memoizedState===null?gy:yy,Os=!1,d=a(l,h),Os=!1,Na&&(d=Pg(i,a,l,h)),Vg(t),d}function Vg(t){Z.H=lc;var i=Qe!==null&&Qe.next!==null;if(gr=0,yt=Qe=Ie=null,tc=!1,il=0,Da=null,i)throw Error(s(300));t===null||Mt||(t=t.dependencies,t!==null&&$u(t)&&(Mt=!0))}function Pg(t,i,a,l){Ie=t;var h=0;do{if(Na&&(Da=null),il=0,Na=!1,25<=h)throw Error(s(301));if(h+=1,yt=Qe=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Z.H=Nb,d=i(a,l)}while(Na);return d}function bb(){var t=Z.H,i=t.useState()[0];return i=typeof i.then=="function"?rl(i):i,t=t.useState()[0],(Qe!==null?Qe.memoizedState:null)!==t&&(Ie.flags|=1024),i}function Ff(){var t=nc!==0;return nc=0,t}function Gf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Yf(t){if(tc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}tc=!1}gr=0,yt=Qe=Ie=null,Na=!1,il=nc=0,Da=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ie.memoizedState=yt=t:yt=yt.next=t,yt}function _t(){if(Qe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var i=yt===null?Ie.memoizedState:yt.next;if(i!==null)yt=i,Qe=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},yt===null?Ie.memoizedState=yt=t:yt=yt.next=t}return yt}function Kf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(t){var i=il;return il+=1,Da===null&&(Da=[]),t=Cg(Da,t,i),i=Ie,(yt===null?i.memoizedState:yt.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?gy:yy),t}function ic(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return rl(t);if(t.$$typeof===se)return Kt(t)}throw Error(s(438,String(t)))}function Qf(t){var i=null,a=Ie.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Kf(),Ie.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=V;return i.index++,a}function ji(t,i){return typeof i=="function"?i(t):i}function rc(t){var i=_t();return $f(i,Qe,t)}function $f(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=v=null,C=null,G=i,J=!1;do{var ne=G.lane&-536870913;if(ne!==G.lane?(Ue&ne)===ne:(gr&ne)===ne){var K=G.revertLane;if(K===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ne===Ra&&(J=!0);else if((gr&K)===K){G=G.next,K===Ra&&(J=!0);continue}else ne={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(T=C=ne,v=d):C=C.next=ne,Ie.lanes|=K,br|=K;ne=G.action,Os&&a(d,ne),d=G.hasEagerState?G.eagerState:a(d,ne)}else K={lane:ne,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(T=C=K,v=d):C=C.next=K,Ie.lanes|=ne,br|=ne;G=G.next}while(G!==null&&G!==i);if(C===null?v=d:C.next=T,!cn(d,t.memoizedState)&&(Mt=!0,J&&(a=Ia,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=C,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Xf(t){var i=_t(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);cn(d,i.memoizedState)||(Mt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function kg(t,i,a){var l=Ie,h=_t(),d=Be;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!cn((Qe||h).memoizedState,a);v&&(h.memoizedState=a,Mt=!0),h=h.queue;var T=zg.bind(null,l,h,t);if(sl(2048,8,T,[t]),h.getSnapshot!==i||v||yt!==null&&yt.memoizedState.tag&1){if(l.flags|=2048,Oa(9,sc(),Lg.bind(null,l,h,a,i),null),Je===null)throw Error(s(349));d||(gr&124)!==0||Ug(l,i,a)}return a}function Ug(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ie.updateQueue,i===null?(i=Kf(),Ie.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Lg(t,i,a,l){i.value=a,i.getSnapshot=l,jg(i)&&Bg(t)}function zg(t,i,a){return a(function(){jg(i)&&Bg(t)})}function jg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!cn(t,a)}catch{return!0}}function Bg(t){var i=Aa(t,2);i!==null&&gn(i,t,2)}function Wf(t){var i=rn();if(typeof t=="function"){var a=t;if(t=a(),Os){ln(!0);try{a()}finally{ln(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:t},i}function qg(t,i,a,l){return t.baseState=a,$f(t,Qe,typeof l=="function"?l:ji)}function Sb(t,i,a,l,h){if(oc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};Z.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Hg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Hg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=Z.T,v={};Z.T=v;try{var T=a(h,l),C=Z.S;C!==null&&C(v,T),Fg(t,i,T)}catch(G){Zf(t,i,G)}finally{Z.T=d}}else try{d=a(h,l),Fg(t,i,d)}catch(G){Zf(t,i,G)}}function Fg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Gg(t,i,l)},function(l){return Zf(t,i,l)}):Gg(t,i,a)}function Gg(t,i,a){i.status="fulfilled",i.value=a,Yg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Hg(t,a)))}function Zf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Yg(i),i=i.next;while(i!==l)}t.action=null}function Yg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Kg(t,i){return i}function Qg(t,i){if(Be){var a=Je.formState;if(a!==null){e:{var l=Ie;if(Be){if(ut){t:{for(var h=ut,d=ni;h.nodeType!==8;){if(!d){h=null;break t}if(h=Ln(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ut=Ln(h.nextSibling),l=h.data==="F!";break e}}Is(l)}l=!1}l&&(i=a[0])}}return a=rn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kg,lastRenderedState:i},a.queue=l,a=dy.bind(null,Ie,l),l.dispatch=a,l=Wf(!1),d=id.bind(null,Ie,!1,l.queue),l=rn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=Sb.bind(null,Ie,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function $g(t){var i=_t();return Xg(i,Qe,t)}function Xg(t,i,a){if(i=$f(t,i,Kg)[0],t=rc(ji)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=rl(i)}catch(v){throw v===Zo?Zu:v}else l=i;i=_t();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ie.flags|=2048,Oa(9,sc(),wb.bind(null,h,a),null)),[l,d,t]}function wb(t,i){t.action=i}function Wg(t){var i=_t(),a=Qe;if(a!==null)return Xg(i,a,t);_t(),i=i.memoizedState,a=_t();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Oa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ie.updateQueue,i===null&&(i=Kf(),Ie.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function sc(){return{destroy:void 0,resource:void 0}}function Zg(){return _t().memoizedState}function ac(t,i,a,l){var h=rn();l=l===void 0?null:l,Ie.flags|=t,h.memoizedState=Oa(1|i,sc(),a,l)}function sl(t,i,a,l){var h=_t();l=l===void 0?null:l;var d=h.memoizedState.inst;Qe!==null&&l!==null&&qf(l,Qe.memoizedState.deps)?h.memoizedState=Oa(i,d,a,l):(Ie.flags|=t,h.memoizedState=Oa(1|i,d,a,l))}function Jg(t,i){ac(8390656,8,t,i)}function ey(t,i){sl(2048,8,t,i)}function ty(t,i){return sl(4,2,t,i)}function ny(t,i){return sl(4,4,t,i)}function iy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ry(t,i,a){a=a!=null?a.concat([t]):null,sl(4,4,iy.bind(null,i,t),a)}function Jf(){}function sy(t,i){var a=_t();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&qf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function ay(t,i){var a=_t();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&qf(i,l[1]))return l[0];if(l=t(),Os){ln(!0);try{t()}finally{ln(!1)}}return a.memoizedState=[l,i],l}function ed(t,i,a){return a===void 0||(gr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=u_(),Ie.lanes|=t,br|=t,a)}function oy(t,i,a,l){return cn(a,i)?a:Ca.current!==null?(t=ed(t,a,l),cn(t,i)||(Mt=!0),t):(gr&42)===0?(Mt=!0,t.memoizedState=a):(t=u_(),Ie.lanes|=t,br|=t,i)}function ly(t,i,a,l,h){var d=le.p;le.p=d!==0&&8>d?d:8;var v=Z.T,T={};Z.T=T,id(t,!1,i,a);try{var C=h(),G=Z.S;if(G!==null&&G(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var J=Tb(C,l);al(t,i,J,pn(t))}else al(t,i,l,pn(t))}catch(ne){al(t,i,{then:function(){},status:"rejected",reason:ne},pn())}finally{le.p=d,Z.T=v}}function Rb(){}function td(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=uy(t).queue;ly(t,h,i,pe,a===null?Rb:function(){return cy(t),a(l)})}function uy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function cy(t){var i=uy(t).next.queue;al(t,i,{},pn())}function nd(){return Kt(Sl)}function hy(){return _t().memoizedState}function fy(){return _t().memoizedState}function Ib(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=pn();t=mr(a);var l=pr(i,t,a);l!==null&&(gn(l,i,a),el(l,i,a)),i={cache:xf()},t.payload=i;return}i=i.return}}function Cb(t,i,a){var l=pn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},oc(t)?my(i,a):(a=Af(t,i,a,l),a!==null&&(gn(a,t,l),py(a,i,l)))}function dy(t,i,a){var l=pn();al(t,i,a,l)}function al(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(t))my(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,cn(T,v))return Fu(t,i,h,0),Je===null&&Hu(),!1}catch{}finally{}if(a=Af(t,i,h,l),a!==null)return gn(a,t,l),py(a,i,l),!0}return!1}function id(t,i,a,l){if(l={lane:2,revertLane:Pd(),action:l,hasEagerState:!1,eagerState:null,next:null},oc(t)){if(i)throw Error(s(479))}else i=Af(t,a,l,2),i!==null&&gn(i,t,2)}function oc(t){var i=t.alternate;return t===Ie||i!==null&&i===Ie}function my(t,i){Na=tc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function py(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Co(t,a)}}var lc={readContext:Kt,use:ic,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft},gy={readContext:Kt,use:ic,useCallback:function(t,i){return rn().memoizedState=[t,i===void 0?null:i],t},useContext:Kt,useEffect:Jg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,ac(4194308,4,iy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ac(4194308,4,t,i)},useInsertionEffect:function(t,i){ac(4,2,t,i)},useMemo:function(t,i){var a=rn();i=i===void 0?null:i;var l=t();if(Os){ln(!0);try{t()}finally{ln(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=rn();if(a!==void 0){var h=a(i);if(Os){ln(!0);try{a(i)}finally{ln(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Cb.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var i=rn();return t={current:t},i.memoizedState=t},useState:function(t){t=Wf(t);var i=t.queue,a=dy.bind(null,Ie,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Jf,useDeferredValue:function(t,i){var a=rn();return ed(a,t,i)},useTransition:function(){var t=Wf(!1);return t=ly.bind(null,Ie,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ie,h=rn();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Je===null)throw Error(s(349));(Ue&124)!==0||Ug(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Jg(zg.bind(null,l,d,t),[t]),l.flags|=2048,Oa(9,sc(),Lg.bind(null,l,d,a,i),null),a},useId:function(){var t=rn(),i=Je.identifierPrefix;if(Be){var a=Ui,l=ki;a=(l&~(1<<32-Yt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=nc++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=Ab++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:nd,useFormState:Qg,useActionState:Qg,useOptimistic:function(t){var i=rn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=id.bind(null,Ie,!0,a),a.dispatch=i,[t,i]},useMemoCache:Qf,useCacheRefresh:function(){return rn().memoizedState=Ib.bind(null,Ie)}},yy={readContext:Kt,use:ic,useCallback:sy,useContext:Kt,useEffect:ey,useImperativeHandle:ry,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:ay,useReducer:rc,useRef:Zg,useState:function(){return rc(ji)},useDebugValue:Jf,useDeferredValue:function(t,i){var a=_t();return oy(a,Qe.memoizedState,t,i)},useTransition:function(){var t=rc(ji)[0],i=_t().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:kg,useId:hy,useHostTransitionStatus:nd,useFormState:$g,useActionState:$g,useOptimistic:function(t,i){var a=_t();return qg(a,Qe,t,i)},useMemoCache:Qf,useCacheRefresh:fy},Nb={readContext:Kt,use:ic,useCallback:sy,useContext:Kt,useEffect:ey,useImperativeHandle:ry,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:ay,useReducer:Xf,useRef:Zg,useState:function(){return Xf(ji)},useDebugValue:Jf,useDeferredValue:function(t,i){var a=_t();return Qe===null?ed(a,t,i):oy(a,Qe.memoizedState,t,i)},useTransition:function(){var t=Xf(ji)[0],i=_t().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:kg,useId:hy,useHostTransitionStatus:nd,useFormState:Wg,useActionState:Wg,useOptimistic:function(t,i){var a=_t();return Qe!==null?qg(a,Qe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Qf,useCacheRefresh:fy},xa=null,ol=0;function uc(t){var i=ol;return ol+=1,xa===null&&(xa=[]),Cg(xa,t,i)}function ll(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function cc(t,i){throw i.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function _y(t){var i=t._init;return i(t._payload)}function vy(t){function i(j,M){if(t){var H=j.deletions;H===null?(j.deletions=[M],j.flags|=16):H.push(M)}}function a(j,M){if(!t)return null;for(;M!==null;)i(j,M),M=M.sibling;return null}function l(j){for(var M=new Map;j!==null;)j.key!==null?M.set(j.key,j):M.set(j.index,j),j=j.sibling;return M}function h(j,M){return j=Pi(j,M),j.index=0,j.sibling=null,j}function d(j,M,H){return j.index=H,t?(H=j.alternate,H!==null?(H=H.index,H<M?(j.flags|=67108866,M):H):(j.flags|=67108866,M)):(j.flags|=1048576,M)}function v(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,M,H,ee){return M===null||M.tag!==6?(M=Sf(H,j.mode,ee),M.return=j,M):(M=h(M,H),M.return=j,M)}function C(j,M,H,ee){var fe=H.type;return fe===k?J(j,M,H.props.children,ee,H.key):M!==null&&(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===S&&_y(fe)===M.type)?(M=h(M,H.props),ll(M,H),M.return=j,M):(M=Yu(H.type,H.key,H.props,null,j.mode,ee),ll(M,H),M.return=j,M)}function G(j,M,H,ee){return M===null||M.tag!==4||M.stateNode.containerInfo!==H.containerInfo||M.stateNode.implementation!==H.implementation?(M=wf(H,j.mode,ee),M.return=j,M):(M=h(M,H.children||[]),M.return=j,M)}function J(j,M,H,ee,fe){return M===null||M.tag!==7?(M=bs(H,j.mode,ee,fe),M.return=j,M):(M=h(M,H),M.return=j,M)}function ne(j,M,H){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Sf(""+M,j.mode,H),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return H=Yu(M.type,M.key,M.props,null,j.mode,H),ll(H,M),H.return=j,H;case D:return M=wf(M,j.mode,H),M.return=j,M;case S:var ee=M._init;return M=ee(M._payload),ne(j,M,H)}if(ot(M)||z(M))return M=bs(M,j.mode,H,null),M.return=j,M;if(typeof M.then=="function")return ne(j,uc(M),H);if(M.$$typeof===se)return ne(j,Xu(j,M),H);cc(j,M)}return null}function K(j,M,H,ee){var fe=M!==null?M.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return fe!==null?null:T(j,M,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===fe?C(j,M,H,ee):null;case D:return H.key===fe?G(j,M,H,ee):null;case S:return fe=H._init,H=fe(H._payload),K(j,M,H,ee)}if(ot(H)||z(H))return fe!==null?null:J(j,M,H,ee,null);if(typeof H.then=="function")return K(j,M,uc(H),ee);if(H.$$typeof===se)return K(j,M,Xu(j,H),ee);cc(j,H)}return null}function Q(j,M,H,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return j=j.get(H)||null,T(M,j,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return j=j.get(ee.key===null?H:ee.key)||null,C(M,j,ee,fe);case D:return j=j.get(ee.key===null?H:ee.key)||null,G(M,j,ee,fe);case S:var Ne=ee._init;return ee=Ne(ee._payload),Q(j,M,H,ee,fe)}if(ot(ee)||z(ee))return j=j.get(H)||null,J(M,j,ee,fe,null);if(typeof ee.then=="function")return Q(j,M,H,uc(ee),fe);if(ee.$$typeof===se)return Q(j,M,H,Xu(M,ee),fe);cc(M,ee)}return null}function Ae(j,M,H,ee){for(var fe=null,Ne=null,me=M,ve=M=0,Pt=null;me!==null&&ve<H.length;ve++){me.index>ve?(Pt=me,me=null):Pt=me.sibling;var ze=K(j,me,H[ve],ee);if(ze===null){me===null&&(me=Pt);break}t&&me&&ze.alternate===null&&i(j,me),M=d(ze,M,ve),Ne===null?fe=ze:Ne.sibling=ze,Ne=ze,me=Pt}if(ve===H.length)return a(j,me),Be&&ws(j,ve),fe;if(me===null){for(;ve<H.length;ve++)me=ne(j,H[ve],ee),me!==null&&(M=d(me,M,ve),Ne===null?fe=me:Ne.sibling=me,Ne=me);return Be&&ws(j,ve),fe}for(me=l(me);ve<H.length;ve++)Pt=Q(me,j,ve,H[ve],ee),Pt!==null&&(t&&Pt.alternate!==null&&me.delete(Pt.key===null?ve:Pt.key),M=d(Pt,M,ve),Ne===null?fe=Pt:Ne.sibling=Pt,Ne=Pt);return t&&me.forEach(function(xr){return i(j,xr)}),Be&&ws(j,ve),fe}function _e(j,M,H,ee){if(H==null)throw Error(s(151));for(var fe=null,Ne=null,me=M,ve=M=0,Pt=null,ze=H.next();me!==null&&!ze.done;ve++,ze=H.next()){me.index>ve?(Pt=me,me=null):Pt=me.sibling;var xr=K(j,me,ze.value,ee);if(xr===null){me===null&&(me=Pt);break}t&&me&&xr.alternate===null&&i(j,me),M=d(xr,M,ve),Ne===null?fe=xr:Ne.sibling=xr,Ne=xr,me=Pt}if(ze.done)return a(j,me),Be&&ws(j,ve),fe;if(me===null){for(;!ze.done;ve++,ze=H.next())ze=ne(j,ze.value,ee),ze!==null&&(M=d(ze,M,ve),Ne===null?fe=ze:Ne.sibling=ze,Ne=ze);return Be&&ws(j,ve),fe}for(me=l(me);!ze.done;ve++,ze=H.next())ze=Q(me,j,ve,ze.value,ee),ze!==null&&(t&&ze.alternate!==null&&me.delete(ze.key===null?ve:ze.key),M=d(ze,M,ve),Ne===null?fe=ze:Ne.sibling=ze,Ne=ze);return t&&me.forEach(function(DS){return i(j,DS)}),Be&&ws(j,ve),fe}function Xe(j,M,H,ee){if(typeof H=="object"&&H!==null&&H.type===k&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var fe=H.key;M!==null;){if(M.key===fe){if(fe=H.type,fe===k){if(M.tag===7){a(j,M.sibling),ee=h(M,H.props.children),ee.return=j,j=ee;break e}}else if(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===S&&_y(fe)===M.type){a(j,M.sibling),ee=h(M,H.props),ll(ee,H),ee.return=j,j=ee;break e}a(j,M);break}else i(j,M);M=M.sibling}H.type===k?(ee=bs(H.props.children,j.mode,ee,H.key),ee.return=j,j=ee):(ee=Yu(H.type,H.key,H.props,null,j.mode,ee),ll(ee,H),ee.return=j,j=ee)}return v(j);case D:e:{for(fe=H.key;M!==null;){if(M.key===fe)if(M.tag===4&&M.stateNode.containerInfo===H.containerInfo&&M.stateNode.implementation===H.implementation){a(j,M.sibling),ee=h(M,H.children||[]),ee.return=j,j=ee;break e}else{a(j,M);break}else i(j,M);M=M.sibling}ee=wf(H,j.mode,ee),ee.return=j,j=ee}return v(j);case S:return fe=H._init,H=fe(H._payload),Xe(j,M,H,ee)}if(ot(H))return Ae(j,M,H,ee);if(z(H)){if(fe=z(H),typeof fe!="function")throw Error(s(150));return H=fe.call(H),_e(j,M,H,ee)}if(typeof H.then=="function")return Xe(j,M,uc(H),ee);if(H.$$typeof===se)return Xe(j,M,Xu(j,H),ee);cc(j,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,M!==null&&M.tag===6?(a(j,M.sibling),ee=h(M,H),ee.return=j,j=ee):(a(j,M),ee=Sf(H,j.mode,ee),ee.return=j,j=ee),v(j)):a(j,M)}return function(j,M,H,ee){try{ol=0;var fe=Xe(j,M,H,ee);return xa=null,fe}catch(me){if(me===Zo||me===Zu)throw me;var Ne=hn(29,me,null,j.mode);return Ne.lanes=ee,Ne.return=j,Ne}finally{}}}var Ma=vy(!0),Ey=vy(!1),Cn=re(null),ii=null;function yr(t){var i=t.alternate;ae(Ct,Ct.current&1),ae(Cn,t),ii===null&&(i===null||Ca.current!==null||i.memoizedState!==null)&&(ii=t)}function Ty(t){if(t.tag===22){if(ae(Ct,Ct.current),ae(Cn,t),ii===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ii=t)}}else _r()}function _r(){ae(Ct,Ct.current),ae(Cn,Cn.current)}function Bi(t){ue(Cn),ii===t&&(ii=null),ue(Ct)}var Ct=re(0);function hc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Kd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function rd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=pn(),h=mr(l);h.payload=i,a!=null&&(h.callback=a),i=pr(t,h,l),i!==null&&(gn(i,t,l),el(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=pn(),h=mr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=pr(t,h,l),i!==null&&(gn(i,t,l),el(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=pn(),l=mr(a);l.tag=2,i!=null&&(l.callback=i),i=pr(t,l,a),i!==null&&(gn(i,t,a),el(i,t,a))}};function Ay(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Fo(a,l)||!Fo(h,d):!0}function by(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&sd.enqueueReplaceState(i,i.state,null)}function xs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var fc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Sy(t){fc(t)}function wy(t){console.error(t)}function Ry(t){fc(t)}function dc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Iy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ad(t,i,a){return a=mr(a),a.tag=3,a.payload={element:null},a.callback=function(){dc(t,i)},a}function Cy(t){return t=mr(t),t.tag=3,t}function Ny(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Iy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Iy(i,a,l),typeof h!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Db(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&$o(i,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 13:return ii===null?Dd():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Pf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),xd(t,l,h)),!1;case 22:return a.flags|=65536,l===Pf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),xd(t,l,h)),!1}throw Error(s(435,a.tag))}return xd(t,l,h),Dd(),!1}if(Be)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Cf&&(t=Error(s(422),{cause:l}),Qo(Sn(t,a)))):(l!==Cf&&(i=Error(s(423),{cause:l}),Qo(Sn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Sn(l,a),h=ad(t.stateNode,l,h),Lf(t,h),ct!==4&&(ct=2)),!1;var d=Error(s(520),{cause:l});if(d=Sn(d,a),pl===null?pl=[d]:pl.push(d),ct!==4&&(ct=2),i===null)return!0;l=Sn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ad(a.stateNode,l,t),Lf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Sr===null||!Sr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Cy(h),Ny(h,t,a,l),Lf(a,h),!1}a=a.return}while(a!==null);return!1}var Dy=Error(s(461)),Mt=!1;function zt(t,i,a,l){i.child=t===null?Ey(i,null,a,l):Ma(i,t.child,a,l)}function Oy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Ns(i),l=Hf(t,i,a,v,d,h),T=Ff(),t!==null&&!Mt?(Gf(t,i,h),qi(t,i,h)):(Be&&T&&Rf(i),i.flags|=1,zt(t,i,l,h),i.child)}function xy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!bf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,My(t,i,d,l,h)):(t=Yu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!md(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(v,l)&&t.ref===i.ref)return qi(t,i,h)}return i.flags|=1,t=Pi(d,l),t.ref=i.ref,t.return=i,i.child=t}function My(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Fo(d,l)&&t.ref===i.ref)if(Mt=!1,i.pendingProps=l=d,md(t,h))(t.flags&131072)!==0&&(Mt=!0);else return i.lanes=t.lanes,qi(t,i,h)}return od(t,i,a,l,h)}function Vy(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Py(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Wu(i,d!==null?d.cachePool:null),d!==null?Mg(i,d):jf(),Ty(i);else return i.lanes=i.childLanes=536870912,Py(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Wu(i,d.cachePool),Mg(i,d),_r(),i.memoizedState=null):(t!==null&&Wu(i,null),jf(),_r());return zt(t,i,h,a),i.child}function Py(t,i,a,l){var h=Vf();return h=h===null?null:{parent:It._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Wu(i,null),jf(),Ty(i),t!==null&&$o(t,i,l,!0),null}function mc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function od(t,i,a,l,h){return Ns(i),a=Hf(t,i,a,l,void 0,h),l=Ff(),t!==null&&!Mt?(Gf(t,i,h),qi(t,i,h)):(Be&&l&&Rf(i),i.flags|=1,zt(t,i,a,h),i.child)}function ky(t,i,a,l,h,d){return Ns(i),i.updateQueue=null,a=Pg(i,l,a,h),Vg(t),l=Ff(),t!==null&&!Mt?(Gf(t,i,d),qi(t,i,d)):(Be&&l&&Rf(i),i.flags|=1,zt(t,i,a,d),i.child)}function Uy(t,i,a,l,h){if(Ns(i),i.stateNode===null){var d=ba,v=a.contextType;typeof v=="object"&&v!==null&&(d=Kt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},kf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Kt(v):ba,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(rd(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&sd.enqueueReplaceState(d,d.state,null),nl(i,l,d,h),tl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,C=xs(a,T);d.props=C;var G=d.context,J=a.contextType;v=ba,typeof J=="object"&&J!==null&&(v=Kt(J));var ne=a.getDerivedStateFromProps;J=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||G!==v)&&by(i,d,l,v),dr=!1;var K=i.memoizedState;d.state=K,nl(i,l,d,h),tl(),G=i.memoizedState,T||K!==G||dr?(typeof ne=="function"&&(rd(i,a,ne,l),G=i.memoizedState),(C=dr||Ay(i,a,C,l,K,G,v))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=v,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Uf(t,i),v=i.memoizedProps,J=xs(a,v),d.props=J,ne=i.pendingProps,K=d.context,G=a.contextType,C=ba,typeof G=="object"&&G!==null&&(C=Kt(G)),T=a.getDerivedStateFromProps,(G=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==ne||K!==C)&&by(i,d,l,C),dr=!1,K=i.memoizedState,d.state=K,nl(i,l,d,h),tl();var Q=i.memoizedState;v!==ne||K!==Q||dr||t!==null&&t.dependencies!==null&&$u(t.dependencies)?(typeof T=="function"&&(rd(i,a,T,l),Q=i.memoizedState),(J=dr||Ay(i,a,J,l,K,Q,C)||t!==null&&t.dependencies!==null&&$u(t.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Q,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Q,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Q),d.props=l,d.state=Q,d.context=C,l=J):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,mc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Ma(i,t.child,null,h),i.child=Ma(i,null,a,h)):zt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=qi(t,i,h),t}function Ly(t,i,a,l){return Ko(),i.flags|=256,zt(t,i,a,l),i.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ud(t){return{baseLanes:t,cachePool:wg()}}function cd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Nn),t}function zy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Ct.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Be){if(h?yr(i):_r(),Be){var T=ut,C;if(C=T){e:{for(C=T,T=ni;C.nodeType!==8;){if(!T){T=null;break e}if(C=Ln(C.nextSibling),C===null){T=null;break e}}T=C}T!==null?(i.memoizedState={dehydrated:T,treeContext:Ss!==null?{id:ki,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},C=hn(18,null,null,0),C.stateNode=T,C.return=i,i.child=C,nn=i,ut=null,C=!0):C=!1}C||Is(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Kd(T)?i.lanes=32:i.lanes=536870912,null;Bi(i)}return T=l.children,l=l.fallback,h?(_r(),h=i.mode,T=pc({mode:"hidden",children:T},h),l=bs(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=ud(a),h.childLanes=cd(t,v,a),i.memoizedState=ld,l):(yr(i),hd(i,T))}if(C=t.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(d)i.flags&256?(yr(i),i.flags&=-257,i=fd(t,i,a)):i.memoizedState!==null?(_r(),i.child=t.child,i.flags|=128,i=null):(_r(),h=l.fallback,T=i.mode,l=pc({mode:"visible",children:l.children},T),h=bs(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ma(i,t.child,null,a),l=i.child,l.memoizedState=ud(a),l.childLanes=cd(t,v,a),i.memoizedState=ld,i=h);else if(yr(i),Kd(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var G=v.dgst;v=G,l=Error(s(419)),l.stack="",l.digest=v,Qo({value:l,source:null,stack:null}),i=fd(t,i,a)}else if(Mt||$o(t,i,a,!1),v=(a&t.childLanes)!==0,Mt||v){if(v=Je,v!==null&&(l=a&-a,l=(l&42)!==0?1:sr(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,Aa(t,l),gn(v,t,l),Dy;T.data==="$?"||Dd(),i=fd(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,ut=Ln(T.nextSibling),nn=i,Be=!0,Rs=null,ni=!1,t!==null&&(Rn[In++]=ki,Rn[In++]=Ui,Rn[In++]=Ss,ki=t.id,Ui=t.overflow,Ss=i),i=hd(i,l.children),i.flags|=4096);return i}return h?(_r(),h=l.fallback,T=i.mode,C=t.child,G=C.sibling,l=Pi(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,G!==null?h=Pi(G,h):(h=bs(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=t.child.memoizedState,T===null?T=ud(a):(C=T.cachePool,C!==null?(G=It._currentValue,C=C.parent!==G?{parent:G,pool:G}:C):C=wg(),T={baseLanes:T.baseLanes|a,cachePool:C}),h.memoizedState=T,h.childLanes=cd(t,v,a),i.memoizedState=ld,l):(yr(i),a=t.child,t=a.sibling,a=Pi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function hd(t,i){return i=pc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function pc(t,i){return t=hn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function fd(t,i,a){return Ma(i,t.child,null,a),t=hd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function jy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Df(t.return,i,a)}function dd(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function By(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(zt(t,i,l.children,a),l=Ct.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jy(t,a,i);else if(t.tag===19)jy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ae(Ct,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&hc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),dd(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&hc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}dd(i,!0,a,null,d);break;case"together":dd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function qi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),br|=i.lanes,(a&i.childLanes)===0)if(t!==null){if($o(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Pi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Pi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function md(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&$u(t)))}function Ob(t,i,a){switch(i.tag){case 3:Ze(i,i.stateNode.containerInfo),fr(i,It,t.memoizedState.cache),Ko();break;case 27:case 5:rr(i);break;case 4:Ze(i,i.stateNode.containerInfo);break;case 10:fr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(yr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?zy(t,i,a):(yr(i),t=qi(t,i,a),t!==null?t.sibling:null);yr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||($o(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return By(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(Ct,Ct.current),l)break;return null;case 22:case 23:return i.lanes=0,Vy(t,i,a);case 24:fr(i,It,t.memoizedState.cache)}return qi(t,i,a)}function qy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Mt=!0;else{if(!md(t,a)&&(i.flags&128)===0)return Mt=!1,Ob(t,i,a);Mt=(t.flags&131072)!==0}else Mt=!1,Be&&(i.flags&1048576)!==0&&_g(i,Qu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")bf(l)?(t=xs(l,t),i.tag=1,i=Uy(null,i,l,t,a)):(i.tag=0,i=od(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===I){i.tag=11,i=Oy(null,i,l,t,a);break e}else if(h===O){i.tag=14,i=xy(null,i,l,t,a);break e}}throw i=bt(l)||l,Error(s(306,i,""))}}return i;case 0:return od(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=xs(l,i.pendingProps),Uy(t,i,l,h,a);case 3:e:{if(Ze(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Uf(t,i),nl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,fr(i,It,l),l!==d.cache&&Of(i,[It],a,!0),tl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ly(t,i,l,a);break e}else if(l!==h){h=Sn(Error(s(424)),i),Qo(h),i=Ly(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ut=Ln(t.firstChild),nn=i,Be=!0,Rs=null,ni=!0,a=Ey(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ko(),l===h){i=qi(t,i,a);break e}zt(t,i,l,a)}i=i.child}return i;case 26:return mc(t,i),t===null?(a=Y_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Be||(a=i.type,t=i.pendingProps,l=Nc(be.current).createElement(a),l[St]=i,l[pt]=t,Bt(l,a,t),ht(l),i.stateNode=l):i.memoizedState=Y_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return rr(i),t===null&&Be&&(l=i.stateNode=H_(i.type,i.pendingProps,be.current),nn=i,ni=!0,h=ut,Ir(i.type)?(Qd=h,ut=Ln(l.firstChild)):ut=h),zt(t,i,i.pendingProps.children,a),mc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Be&&((h=l=ut)&&(l=sS(l,i.type,i.pendingProps,ni),l!==null?(i.stateNode=l,nn=i,ut=Ln(l.firstChild),ni=!1,h=!0):h=!1),h||Is(i)),rr(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Fd(h,d)?l=null:v!==null&&Fd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Hf(t,i,bb,null,null,a),Sl._currentValue=h),mc(t,i),zt(t,i,l,a),i.child;case 6:return t===null&&Be&&((t=a=ut)&&(a=aS(a,i.pendingProps,ni),a!==null?(i.stateNode=a,nn=i,ut=null,t=!0):t=!1),t||Is(i)),null;case 13:return zy(t,i,a);case 4:return Ze(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ma(i,null,l,a):zt(t,i,l,a),i.child;case 11:return Oy(t,i,i.type,i.pendingProps,a);case 7:return zt(t,i,i.pendingProps,a),i.child;case 8:return zt(t,i,i.pendingProps.children,a),i.child;case 12:return zt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,fr(i,i.type,l.value),zt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Ns(i),h=Kt(h),l=l(h),i.flags|=1,zt(t,i,l,a),i.child;case 14:return xy(t,i,i.type,i.pendingProps,a);case 15:return My(t,i,i.type,i.pendingProps,a);case 19:return By(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=pc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Pi(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Vy(t,i,a);case 24:return Ns(i),l=Kt(It),t===null?(h=Vf(),h===null&&(h=Je,d=xf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},kf(i),fr(i,It,h)):((t.lanes&a)!==0&&(Uf(t,i),nl(i,null,null,a),tl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),fr(i,It,l)):(l=d.cache,fr(i,It,l),l!==h.cache&&Of(i,[It],a,!0))),zt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Hi(t){t.flags|=4}function Hy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!W_(i)){if(i=Cn.current,i!==null&&((Ue&4194048)===Ue?ii!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||i!==ii))throw Jo=Pf,Rg;t.flags|=8192}}function gc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ro():536870912,t.lanes|=i,Ua|=i)}function ul(t,i){if(!Be)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function rt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function xb(t,i,a){var l=i.pendingProps;switch(If(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(i),null;case 1:return rt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),zi(It),Fn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Yo(i)?Hi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Tg())),rt(i),null;case 26:return a=i.memoizedState,t===null?(Hi(i),a!==null?(rt(i),Hy(i,a)):(rt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Hi(i),rt(i),Hy(i,a)):(rt(i),i.flags&=-16777217):(t.memoizedProps!==l&&Hi(i),rt(i),i.flags&=-16777217),null;case 27:Ai(i),a=be.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Hi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}t=ye.current,Yo(i)?vg(i):(t=H_(h,l,a),i.stateNode=t,Hi(i))}return rt(i),null;case 5:if(Ai(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Hi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}if(t=ye.current,Yo(i))vg(i);else{switch(h=Nc(be.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[St]=i,t[pt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Bt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Hi(i)}}return rt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Hi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=be.current,Yo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=nn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[St]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||k_(t.nodeValue,a)),t||Is(i)}else t=Nc(t).createTextNode(l),t[St]=i,i.stateNode=t}return rt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Yo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[St]=i}else Ko(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rt(i),h=!1}else h=Tg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Bi(i),i):(Bi(i),null)}if(Bi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),gc(i,i.updateQueue),rt(i),null;case 4:return Fn(),t===null&&zd(i.stateNode.containerInfo),rt(i),null;case 10:return zi(i.type),rt(i),null;case 19:if(ue(Ct),h=i.memoizedState,h===null)return rt(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)ul(h,!1);else{if(ct!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=hc(t),d!==null){for(i.flags|=128,ul(h,!1),t=d.updateQueue,i.updateQueue=t,gc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)yg(a,t),a=a.sibling;return ae(Ct,Ct.current&1|2),i.child}t=t.sibling}h.tail!==null&&_n()>vc&&(i.flags|=128,l=!0,ul(h,!1),i.lanes=4194304)}else{if(!l)if(t=hc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,gc(i,t),ul(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Be)return rt(i),null}else 2*_n()-h.renderingStartTime>vc&&a!==536870912&&(i.flags|=128,l=!0,ul(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=_n(),i.sibling=null,t=Ct.current,ae(Ct,l?t&1|2:t&1),i):(rt(i),null);case 22:case 23:return Bi(i),Bf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(rt(i),i.subtreeFlags&6&&(i.flags|=8192)):rt(i),a=i.updateQueue,a!==null&&gc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ue(Ds),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),zi(It),rt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Mb(t,i){switch(If(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return zi(It),Fn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ai(i),null;case 13:if(Bi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ko()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ue(Ct),null;case 4:return Fn(),null;case 10:return zi(i.type),null;case 22:case 23:return Bi(i),Bf(),t!==null&&ue(Ds),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return zi(It),null;case 25:return null;default:return null}}function Fy(t,i){switch(If(i),i.tag){case 3:zi(It),Fn();break;case 26:case 27:case 5:Ai(i);break;case 4:Fn();break;case 13:Bi(i);break;case 19:ue(Ct);break;case 10:zi(i.type);break;case 22:case 23:Bi(i),Bf(),t!==null&&ue(Ds);break;case 24:zi(It)}}function cl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){We(i,i.return,T)}}function vr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var C=a,G=T;try{G()}catch(J){We(h,C,J)}}}l=l.next}while(l!==d)}}catch(J){We(i,i.return,J)}}function Gy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{xg(i,a)}catch(l){We(t,t.return,l)}}}function Yy(t,i,a){a.props=xs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,i,l)}}function hl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){We(t,i,h)}}function ri(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){We(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){We(t,i,h)}else a.current=null}function Ky(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){We(t,t.return,h)}}function pd(t,i,a){try{var l=t.stateNode;eS(l,t.type,a,i),l[pt]=i}catch(h){We(t,t.return,h)}}function Qy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ir(t.type)||t.tag===4}function gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ir(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Cc));else if(l!==4&&(l===27&&Ir(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(yd(t,i,a),t=t.sibling;t!==null;)yd(t,i,a),t=t.sibling}function yc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Ir(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(yc(t,i,a),t=t.sibling;t!==null;)yc(t,i,a),t=t.sibling}function $y(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Bt(i,l,a),i[St]=t,i[pt]=a}catch(d){We(t,t.return,d)}}var Fi=!1,dt=!1,_d=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function Vb(t,i){if(t=t.containerInfo,qd=Pc,t=og(t),gf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,T=-1,C=-1,G=0,J=0,ne=t,K=null;t:for(;;){for(var Q;ne!==a||h!==0&&ne.nodeType!==3||(T=v+h),ne!==d||l!==0&&ne.nodeType!==3||(C=v+l),ne.nodeType===3&&(v+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)K=ne,ne=Q;for(;;){if(ne===t)break t;if(K===a&&++G===h&&(T=v),K===d&&++J===l&&(C=v),(Q=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=Q}a=T===-1||C===-1?null:{start:T,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hd={focusedElem:t,selectionRange:a},Pc=!1,Vt=i;Vt!==null;)if(i=Vt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Vt=t;else for(;Vt!==null;){switch(i=Vt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ae=xs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ae,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){We(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Yd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Vt=t;break}Vt=i.return}}function Wy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Er(t,a),l&4&&cl(5,a);break;case 1:if(Er(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){We(a,a.return,v)}else{var h=xs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){We(a,a.return,v)}}l&64&&Gy(a),l&512&&hl(a,a.return);break;case 3:if(Er(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{xg(t,i)}catch(v){We(a,a.return,v)}}break;case 27:i===null&&l&4&&$y(a);case 26:case 5:Er(t,a),i===null&&l&4&&Ky(a),l&512&&hl(a,a.return);break;case 12:Er(t,a);break;case 13:Er(t,a),l&4&&e_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Hb.bind(null,a),oS(t,a))));break;case 22:if(l=a.memoizedState!==null||Fi,!l){i=i!==null&&i.memoizedState!==null||dt,h=Fi;var d=dt;Fi=l,(dt=i)&&!d?Tr(t,a,(a.subtreeFlags&8772)!==0):Er(t,a),Fi=h,dt=d}break;case 30:break;default:Er(t,a)}}function Zy(t){var i=t.alternate;i!==null&&(t.alternate=null,Zy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&lr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,sn=!1;function Gi(t,i,a){for(a=a.child;a!==null;)Jy(t,i,a),a=a.sibling}function Jy(t,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(lt,a)}catch{}switch(a.tag){case 26:dt||ri(a,i),Gi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:dt||ri(a,i);var l=it,h=sn;Ir(a.type)&&(it=a.stateNode,sn=!1),Gi(t,i,a),El(a.stateNode),it=l,sn=h;break;case 5:dt||ri(a,i);case 6:if(l=it,h=sn,it=null,Gi(t,i,a),it=l,sn=h,it!==null)if(sn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(d){We(a,i,d)}else try{it.removeChild(a.stateNode)}catch(d){We(a,i,d)}break;case 18:it!==null&&(sn?(t=it,B_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Cl(t)):B_(it,a.stateNode));break;case 4:l=it,h=sn,it=a.stateNode.containerInfo,sn=!0,Gi(t,i,a),it=l,sn=h;break;case 0:case 11:case 14:case 15:dt||vr(2,a,i),dt||vr(4,a,i),Gi(t,i,a);break;case 1:dt||(ri(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Yy(a,i,l)),Gi(t,i,a);break;case 21:Gi(t,i,a);break;case 22:dt=(l=dt)||a.memoizedState!==null,Gi(t,i,a),dt=l;break;default:Gi(t,i,a)}}function e_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Cl(t)}catch(a){We(i,i.return,a)}}function Pb(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Xy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Xy),i;default:throw Error(s(435,t.tag))}}function vd(t,i){var a=Pb(t);i.forEach(function(l){var h=Fb.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function fn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Ir(T.type)){it=T.stateNode,sn=!1;break e}break;case 5:it=T.stateNode,sn=!1;break e;case 3:case 4:it=T.stateNode.containerInfo,sn=!0;break e}T=T.return}if(it===null)throw Error(s(160));Jy(d,v,h),it=null,sn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)t_(i,t),i=i.sibling}var Un=null;function t_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fn(i,t),dn(t),l&4&&(vr(3,t,t.return),cl(3,t),vr(5,t,t.return));break;case 1:fn(i,t),dn(t),l&512&&(dt||a===null||ri(a,a.return)),l&64&&Fi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Un;if(fn(i,t),dn(t),l&512&&(dt||a===null||ri(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[os]||d[St]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Bt(d,l,a),d[St]=t,ht(d),l=d;break e;case"link":var v=$_("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(l),Bt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=$_("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}d=h.createElement(l),Bt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[St]=t,ht(d),l=d}t.stateNode=l}else X_(h,t.type,t.stateNode);else t.stateNode=Q_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?X_(h,t.type,t.stateNode):Q_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pd(t,t.memoizedProps,a.memoizedProps)}break;case 27:fn(i,t),dn(t),l&512&&(dt||a===null||ri(a,a.return)),a!==null&&l&4&&pd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,t),dn(t),l&512&&(dt||a===null||ri(a,a.return)),t.flags&32){h=t.stateNode;try{En(h,"")}catch(Q){We(t,t.return,Q)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,pd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(_d=!0);break;case 6:if(fn(i,t),dn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Q){We(t,t.return,Q)}}break;case 3:if(xc=null,h=Un,Un=Dc(i.containerInfo),fn(i,t),Un=h,dn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Cl(i.containerInfo)}catch(Q){We(t,t.return,Q)}_d&&(_d=!1,n_(t));break;case 4:l=Un,Un=Dc(t.stateNode.containerInfo),fn(i,t),dn(t),Un=l;break;case 12:fn(i,t),dn(t);break;case 13:fn(i,t),dn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wd=_n()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vd(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,G=Fi,J=dt;if(Fi=G||h,dt=J||C,fn(i,t),dt=J,Fi=G,dn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||Fi||dt||Ms(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=C.stateNode;var ne=C.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){We(C,C.return,Q)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(Q){We(C,C.return,Q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,vd(t,a))));break;case 19:fn(i,t),dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vd(t,l)));break;case 30:break;case 21:break;default:fn(i,t),dn(t)}}function dn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Qy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=gd(t);yc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(En(v,""),a.flags&=-33);var T=gd(t);yc(t,T,v);break;case 3:case 4:var C=a.stateNode.containerInfo,G=gd(t);yd(t,G,C);break;default:throw Error(s(161))}}catch(J){We(t,t.return,J)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function n_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;n_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Er(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Wy(t,i.alternate,i),i=i.sibling}function Ms(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:vr(4,i,i.return),Ms(i);break;case 1:ri(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Yy(i,i.return,a),Ms(i);break;case 27:El(i.stateNode);case 26:case 5:ri(i,i.return),Ms(i);break;case 22:i.memoizedState===null&&Ms(i);break;case 30:Ms(i);break;default:Ms(i)}t=t.sibling}}function Tr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Tr(h,d,a),cl(4,d);break;case 1:if(Tr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){We(l,l.return,G)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Og(C[h],T)}catch(G){We(l,l.return,G)}}a&&v&64&&Gy(d),hl(d,d.return);break;case 27:$y(d);case 26:case 5:Tr(h,d,a),a&&l===null&&v&4&&Ky(d),hl(d,d.return);break;case 12:Tr(h,d,a);break;case 13:Tr(h,d,a),a&&v&4&&e_(h,d);break;case 22:d.memoizedState===null&&Tr(h,d,a),hl(d,d.return);break;case 30:break;default:Tr(h,d,a)}i=i.sibling}}function Ed(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Xo(a))}function Td(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xo(t))}function si(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)i_(t,i,a,l),i=i.sibling}function i_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:si(t,i,a,l),h&2048&&cl(9,i);break;case 1:si(t,i,a,l);break;case 3:si(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Xo(t)));break;case 12:if(h&2048){si(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){We(i,i.return,C)}}else si(t,i,a,l);break;case 13:si(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?si(t,i,a,l):fl(t,i):d._visibility&2?si(t,i,a,l):(d._visibility|=2,Va(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Ed(v,i);break;case 24:si(t,i,a,l),h&2048&&Td(i.alternate,i);break;default:si(t,i,a,l)}}function Va(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,T=a,C=l,G=v.flags;switch(v.tag){case 0:case 11:case 15:Va(d,v,T,C,h),cl(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?Va(d,v,T,C,h):fl(d,v):(J._visibility|=2,Va(d,v,T,C,h)),h&&G&2048&&Ed(v.alternate,v);break;case 24:Va(d,v,T,C,h),h&&G&2048&&Td(v.alternate,v);break;default:Va(d,v,T,C,h)}i=i.sibling}}function fl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:fl(a,l),h&2048&&Ed(l.alternate,l);break;case 24:fl(a,l),h&2048&&Td(l.alternate,l);break;default:fl(a,l)}i=i.sibling}}var dl=8192;function Pa(t){if(t.subtreeFlags&dl)for(t=t.child;t!==null;)r_(t),t=t.sibling}function r_(t){switch(t.tag){case 26:Pa(t),t.flags&dl&&t.memoizedState!==null&&ES(Un,t.memoizedState,t.memoizedProps);break;case 5:Pa(t);break;case 3:case 4:var i=Un;Un=Dc(t.stateNode.containerInfo),Pa(t),Un=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=dl,dl=16777216,Pa(t),dl=i):Pa(t));break;default:Pa(t)}}function s_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ml(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Vt=l,o_(l,t)}s_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)a_(t),t=t.sibling}function a_(t){switch(t.tag){case 0:case 11:case 15:ml(t),t.flags&2048&&vr(9,t,t.return);break;case 3:ml(t);break;case 12:ml(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,_c(t)):ml(t);break;default:ml(t)}}function _c(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Vt=l,o_(l,t)}s_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:vr(8,i,i.return),_c(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,_c(i));break;default:_c(i)}t=t.sibling}}function o_(t,i){for(;Vt!==null;){var a=Vt;switch(a.tag){case 0:case 11:case 15:vr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Vt=l;else e:for(a=t;Vt!==null;){l=Vt;var h=l.sibling,d=l.return;if(Zy(l),l===a){Vt=null;break e}if(h!==null){h.return=d,Vt=h;break e}Vt=d}}}var kb={getCacheForType:function(t){var i=Kt(It),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},Ub=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Je=null,De=null,Ue=0,Ye=0,mn=null,Ar=!1,ka=!1,Ad=!1,Yi=0,ct=0,br=0,Vs=0,bd=0,Nn=0,Ua=0,pl=null,an=null,Sd=!1,wd=0,vc=1/0,Ec=null,Sr=null,jt=0,wr=null,La=null,za=0,Rd=0,Id=null,l_=null,gl=0,Cd=null;function pn(){if((Ge&2)!==0&&Ue!==0)return Ue&-Ue;if(Z.T!==null){var t=Ra;return t!==0?t:Pd()}return ar()}function u_(){Nn===0&&(Nn=(Ue&536870912)===0||Be?wo():536870912);var t=Cn.current;return t!==null&&(t.flags|=32),Nn}function gn(t,i,a){(t===Je&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(ja(t,0),Rr(t,Ue,Nn,!1)),Si(t,a),((Ge&2)===0||t!==Je)&&(t===Je&&((Ge&2)===0&&(Vs|=a),ct===4&&Rr(t,Ue,Nn,!1)),ai(t))}function c_(t,i,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||as(t,i),h=l?jb(t,i):Od(t,i,!0),d=l;do{if(h===0){ka&&!l&&Rr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!Lb(a)){h=Od(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=pl;var C=T.current.memoizedState.isDehydrated;if(C&&(ja(T,v).flags|=256),v=Od(T,v,!1),v!==2){if(Ad&&!C){T.errorRecoveryDisabledLanes|=d,Vs|=d,h=4;break e}d=an,an=h,d!==null&&(an===null?an=d:an.push.apply(an,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){ja(t,0),Rr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Rr(l,i,Nn,!Ar);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=wd+300-_n(),10<h)){if(Rr(l,i,Nn,!Ar),ia(l,0,!0)!==0)break e;l.timeoutHandle=z_(h_.bind(null,l,a,an,Ec,Sd,i,Nn,Vs,Ua,Ar,d,2,-0,0),h);break e}h_(l,a,an,Ec,Sd,i,Nn,Vs,Ua,Ar,d,0,-0,0)}}break}while(!0);ai(t)}function h_(t,i,a,l,h,d,v,T,C,G,J,ne,K,Q){if(t.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(bl={stylesheets:null,count:0,unsuspend:vS},r_(i),ne=TS(),ne!==null)){t.cancelPendingCommit=ne(__.bind(null,t,i,d,a,l,h,v,T,C,J,1,K,Q)),Rr(t,d,v,!G);return}__(t,i,d,a,l,h,v,T,C)}function Lb(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!cn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rr(t,i,a,l){i&=~bd,i&=~Vs,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Yt(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Gn(t,a,i)}function Tc(){return(Ge&6)===0?(yl(0),!1):!0}function Nd(){if(De!==null){if(Ye===0)var t=De.return;else t=De,Li=Cs=null,Yf(t),xa=null,ol=0,t=De;for(;t!==null;)Fy(t.alternate,t),t=t.return;De=null}}function ja(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,nS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Nd(),Je=t,De=a=Pi(t.current,null),Ue=i,Ye=0,mn=null,Ar=!1,ka=as(t,i),Ad=!1,Ua=Nn=bd=Vs=br=ct=0,an=pl=null,Sd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Yt(l),d=1<<h;i|=t[h],l&=~d}return Yi=i,Hu(),a}function f_(t,i){Ie=null,Z.H=lc,i===Zo||i===Zu?(i=Ng(),Ye=3):i===Rg?(i=Ng(),Ye=4):Ye=i===Dy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,De===null&&(ct=1,dc(t,Sn(i,t.current)))}function d_(){var t=Z.H;return Z.H=lc,t===null?lc:t}function m_(){var t=Z.A;return Z.A=kb,t}function Dd(){ct=4,Ar||(Ue&4194048)!==Ue&&Cn.current!==null||(ka=!0),(br&134217727)===0&&(Vs&134217727)===0||Je===null||Rr(Je,Ue,Nn,!1)}function Od(t,i,a){var l=Ge;Ge|=2;var h=d_(),d=m_();(Je!==t||Ue!==i)&&(Ec=null,ja(t,i)),i=!1;var v=ct;e:do try{if(Ye!==0&&De!==null){var T=De,C=mn;switch(Ye){case 8:Nd(),v=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var G=Ye;if(Ye=0,mn=null,Ba(t,T,C,G),a&&ka){v=0;break e}break;default:G=Ye,Ye=0,mn=null,Ba(t,T,C,G)}}zb(),v=ct;break}catch(J){f_(t,J)}while(!0);return i&&t.shellSuspendCounter++,Li=Cs=null,Ge=l,Z.H=h,Z.A=d,De===null&&(Je=null,Ue=0,Hu()),v}function zb(){for(;De!==null;)p_(De)}function jb(t,i){var a=Ge;Ge|=2;var l=d_(),h=m_();Je!==t||Ue!==i?(Ec=null,vc=_n()+500,ja(t,i)):ka=as(t,i);e:do try{if(Ye!==0&&De!==null){i=De;var d=mn;t:switch(Ye){case 1:Ye=0,mn=null,Ba(t,i,d,1);break;case 2:case 9:if(Ig(d)){Ye=0,mn=null,g_(i);break}i=function(){Ye!==2&&Ye!==9||Je!==t||(Ye=7),ai(t)},d.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Ig(d)?(Ye=0,mn=null,g_(i)):(Ye=0,mn=null,Ba(t,i,d,7));break;case 5:var v=null;switch(De.tag){case 26:v=De.memoizedState;case 5:case 27:var T=De;if(!v||W_(v)){Ye=0,mn=null;var C=T.sibling;if(C!==null)De=C;else{var G=T.return;G!==null?(De=G,Ac(G)):De=null}break t}}Ye=0,mn=null,Ba(t,i,d,5);break;case 6:Ye=0,mn=null,Ba(t,i,d,6);break;case 8:Nd(),ct=6;break e;default:throw Error(s(462))}}Bb();break}catch(J){f_(t,J)}while(!0);return Li=Cs=null,Z.H=l,Z.A=h,Ge=a,De!==null?0:(Je=null,Ue=0,Hu(),ct)}function Bb(){for(;De!==null&&!To();)p_(De)}function p_(t){var i=qy(t.alternate,t,Yi);t.memoizedProps=t.pendingProps,i===null?Ac(t):De=i}function g_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=ky(a,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=ky(a,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:Yf(i);default:Fy(a,i),i=De=yg(i,Yi),i=qy(a,i,Yi)}t.memoizedProps=t.pendingProps,i===null?Ac(t):De=i}function Ba(t,i,a,l){Li=Cs=null,Yf(i),xa=null,ol=0;var h=i.return;try{if(Db(t,h,i,a,Ue)){ct=1,dc(t,Sn(a,t.current)),De=null;return}}catch(d){if(h!==null)throw De=h,d;ct=1,dc(t,Sn(a,t.current)),De=null;return}i.flags&32768?(Be||l===1?t=!0:ka||(Ue&536870912)!==0?t=!1:(Ar=t=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),y_(i,t)):Ac(i)}function Ac(t){var i=t;do{if((i.flags&32768)!==0){y_(i,Ar);return}t=i.return;var a=xb(i.alternate,i,Yi);if(a!==null){De=a;return}if(i=i.sibling,i!==null){De=i;return}De=i=t}while(i!==null);ct===0&&(ct=5)}function y_(t,i){do{var a=Mb(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);ct=6,De=null}function __(t,i,a,l,h,d,v,T,C){t.cancelPendingCommit=null;do bc();while(jt!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Tf,Io(t,a,d,v,T,C),t===Je&&(De=Je=null,Ue=0),La=i,wr=t,za=a,Rd=d,Id=h,l_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Gb(ns,function(){return b_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null,h=le.p,le.p=2,v=Ge,Ge|=4;try{Vb(t,i,a)}finally{Ge=v,le.p=h,Z.T=l}}jt=1,v_(),E_(),T_()}}function v_(){if(jt===1){jt=0;var t=wr,i=La,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Z.T,Z.T=null;var l=le.p;le.p=2;var h=Ge;Ge|=4;try{t_(i,t);var d=Hd,v=og(t.containerInfo),T=d.focusedElem,C=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&ag(T.ownerDocument.documentElement,T)){if(C!==null&&gf(T)){var G=C.start,J=C.end;if(J===void 0&&(J=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(J,T.value.length);else{var ne=T.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Ae=T.textContent.length,_e=Math.min(C.start,Ae),Xe=C.end===void 0?_e:Math.min(C.end,Ae);!Q.extend&&_e>Xe&&(v=Xe,Xe=_e,_e=v);var j=sg(T,_e),M=sg(T,Xe);if(j&&M&&(Q.rangeCount!==1||Q.anchorNode!==j.node||Q.anchorOffset!==j.offset||Q.focusNode!==M.node||Q.focusOffset!==M.offset)){var H=ne.createRange();H.setStart(j.node,j.offset),Q.removeAllRanges(),_e>Xe?(Q.addRange(H),Q.extend(M.node,M.offset)):(H.setEnd(M.node,M.offset),Q.addRange(H))}}}}for(ne=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var ee=ne[T];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Pc=!!qd,Hd=qd=null}finally{Ge=h,le.p=l,Z.T=a}}t.current=i,jt=2}}function E_(){if(jt===2){jt=0;var t=wr,i=La,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Z.T,Z.T=null;var l=le.p;le.p=2;var h=Ge;Ge|=4;try{Wy(t,i.alternate,i)}finally{Ge=h,le.p=l,Z.T=a}}jt=3}}function T_(){if(jt===4||jt===3){jt=0,_u();var t=wr,i=La,a=za,l=l_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?jt=5:(jt=0,La=wr=null,A_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Sr=null),ra(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(lt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Z.T,h=le.p,le.p=2,Z.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var T=l[v];d(T.value,{componentStack:T.stack})}}finally{Z.T=i,le.p=h}}(za&3)!==0&&bc(),ai(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Cd?gl++:(gl=0,Cd=t):gl=0,yl(0)}}function A_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Xo(i)))}function bc(t){return v_(),E_(),T_(),b_()}function b_(){if(jt!==5)return!1;var t=wr,i=Rd;Rd=0;var a=ra(za),l=Z.T,h=le.p;try{le.p=32>a?32:a,Z.T=null,a=Id,Id=null;var d=wr,v=za;if(jt=0,La=wr=null,za=0,(Ge&6)!==0)throw Error(s(331));var T=Ge;if(Ge|=4,a_(d.current),i_(d,d.current,v,a),Ge=T,yl(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(lt,d)}catch{}return!0}finally{le.p=h,Z.T=l,A_(t,i)}}function S_(t,i,a){i=Sn(a,i),i=ad(t.stateNode,i,2),t=pr(t,i,2),t!==null&&(Si(t,2),ai(t))}function We(t,i,a){if(t.tag===3)S_(t,t,a);else for(;i!==null;){if(i.tag===3){S_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Sr===null||!Sr.has(l))){t=Sn(a,t),a=Cy(2),l=pr(i,a,2),l!==null&&(Ny(a,l,i,t),Si(l,2),ai(l));break}}i=i.return}}function xd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Ub;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Ad=!0,h.add(a),t=qb.bind(null,t,i,a),i.then(t,t))}function qb(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Je===t&&(Ue&a)===a&&(ct===4||ct===3&&(Ue&62914560)===Ue&&300>_n()-wd?(Ge&2)===0&&ja(t,0):bd|=a,Ua===Ue&&(Ua=0)),ai(t)}function w_(t,i){i===0&&(i=Ro()),t=Aa(t,i),t!==null&&(Si(t,i),ai(t))}function Hb(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),w_(t,a)}function Fb(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),w_(t,a)}function Gb(t,i){return es(t,i)}var Sc=null,qa=null,Md=!1,wc=!1,Vd=!1,Ps=0;function ai(t){t!==qa&&t.next===null&&(qa===null?Sc=qa=t:qa=qa.next=t),wc=!0,Md||(Md=!0,Kb())}function yl(t,i){if(!Vd&&wc){Vd=!0;do for(var a=!1,l=Sc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Yt(42|t)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,N_(l,d))}else d=Ue,d=ia(l,l===Je?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||as(l,d)||(a=!0,N_(l,d));l=l.next}while(a);Vd=!1}}function Yb(){R_()}function R_(){wc=Md=!1;var t=0;Ps!==0&&(tS()&&(t=Ps),Ps=0);for(var i=_n(),a=null,l=Sc;l!==null;){var h=l.next,d=I_(l,i);d===0?(l.next=null,a===null?Sc=h:a.next=h,h===null&&(qa=a)):(a=l,(t!==0||(d&3)!==0)&&(wc=!0)),l=h}yl(t)}function I_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Yt(d),T=1<<v,C=h[v];C===-1?((T&a)===0||(T&l)!==0)&&(h[v]=So(T,i)):C<=i&&(t.expiredLanes|=T),d&=~T}if(i=Je,a=Ue,a=ia(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ts(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||as(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ts(l),ra(a)){case 2:case 8:a=ta;break;case 32:a=ns;break;case 268435456:a=na;break;default:a=ns}return l=C_.bind(null,t),a=es(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ts(l),t.callbackPriority=2,t.callbackNode=null,2}function C_(t,i){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(bc()&&t.callbackNode!==a)return null;var l=Ue;return l=ia(t,t===Je?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(c_(t,l,i),I_(t,_n()),t.callbackNode!=null&&t.callbackNode===a?C_.bind(null,t):null)}function N_(t,i){if(bc())return null;c_(t,i,!0)}function Kb(){iS(function(){(Ge&6)!==0?es(Ao,Yb):R_()})}function Pd(){return Ps===0&&(Ps=wo()),Ps}function D_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ca(""+t)}function O_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Qb(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=D_((h[pt]||null).action),v=l.submitter;v&&(i=(i=v[pt]||null)?D_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new ha("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ps!==0){var C=v?O_(h,v):new FormData(h);td(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(T.preventDefault(),C=v?O_(h,v):new FormData(h),td(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var kd=0;kd<Ef.length;kd++){var Ud=Ef[kd],$b=Ud.toLowerCase(),Xb=Ud[0].toUpperCase()+Ud.slice(1);kn($b,"on"+Xb)}kn(cg,"onAnimationEnd"),kn(hg,"onAnimationIteration"),kn(fg,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(db,"onTransitionRun"),kn(mb,"onTransitionStart"),kn(pb,"onTransitionCancel"),kn(dg,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function x_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],C=T.instance,G=T.currentTarget;if(T=T.listener,C!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=G;try{d(h)}catch(J){fc(J)}h.currentTarget=null,d=C}else for(v=0;v<l.length;v++){if(T=l[v],C=T.instance,G=T.currentTarget,T=T.listener,C!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=G;try{d(h)}catch(J){fc(J)}h.currentTarget=null,d=C}}}}function Oe(t,i){var a=i[No];a===void 0&&(a=i[No]=new Set);var l=t+"__bubble";a.has(l)||(M_(i,t,2,!1),a.add(l))}function Ld(t,i,a){var l=0;i&&(l|=4),M_(a,t,l,i)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function zd(t){if(!t[Rc]){t[Rc]=!0,Do.forEach(function(a){a!=="selectionchange"&&(Wb.has(a)||Ld(a,!1,t),Ld(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Rc]||(i[Rc]=!0,Ld("selectionchange",!1,i))}}function M_(t,i,a,l){switch(iv(i)){case 2:var h=SS;break;case 8:h=wS;break;default:h=Jd}a=h.bind(null,i,a,t),h=void 0,!An||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function jd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=l.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=wi(T),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){l=d=v;continue e}T=T.parentNode}}l=l.return}Cu(function(){var G=d,J=Tn(a),ne=[];e:{var K=mg.get(t);if(K!==void 0){var Q=ha,Ae=t;switch(t){case"keypress":if(Wn(a)===0)break e;case"keydown":case"keyup":Q=ya;break;case"focusin":Ae="focus",Q=ma;break;case"focusout":Ae="blur",Q=ma;break;case"beforeblur":case"afterblur":Q=ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=ku;break;case cg:case hg:case fg:Q=pa;break;case dg:Q=Lu;break;case"scroll":case"scrollend":Q=Nu;break;case"wheel":Q=_a;break;case"copy":case"cut":case"paste":Q=ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=qo;break;case"toggle":case"beforetoggle":Q=ju}var _e=(i&4)!==0,Xe=!_e&&(t==="scroll"||t==="scrollend"),j=_e?K!==null?K+"Capture":null:K;_e=[];for(var M=G,H;M!==null;){var ee=M;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||j===null||(ee=ms(M,j),ee!=null&&_e.push(vl(M,ee,H))),Xe)break;M=M.return}0<_e.length&&(K=new Q(K,Ae,null,a,J),ne.push({event:K,listeners:_e}))}}if((i&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",K&&a!==Ni&&(Ae=a.relatedTarget||a.fromElement)&&(wi(Ae)||Ae[vn]))break e;if((Q||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Ae=a.relatedTarget||a.toElement,Q=G,Ae=Ae?wi(Ae):null,Ae!==null&&(Xe=u(Ae),_e=Ae.tag,Ae!==Xe||_e!==5&&_e!==27&&_e!==6)&&(Ae=null)):(Q=null,Ae=G),Q!==Ae)){if(_e=bn,ee="onMouseLeave",j="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(_e=qo,ee="onPointerLeave",j="onPointerEnter",M="pointer"),Xe=Q==null?K:Kn(Q),H=Ae==null?K:Kn(Ae),K=new _e(ee,M+"leave",Q,a,J),K.target=Xe,K.relatedTarget=H,ee=null,wi(J)===G&&(_e=new _e(j,M+"enter",Ae,a,J),_e.target=H,_e.relatedTarget=Xe,ee=_e),Xe=ee,Q&&Ae)t:{for(_e=Q,j=Ae,M=0,H=_e;H;H=Ha(H))M++;for(H=0,ee=j;ee;ee=Ha(ee))H++;for(;0<M-H;)_e=Ha(_e),M--;for(;0<H-M;)j=Ha(j),H--;for(;M--;){if(_e===j||j!==null&&_e===j.alternate)break t;_e=Ha(_e),j=Ha(j)}_e=null}else _e=null;Q!==null&&V_(ne,K,Q,_e,!1),Ae!==null&&Xe!==null&&V_(ne,Xe,Ae,_e,!0)}}e:{if(K=G?Kn(G):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var fe=Jp;else if(Rt(K))if(eg)fe=cb;else{fe=lb;var Ne=ob}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Po(G.elementType)&&(fe=Jp):fe=ub;if(fe&&(fe=fe(t,G))){Vi(ne,fe,a,J);break e}Ne&&Ne(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&cr(K,"number",K.value)}switch(Ne=G?Kn(G):window,t){case"focusin":(Rt(Ne)||Ne.contentEditable==="true")&&(va=Ne,yf=G,Go=null);break;case"focusout":Go=yf=va=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,lg(ne,a,J);break;case"selectionchange":if(fb)break;case"keydown":case"keyup":lg(ne,a,J)}var me;if(ei)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Pe?$(t,a)&&(ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(_&&a.locale!=="ko"&&(Pe||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Pe&&(me=Uo()):(Xn=J,hr="value"in Xn?Xn.value:Xn.textContent,Pe=!0)),Ne=Ic(G,ve),0<Ne.length&&(ve=new jo(ve,t,null,a,J),ne.push({event:ve,listeners:Ne}),me?ve.data=me:(me=oe(a),me!==null&&(ve.data=me)))),(me=g?wt(t,a):ke(t,a))&&(ve=Ic(G,"onBeforeInput"),0<ve.length&&(Ne=new jo("onBeforeInput","beforeinput",null,a,J),ne.push({event:Ne,listeners:ve}),Ne.data=me)),Qb(ne,t,G,a,J)}x_(ne,i)})}function vl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Ic(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ms(t,a),h!=null&&l.unshift(vl(t,h,d)),h=ms(t,i),h!=null&&l.push(vl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ha(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function V_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,C=T.alternate,G=T.stateNode;if(T=T.tag,C!==null&&C===l)break;T!==5&&T!==26&&T!==27||G===null||(C=G,h?(G=ms(a,d),G!=null&&v.unshift(vl(a,G,C))):h||(G=ms(a,d),G!=null&&v.push(vl(a,G,C)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var Zb=/\r\n?/g,Jb=/\u0000|\uFFFD/g;function P_(t){return(typeof t=="string"?t:""+t).replace(Zb,`
`).replace(Jb,"")}function k_(t,i){return i=P_(i),P_(t)===i}function Cc(){}function $e(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||En(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&En(t,""+l);break;case"className":Qn(t,"class",l);break;case"tabIndex":Qn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(t,a,l);break;case"style":Vo(t,l,d);break;case"data":if(i!=="object"){Qn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&$e(t,i,"name",h.name,h,null),$e(t,i,"formEncType",h.formEncType,h,null),$e(t,i,"formMethod",h.formMethod,h,null),$e(t,i,"formTarget",h.formTarget,h,null)):($e(t,i,"encType",h.encType,h,null),$e(t,i,"method",h.method,h,null),$e(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Cc);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),ur(t,"popover",l);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ur(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cf.get(a)||a,ur(t,a,l))}}function Bd(t,i,a,l,h,d){switch(a){case"style":Vo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?En(t,l):(typeof l=="number"||typeof l=="bigint")&&En(t,""+l);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[pt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ur(t,a,l)}}}function Bt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$e(t,i,d,v,a,null)}}h&&$e(t,i,"srcSet",a.srcSet,a,null),l&&$e(t,i,"src",a.src,a,null);return;case"input":Oe("invalid",t);var T=d=v=h=null,C=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":v=J;break;case"checked":C=J;break;case"defaultChecked":G=J;break;case"value":d=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:$e(t,i,l,J,a,null)}}hs(t,d,T,C,G,v,h,!1),ua(t);return;case"select":Oe("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:$e(t,i,h,T,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Ci(t,!!l,i,!1):a!=null&&Ci(t,!!l,a,!0);return;case"textarea":Oe("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:$e(t,i,v,T,a,null)}fs(t,l,h,d),ua(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:$e(t,i,C,l,a,null)}return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(l=0;l<_l.length;l++)Oe(_l[l],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$e(t,i,G,l,a,null)}return;default:if(Po(i)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&Bd(t,i,J,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&$e(t,i,T,l,a,null))}function eS(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,C=null,G=null,J=null;for(Q in a){var ne=a[Q];if(a.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":C=ne;default:l.hasOwnProperty(Q)||$e(t,i,Q,null,l,ne)}}for(var K in l){var Q=l[K];if(ne=a[K],l.hasOwnProperty(K)&&(Q!=null||ne!=null))switch(K){case"type":d=Q;break;case"name":h=Q;break;case"checked":G=Q;break;case"defaultChecked":J=Q;break;case"value":v=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Q!==ne&&$e(t,i,K,Q,l,ne)}}un(t,v,T,C,G,J,d,h);return;case"select":Q=v=T=K=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":Q=C;default:l.hasOwnProperty(d)||$e(t,i,d,null,l,C)}for(h in l)if(d=l[h],C=a[h],l.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":K=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==C&&$e(t,i,h,d,l,C)}i=T,a=v,l=Q,K!=null?Ci(t,!!a,K,!1):!!l!=!!a&&(i!=null?Ci(t,!!a,i,!0):Ci(t,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:$e(t,i,T,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":K=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&$e(t,i,v,h,l,d)}Ke(t,K,Q);return;case"option":for(var Ae in a)if(K=a[Ae],a.hasOwnProperty(Ae)&&K!=null&&!l.hasOwnProperty(Ae))switch(Ae){case"selected":t.selected=!1;break;default:$e(t,i,Ae,null,l,K)}for(C in l)if(K=l[C],Q=a[C],l.hasOwnProperty(C)&&K!==Q&&(K!=null||Q!=null))switch(C){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:$e(t,i,C,K,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)K=a[_e],a.hasOwnProperty(_e)&&K!=null&&!l.hasOwnProperty(_e)&&$e(t,i,_e,null,l,K);for(G in l)if(K=l[G],Q=a[G],l.hasOwnProperty(G)&&K!==Q&&(K!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:$e(t,i,G,K,l,Q)}return;default:if(Po(i)){for(var Xe in a)K=a[Xe],a.hasOwnProperty(Xe)&&K!==void 0&&!l.hasOwnProperty(Xe)&&Bd(t,i,Xe,void 0,l,K);for(J in l)K=l[J],Q=a[J],!l.hasOwnProperty(J)||K===Q||K===void 0&&Q===void 0||Bd(t,i,J,K,l,Q);return}}for(var j in a)K=a[j],a.hasOwnProperty(j)&&K!=null&&!l.hasOwnProperty(j)&&$e(t,i,j,null,l,K);for(ne in l)K=l[ne],Q=a[ne],!l.hasOwnProperty(ne)||K===Q||K==null&&Q==null||$e(t,i,ne,K,l,Q)}var qd=null,Hd=null;function Nc(t){return t.nodeType===9?t:t.ownerDocument}function U_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Fd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gd=null;function tS(){var t=window.event;return t&&t.type==="popstate"?t===Gd?!1:(Gd=t,!0):(Gd=null,!1)}var z_=typeof setTimeout=="function"?setTimeout:void 0,nS=typeof clearTimeout=="function"?clearTimeout:void 0,j_=typeof Promise=="function"?Promise:void 0,iS=typeof queueMicrotask=="function"?queueMicrotask:typeof j_<"u"?function(t){return j_.resolve(null).then(t).catch(rS)}:z_;function rS(t){setTimeout(function(){throw t})}function Ir(t){return t==="head"}function B_(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&El(v.documentElement),a&2&&El(v.body),a&4)for(a=v.head,El(a),v=a.firstChild;v;){var T=v.nextSibling,C=v.nodeName;v[os]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){t.removeChild(d),Cl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Cl(i)}function Yd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Yd(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function sS(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[os])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Ln(t.nextSibling),t===null)break}return null}function aS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ln(t.nextSibling),t===null))return null;return t}function Kd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function oS(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ln(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Qd=null;function q_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function H_(t,i,a){switch(i=Nc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function El(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);lr(t)}var Dn=new Map,F_=new Set;function Dc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ki=le.d;le.d={f:lS,r:uS,D:cS,C:hS,L:fS,m:dS,X:pS,S:mS,M:gS};function lS(){var t=Ki.f(),i=Tc();return t||i}function uS(t){var i=Yn(t);i!==null&&i.tag===5&&i.type==="form"?cy(i):Ki.r(t)}var Fa=typeof document>"u"?null:document;function G_(t,i,a){var l=Fa;if(l&&typeof i=="string"&&i){var h=gt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),F_.has(h)||(F_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Bt(i,"link",t),ht(i),l.head.appendChild(i)))}}function cS(t){Ki.D(t),G_("dns-prefetch",t,null)}function hS(t,i){Ki.C(t,i),G_("preconnect",t,i)}function fS(t,i,a){Ki.L(t,i,a);var l=Fa;if(l&&t&&i){var h='link[rel="preload"][as="'+gt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+gt(a.imageSizes)+'"]')):h+='[href="'+gt(t)+'"]';var d=h;switch(i){case"style":d=Ga(t);break;case"script":d=Ya(t)}Dn.has(d)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Dn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Tl(d))||i==="script"&&l.querySelector(Al(d))||(i=l.createElement("link"),Bt(i,"link",t),ht(i),l.head.appendChild(i)))}}function dS(t,i){Ki.m(t,i);var a=Fa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+gt(l)+'"][href="'+gt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ya(t)}if(!Dn.has(d)&&(t=E({rel:"modulepreload",href:t},i),Dn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Al(d)))return}l=a.createElement("link"),Bt(l,"link",t),ht(l),a.head.appendChild(l)}}}function mS(t,i,a){Ki.S(t,i,a);var l=Fa;if(l&&t){var h=Jt(l).hoistableStyles,d=Ga(t);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(Tl(d)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Dn.get(d))&&$d(t,a);var C=v=l.createElement("link");ht(C),Bt(C,"link",t),C._p=new Promise(function(G,J){C.onload=G,C.onerror=J}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Oc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function pS(t,i){Ki.X(t,i);var a=Fa;if(a&&t){var l=Jt(a).hoistableScripts,h=Ya(t),d=l.get(h);d||(d=a.querySelector(Al(h)),d||(t=E({src:t,async:!0},i),(i=Dn.get(h))&&Xd(t,i),d=a.createElement("script"),ht(d),Bt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function gS(t,i){Ki.M(t,i);var a=Fa;if(a&&t){var l=Jt(a).hoistableScripts,h=Ya(t),d=l.get(h);d||(d=a.querySelector(Al(h)),d||(t=E({src:t,async:!0,type:"module"},i),(i=Dn.get(h))&&Xd(t,i),d=a.createElement("script"),ht(d),Bt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Y_(t,i,a,l){var h=(h=be.current)?Dc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ga(a.href),a=Jt(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ga(a.href);var d=Jt(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Tl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Dn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dn.set(t,a),d||yS(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ya(a),a=Jt(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ga(t){return'href="'+gt(t)+'"'}function Tl(t){return'link[rel="stylesheet"]['+t+"]"}function K_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function yS(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Bt(i,"link",a),ht(i),t.head.appendChild(i))}function Ya(t){return'[src="'+gt(t)+'"]'}function Al(t){return"script[async]"+t}function Q_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+gt(a.href)+'"]');if(l)return i.instance=l,ht(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ht(l),Bt(l,"style",h),Oc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Ga(a.href);var d=t.querySelector(Tl(h));if(d)return i.state.loading|=4,i.instance=d,ht(d),d;l=K_(a),(h=Dn.get(h))&&$d(l,h),d=(t.ownerDocument||t).createElement("link"),ht(d);var v=d;return v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),Bt(d,"link",l),i.state.loading|=4,Oc(d,a.precedence,t),i.instance=d;case"script":return d=Ya(a.src),(h=t.querySelector(Al(d)))?(i.instance=h,ht(h),h):(l=a,(h=Dn.get(d))&&(l=E({},a),Xd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ht(h),Bt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Oc(l,a.precedence,t));return i.instance}function Oc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function $d(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Xd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var xc=null;function $_(t,i,a){if(xc===null){var l=new Map,h=xc=new Map;h.set(a,l)}else h=xc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[os]||d[St]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function X_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function _S(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function W_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var bl=null;function vS(){}function ES(t,i,a){if(bl===null)throw Error(s(475));var l=bl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ga(a.href),d=t.querySelector(Tl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Mc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,ht(d);return}d=t.ownerDocument||t,a=K_(a),(h=Dn.get(h))&&$d(a,h),d=d.createElement("link"),ht(d);var v=d;v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),Bt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Mc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function TS(){if(bl===null)throw Error(s(475));var t=bl;return t.stylesheets&&t.count===0&&Wd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Wd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Mc(){if(this.count--,this.count===0){if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Vc=null;function Wd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Vc=new Map,i.forEach(AS,t),Vc=null,Mc.call(t))}function AS(t,i){if(!(i.state.loading&4)){var a=Vc.get(t);if(a)var l=a.get(null);else{a=new Map,Vc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Mc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Sl={$$typeof:se,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function bS(t,i,a,l,h,d,v,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Z_(t,i,a,l,h,d,v,T,C,G,J,ne){return t=new bS(t,i,a,v,T,C,G,ne),i=1,d===!0&&(i|=24),d=hn(3,null,null,i),t.current=d,d.stateNode=t,i=xf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},kf(d),t}function J_(t){return t?(t=ba,t):ba}function ev(t,i,a,l,h,d){h=J_(h),l.context===null?l.context=h:l.pendingContext=h,l=mr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=pr(t,l,i),a!==null&&(gn(a,t,i),el(a,t,i))}function tv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Zd(t,i){tv(t,i),(t=t.alternate)&&tv(t,i)}function nv(t){if(t.tag===13){var i=Aa(t,67108864);i!==null&&gn(i,t,67108864),Zd(t,67108864)}}var Pc=!0;function SS(t,i,a,l){var h=Z.T;Z.T=null;var d=le.p;try{le.p=2,Jd(t,i,a,l)}finally{le.p=d,Z.T=h}}function wS(t,i,a,l){var h=Z.T;Z.T=null;var d=le.p;try{le.p=8,Jd(t,i,a,l)}finally{le.p=d,Z.T=h}}function Jd(t,i,a,l){if(Pc){var h=em(l);if(h===null)jd(t,i,l,kc,a),rv(t,l);else if(IS(h,t,i,a,l))l.stopPropagation();else if(rv(t,l),i&4&&-1<RS.indexOf(t)){for(;h!==null;){var d=Yn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Mn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var C=1<<31-Yt(v);T.entanglements[1]|=C,v&=~C}ai(d),(Ge&6)===0&&(vc=_n()+500,yl(0))}}break;case 13:T=Aa(d,2),T!==null&&gn(T,d,2),Tc(),Zd(d,2)}if(d=em(l),d===null&&jd(t,i,l,kc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else jd(t,i,l,null,a)}}function em(t){return t=Tn(t),tm(t)}var kc=null;function tm(t){if(kc=null,t=wi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return kc=t,null}function iv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rf()){case Ao:return 2;case ta:return 8;case ns:case sf:return 32;case na:return 268435456;default:return 32}default:return 32}}var nm=!1,Cr=null,Nr=null,Dr=null,wl=new Map,Rl=new Map,Or=[],RS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rv(t,i){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(i.pointerId)}}function Il(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Yn(i),i!==null&&nv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function IS(t,i,a,l,h){switch(i){case"focusin":return Cr=Il(Cr,t,i,a,l,h),!0;case"dragenter":return Nr=Il(Nr,t,i,a,l,h),!0;case"mouseover":return Dr=Il(Dr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return wl.set(d,Il(wl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Rl.set(d,Il(Rl.get(d)||null,t,i,a,l,h)),!0}return!1}function sv(t){var i=wi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Tu(t.priority,function(){if(a.tag===13){var l=pn();l=sr(l);var h=Aa(a,l);h!==null&&gn(h,a,l),Zd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=em(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ni=l,a.target.dispatchEvent(l),Ni=null}else return i=Yn(a),i!==null&&nv(i),t.blockedOn=a,!1;i.shift()}return!0}function av(t,i,a){Uc(t)&&a.delete(i)}function CS(){nm=!1,Cr!==null&&Uc(Cr)&&(Cr=null),Nr!==null&&Uc(Nr)&&(Nr=null),Dr!==null&&Uc(Dr)&&(Dr=null),wl.forEach(av),Rl.forEach(av)}function Lc(t,i){t.blockedOn===i&&(t.blockedOn=null,nm||(nm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,CS)))}var zc=null;function ov(t){zc!==t&&(zc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){zc===t&&(zc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(tm(l||a)===null)continue;break}var d=Yn(a);d!==null&&(t.splice(i,3),i-=3,td(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Cl(t){function i(C){return Lc(C,t)}Cr!==null&&Lc(Cr,t),Nr!==null&&Lc(Nr,t),Dr!==null&&Lc(Dr,t),wl.forEach(i),Rl.forEach(i);for(var a=0;a<Or.length;a++){var l=Or[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Or.length&&(a=Or[0],a.blockedOn===null);)sv(a),a.blockedOn===null&&Or.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[pt]||null;if(typeof d=="function")v||ov(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[pt]||null)T=v.formAction;else if(tm(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),ov(a)}}}function im(t){this._internalRoot=t}jc.prototype.render=im.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=pn();ev(a,l,t,i,null,null)},jc.prototype.unmount=im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;ev(t.current,2,null,t,null,null),Tc(),i[vn]=null}};function jc(t){this._internalRoot=t}jc.prototype.unstable_scheduleHydration=function(t){if(t){var i=ar();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Or.length&&i!==0&&i<Or[a].priority;a++);Or.splice(a,0,t),a===0&&sv(t)}};var lv=e.version;if(lv!=="19.1.1")throw Error(s(527,lv,"19.1.1"));le.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var NS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{lt=Bc.inject(NS),Fe=Bc}catch{}}return Dl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Sy,d=wy,v=Ry,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=Z_(t,1,!1,null,null,a,l,h,d,v,T,null),t[vn]=i.current,zd(t),new im(i)},Dl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Sy,v=wy,T=Ry,C=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),i=Z_(t,1,!0,i,a??null,l,h,d,v,T,C,G),i.context=J_(null),a=i.current,l=pn(),l=sr(l),h=mr(l),h.callback=null,pr(a,h,l),a=l,i.current.lanes=a,Si(i,a),ai(i),t[vn]=i.current,zd(t),new jc(i)},Dl.version="19.1.1",Dl}var _v;function zS(){if(_v)return sm.exports;_v=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sm.exports=LS(),sm.exports}var jS=zS();const BS=lT(jS),qS=()=>{};var vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},HS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},cT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let w=(m&15)<<2|y>>6,D=y&63;p||(D=64,f||(w=64)),s.push(n[E],n[b],n[w],n[D])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(uT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):HS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const b=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||y==null||b==null)throw new FS;const w=u<<2|m>>4;if(s.push(w),y!==64){const D=m<<4&240|y>>2;if(s.push(D),b!==64){const k=y<<6&192|b;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class FS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GS=function(r){const e=uT(r);return cT.encodeByteArray(e,!0)},hh=function(r){return GS(r).replace(/\./g,"")},hT=function(r){try{return cT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=()=>YS().__FIREBASE_DEFAULTS__,QS=()=>{if(typeof process>"u"||typeof vv>"u")return;const r=vv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},$S=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&hT(r[1]);return e&&JSON.parse(e)},Vh=()=>{try{return qS()||KS()||QS()||$S()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},fT=r=>Vh()?.emulatorHosts?.[r],dT=r=>{const e=fT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},mT=()=>Vh()?.config,pT=r=>Vh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ep(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[hh(JSON.stringify(n)),hh(JSON.stringify(f)),""].join(".")}const Ll={};function WS(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ll))Ll[e]?r.emulator.push(e):r.prod.push(e);return r}function ZS(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Ev=!1;function tp(r,e){if(typeof window>"u"||typeof document>"u"||!Ys(window.location.host)||Ll[r]===e||Ll[r]||Ev)return;Ll[r]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",u=WS().prod.length>0;function f(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,D){w.setAttribute("width","24"),w.setAttribute("id",D),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Ev=!0,f()},w}function E(w,D){w.setAttribute("id",D),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=ZS(s),D=n("text"),k=document.getElementById(D)||document.createElement("span"),F=n("learnmore"),U=document.getElementById(F)||document.createElement("a"),B=n("preprendIcon"),W=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const se=w.element;m(se),E(U,F);const I=y();p(W,B),se.append(W,k,U,I),document.body.appendChild(se)}u?(k.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function ew(){const r=Vh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function iw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rw(){const r=Zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function sw(){return!ew()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aw(){try{return typeof indexedDB=="object"}catch{return!1}}function ow(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="FirebaseError";class _i extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=lw,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ru.prototype.create)}}class ru{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?uw(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new _i(o,m,s)}}function uw(r,e){return r.replace(cw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const cw=/\{\$([^}]+)}/g;function hw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function js(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(Tv(u)&&Tv(f)){if(!js(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Tv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function xl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Ml(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function fw(r,e){const n=new dw(r,e);return n.subscribe.bind(n)}class dw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");mw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=cm),o.error===void 0&&(o.error=cm),o.complete===void 0&&(o.complete=cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r){return r&&r._delegate?r._delegate:r}class Fr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new XS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yw(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gw(r){return r===ks?void 0:r}function yw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(xe||(xe={}));const vw={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Ew=xe.INFO,Tw={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},Aw=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Tw[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class np{constructor(e){this.name=e,this._logLevel=Ew,this._logHandler=Aw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const bw=(r,e)=>e.some(n=>r instanceof n);let Av,bv;function Sw(){return Av||(Av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ww(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yT=new WeakMap,wm=new WeakMap,_T=new WeakMap,hm=new WeakMap,ip=new WeakMap;function Rw(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(zr(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&yT.set(n,r)}).catch(()=>{}),ip.set(e,r),e}function Iw(r){if(wm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});wm.set(r,e)}let Rm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return wm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||_T.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Cw(r){Rm=r(Rm)}function Nw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(fm(this),e,...n);return _T.set(s,e.sort?e.sort():[e]),zr(s)}:ww().includes(r)?function(...e){return r.apply(fm(this),e),zr(yT.get(this))}:function(...e){return zr(r.apply(fm(this),e))}}function Dw(r){return typeof r=="function"?Nw(r):(r instanceof IDBTransaction&&Iw(r),bw(r,Sw())?new Proxy(r,Rm):r)}function zr(r){if(r instanceof IDBRequest)return Rw(r);if(hm.has(r))return hm.get(r);const e=Dw(r);return e!==r&&(hm.set(r,e),ip.set(e,r)),e}const fm=r=>ip.get(r);function Ow(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),m=zr(f);return s&&f.addEventListener("upgradeneeded",p=>{s(zr(f.result),p.oldVersion,p.newVersion,zr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const xw=["get","getKey","getAll","getAllKeys","count"],Mw=["put","add","delete","clear"],dm=new Map;function Sv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Mw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||xw.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return dm.set(e,u),u}Cw(r=>({...r,get:(e,n,s)=>Sv(e,n)||r.get(e,n,s),has:(e,n)=>!!Sv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Pw(r){return r.getComponent()?.type==="VERSION"}const Im="@firebase/app",wv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new np("@firebase/app"),kw="@firebase/app-compat",Uw="@firebase/analytics-compat",Lw="@firebase/analytics",zw="@firebase/app-check-compat",jw="@firebase/app-check",Bw="@firebase/auth",qw="@firebase/auth-compat",Hw="@firebase/database",Fw="@firebase/data-connect",Gw="@firebase/database-compat",Yw="@firebase/functions",Kw="@firebase/functions-compat",Qw="@firebase/installations",$w="@firebase/installations-compat",Xw="@firebase/messaging",Ww="@firebase/messaging-compat",Zw="@firebase/performance",Jw="@firebase/performance-compat",eR="@firebase/remote-config",tR="@firebase/remote-config-compat",nR="@firebase/storage",iR="@firebase/storage-compat",rR="@firebase/firestore",sR="@firebase/ai",aR="@firebase/firestore-compat",oR="firebase",lR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="[DEFAULT]",uR={[Im]:"fire-core",[kw]:"fire-core-compat",[Lw]:"fire-analytics",[Uw]:"fire-analytics-compat",[jw]:"fire-app-check",[zw]:"fire-app-check-compat",[Bw]:"fire-auth",[qw]:"fire-auth-compat",[Hw]:"fire-rtdb",[Fw]:"fire-data-connect",[Gw]:"fire-rtdb-compat",[Yw]:"fire-fn",[Kw]:"fire-fn-compat",[Qw]:"fire-iid",[$w]:"fire-iid-compat",[Xw]:"fire-fcm",[Ww]:"fire-fcm-compat",[Zw]:"fire-perf",[Jw]:"fire-perf-compat",[eR]:"fire-rc",[tR]:"fire-rc-compat",[nR]:"fire-gcs",[iR]:"fire-gcs-compat",[rR]:"fire-fst",[aR]:"fire-fst-compat",[sR]:"fire-vertex","fire-js":"fire-js",[oR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map,cR=new Map,Nm=new Map;function Rv(r,e){try{r.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Bs(r){const e=r.name;if(Nm.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,r);for(const n of fh.values())Rv(n,r);for(const n of cR.values())Rv(n,r);return!0}function Ph(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function yn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new ru("app","Firebase",hR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=lR;function vT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Cm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw jr.create("bad-app-name",{appName:String(o)});if(n||(n=mT()),!n)throw jr.create("no-options");const u=fh.get(o);if(u){if(js(n,u.options)&&js(s,u.config))return u;throw jr.create("duplicate-app",{appName:o})}const f=new _w(o);for(const p of Nm.values())f.addComponent(p);const m=new fR(n,s,f);return fh.set(o,m),m}function rp(r=Cm){const e=fh.get(r);if(!e&&r===Cm&&mT())return vT();if(!e)throw jr.create("no-app",{appName:r});return e}function li(r,e,n){let s=uR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(f.join(" "));return}Bs(new Fr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebase-heartbeat-database",mR=1,Fl="firebase-heartbeat-store";let mm=null;function ET(){return mm||(mm=Ow(dR,mR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Fl)}catch(n){console.warn(n)}}}}).catch(r=>{throw jr.create("idb-open",{originalErrorMessage:r.message})})),mm}async function pR(r){try{const n=(await ET()).transaction(Fl),s=await n.objectStore(Fl).get(TT(r));return await n.done,s}catch(e){if(e instanceof _i)Ji.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e?.message});Ji.warn(n.message)}}}async function Iv(r,e){try{const s=(await ET()).transaction(Fl,"readwrite");await s.objectStore(Fl).put(e,TT(r)),await s.done}catch(n){if(n instanceof _i)Ji.warn(n.message);else{const s=jr.create("idb-set",{originalErrorMessage:n?.message});Ji.warn(s.message)}}}function TT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=1024,yR=30;class _R{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ER(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Cv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>yR){const o=TR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ji.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Cv(),{heartbeatsToSend:n,unsentEntries:s}=vR(this._heartbeatsCache.heartbeats),o=hh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ji.warn(e),""}}}function Cv(){return new Date().toISOString().substring(0,10)}function vR(r,e=gR){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Nv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Nv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ER{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aw()?ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Nv(r){return hh(JSON.stringify({version:2,heartbeats:r})).length}function TR(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(r){Bs(new Fr("platform-logger",e=>new Vw(e),"PRIVATE")),Bs(new Fr("heartbeat",e=>new _R(e),"PRIVATE")),li(Im,wv,r),li(Im,wv,"esm2020"),li("fire-js","")}AR("");function AT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bR=AT,bT=new ru("auth","Firebase",AT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new np("@firebase/auth");function SR(r,...e){dh.logLevel<=xe.WARN&&dh.warn(`Auth (${Ks}): ${r}`,...e)}function Wc(r,...e){dh.logLevel<=xe.ERROR&&dh.error(`Auth (${Ks}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(r,...e){throw sp(r,...e)}function ui(r,...e){return sp(r,...e)}function ST(r,e,n){const s={...bR(),[e]:n};return new ru("auth","Firebase",s).create(e,{appName:r.name})}function Xi(r){return ST(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return bT.create(r,...e)}function Ee(r,e,...n){if(!r)throw sp(e,...n)}function Qi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Wc(e),new Error(e)}function er(r,e){r||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){return typeof self<"u"&&self.location?.href||""}function wR(){return Dv()==="http:"||Dv()==="https:"}function Dv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wR()||nw()||"connection"in navigator)?navigator.onLine:!0}function IR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=JS()||iw()}get(){return RR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(r,e){er(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DR=new au(3e4,6e4);function Wr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Zr(r,e,n,s,o={}){return RT(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=su({key:r.config.apiKey,...f}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...u};return tw()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Ys(r.emulatorConfig.host)&&(y.credentials="include"),wT.fetch()(await IT(r,r.config.apiHost,n,m),y)})}async function RT(r,e,n){r._canInitEmulator=!1;const s={...CR,...e};try{const o=new xR(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw qc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw qc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw qc(r,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ST(r,E,y);qn(r,E)}}catch(o){if(o instanceof _i)throw o;qn(r,"network-request-failed",{message:String(o)})}}async function ou(r,e,n,s,o={}){const u=await Zr(r,e,n,s,o);return"mfaPendingCredential"in u&&qn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function IT(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?ap(r.config,o):`${r.config.apiScheme}://${o}`;return NR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function OR(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ui(this.auth,"network-request-failed")),DR.get())})}}function qc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ui(r,e,s);return o.customData._tokenResponse=n,o}function Ov(r){return r!==void 0&&r.enterprise!==void 0}class MR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return OR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VR(r,e){return Zr(r,"GET","/v2/recaptchaConfig",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(r,e){return Zr(r,"POST","/v1/accounts:delete",e)}async function mh(r,e){return Zr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kR(r,e=!1){const n=Ft(r),s=await n.getIdToken(e),o=op(s);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:zl(pm(o.auth_time)),issuedAtTime:zl(pm(o.iat)),expirationTime:zl(pm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function pm(r){return Number(r)*1e3}function op(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const o=hT(n);return o?JSON.parse(o):(Wc("Failed to decode base64 JWT payload"),null)}catch(o){return Wc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function xv(r){const e=op(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof _i&&UR(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function UR({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(r){const e=r.auth,n=await r.getIdToken(),s=await Gl(r,mh(e,{idToken:n}));Ee(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?CT(o.providerUserInfo):[],f=jR(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!f?.length,y=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Om(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,E)}async function zR(r){const e=Ft(r);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jR(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function CT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(r,e){const n=await RT(r,{},async()=>{const s=su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await IT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Ys(r.emulatorConfig.host)&&(p.credentials="include"),wT.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qR(r,e){return Zr(r,"POST","/v2/accounts:revokeToken",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=xv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await BR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new Ja;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ja,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class zn{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new LR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Om(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Gl(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kR(this,e)}reload(){return zR(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Xi(this.auth));const e=await this.getIdToken();return await Gl(this,PR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:D,providerData:k,stsTokenManager:F}=n;Ee(b&&F,e,"internal-error");const U=Ja.fromJSON(this.name,F);Ee(typeof b=="string",e,"internal-error"),Mr(s,e.name),Mr(o,e.name),Ee(typeof w=="boolean",e,"internal-error"),Ee(typeof D=="boolean",e,"internal-error"),Mr(u,e.name),Mr(f,e.name),Mr(m,e.name),Mr(p,e.name),Mr(y,e.name),Mr(E,e.name);const B=new zn({uid:b,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:D,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:U,createdAt:y,lastLoginAt:E});return k&&Array.isArray(k)&&(B.providerData=k.map(W=>({...W}))),p&&(B._redirectEventId=p),B}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ja;o.updateFromServerResponse(n);const u=new zn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ph(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?CT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new Ja;m.updateFromIdToken(s);const p=new zn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Om(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=new Map;function $i(r){er(r instanceof Function,"Expected a class definition");let e=Mv.get(r);return e?(er(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Mv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NT.type="NONE";const Vv=NT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(r,e,n){return`firebase:${r}:${e}:${n}`}class eo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Zc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Zc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await mh(this.auth,{idToken:e}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,e):null}return zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new eo($i(Vv),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||$i(Vv);const f=Zc(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const E=await y._get(f);if(E){let b;if(typeof E=="string"){const w=await mh(e,{idToken:E}).catch(()=>{});if(!w)break;b=await zn._fromGetAccountInfoResponse(e,w,E)}else b=zn._fromJSON(e,E);y!==u&&(m=b),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new eo(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new eo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PT(e))return"Blackberry";if(kT(e))return"Webos";if(OT(e))return"Safari";if((e.includes("chrome/")||xT(e))&&!e.includes("edge/"))return"Chrome";if(VT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function DT(r=Zt()){return/firefox\//i.test(r)}function OT(r=Zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xT(r=Zt()){return/crios\//i.test(r)}function MT(r=Zt()){return/iemobile/i.test(r)}function VT(r=Zt()){return/android/i.test(r)}function PT(r=Zt()){return/blackberry/i.test(r)}function kT(r=Zt()){return/webos/i.test(r)}function lp(r=Zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function HR(r=Zt()){return lp(r)&&!!window.navigator?.standalone}function FR(){return rw()&&document.documentMode===10}function UT(r=Zt()){return lp(r)||VT(r)||kT(r)||PT(r)||/windows phone/i.test(r)||MT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(r,e=[]){let n;switch(r){case"Browser":n=Pv(Zt());break;case"Worker":n=`${Pv(Zt())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ks}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(r,e={}){return Zr(r,"GET","/v2/passwordPolicy",Wr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=6;class QR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??KR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kv(this),this.idTokenSubscription=new kv(this),this.beforeStateQueue=new GR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$i(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mh(this,{idToken:e}),s=await zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Xi(this));const n=e?Ft(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YR(this),n=new QR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ru("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await qR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$i(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[$i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qs(r){return Ft(r)}class kv{constructor(e){this.auth=e,this.observer=null,this.addObserver=fw(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XR(r){kh=r}function zT(r){return kh.loadJS(r)}function WR(){return kh.recaptchaEnterpriseScript}function ZR(){return kh.gapiScript}function JR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class e1{constructor(){this.enterprise=new t1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class t1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const n1="recaptcha-enterprise",jT="NO_RECAPTCHA";class i1{constructor(e){this.type=n1,this.auth=Qs(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{VR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new MR(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;Ov(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(jT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e1().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&Ov(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=WR();p.length!==0&&(p+=m),zT(p).then(()=>{o(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function Uv(r,e,n,s=!1,o=!1){const u=new i1(r);let f;if(o)f=jT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function xm(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Uv(r,e,n,n==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Uv(r,e,n,n==="getOobCode");return s(r,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(r,e){const n=Ph(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(js(u,e??{}))return o;qn(o,"already-initialized")}return n.initialize({options:e})}function s1(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map($i);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function a1(r,e,n){const s=Qs(r);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=BT(e),{host:f,port:m}=o1(e),p=m===null?"":`:${m}`,y={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(js(y,s.config.emulator)&&js(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Ys(f)?(ep(`${u}//${f}${p}`),tp("Auth",!0)):l1()}function BT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function o1(r){const e=BT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Lv(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Lv(f)}}}function Lv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function l1(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function u1(r,e){return Zr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(r,e){return ou(r,"POST","/v1/accounts:signInWithPassword",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(r,e){return ou(r,"POST","/v1/accounts:signInWithEmailLink",Wr(r,e))}async function f1(r,e){return ou(r,"POST","/v1/accounts:signInWithEmailLink",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends up{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Yl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Yl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xm(e,n,"signInWithPassword",c1);case"emailLink":return h1(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xm(e,s,"signUpPassword",u1);case"emailLink":return f1(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(r,e){return ou(r,"POST","/v1/accounts:signInWithIdp",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="http://localhost";class qs extends up{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new qs(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return to(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,to(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,to(e,n)}buildRequest(){const e={requestUri:d1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=su(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function p1(r){const e=xl(Ml(r)).link,n=e?xl(Ml(e)).deep_link_id:null,s=xl(Ml(r)).deep_link_id;return(s?xl(Ml(s)).link:null)||s||n||e||r}class cp{constructor(e){const n=xl(Ml(e)),s=n.apiKey??null,o=n.oobCode??null,u=m1(n.mode??null);Ee(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=p1(e);try{return new cp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,n){return Yl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=cp.parseLink(n);return Ee(s,"argument-error"),Yl._fromEmailAndCode(e,s.code,s.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends qT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends lu{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Pr.credential(n,s)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends lu{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends lu{constructor(){super("twitter.com")}static credential(e,n){return qs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ur.credential(n,s)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(r,e){return ou(r,"POST","/v1/accounts:signUp",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await zn._fromIdTokenResponse(e,s,o),f=zv(s);return new Hs({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=zv(s);return new Hs({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function zv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends _i{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new gh(e,n,s,o)}}function HT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(r,u,e,s):u})}async function y1(r,e,n=!1){const s=await Gl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Hs._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(r,e,n=!1){const{auth:s}=r;if(yn(s.app))return Promise.reject(Xi(s));const o="reauthenticate";try{const u=await Gl(r,HT(s,o,e,r),n);Ee(u.idToken,s,"internal-error");const f=op(u.idToken);Ee(f,s,"internal-error");const{sub:m}=f;return Ee(r.uid===m,s,"user-mismatch"),Hs._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&qn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(r,e,n=!1){if(yn(r.app))return Promise.reject(Xi(r));const s="signIn",o=await HT(r,s,e),u=await Hs._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function v1(r,e){return FT(Qs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(r){const e=Qs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function E1(r,e,n){if(yn(r.app))return Promise.reject(Xi(r));const s=Qs(r),f=await xm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&GT(r),p}),m=await Hs._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function T1(r,e,n){return yn(r.app)?Promise.reject(Xi(r)):v1(Ft(r),ho.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&GT(r),s})}function A1(r,e,n,s){return Ft(r).onIdTokenChanged(e,n,s)}function b1(r,e,n){return Ft(r).beforeAuthStateChanged(e,n)}function S1(r,e,n,s){return Ft(r).onAuthStateChanged(e,n,s)}function w1(r){return Ft(r).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=1e3,I1=10;class KT extends YT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);FR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,I1):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},R1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KT.type="LOCAL";const C1=KT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT extends YT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QT.type="SESSION";const $T=QT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Uh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),p=await N1(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const y=hp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(b){const w=b;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function O1(r){ci().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function x1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M1(){return navigator?.serviceWorker?.controller||null}function V1(){return XT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebaseLocalStorageDb",P1=1,_h="firebaseLocalStorage",ZT="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lh(r,e){return r.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function k1(){const r=indexedDB.deleteDatabase(WT);return new uu(r).toPromise()}function Mm(){const r=indexedDB.open(WT,P1);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(_h,{keyPath:ZT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(_h)?e(s):(s.close(),await k1(),e(await Mm()))})})}async function jv(r,e,n){const s=Lh(r,!0).put({[ZT]:e,value:n});return new uu(s).toPromise()}async function U1(r,e){const n=Lh(r,!1).get(e),s=await new uu(n).toPromise();return s===void 0?null:s.value}function Bv(r,e){const n=Lh(r,!0).delete(e);return new uu(n).toPromise()}const L1=800,z1=3;class JT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>z1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(V1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await x1(),!this.activeServiceWorker)return;this.sender=new D1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await jv(e,yh,"1"),await Bv(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>jv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>U1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Lh(o,!1).getAll();return new uu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JT.type="LOCAL";const j1=JT;new au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(r,e){return e?$i(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp extends up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,n){return to(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function q1(r){return FT(r.auth,new fp(r),r.bypassAuthState)}function H1(r){const{auth:e,user:n}=r;return Ee(n,e,"internal-error"),_1(n,new fp(r),r.bypassAuthState)}async function F1(r){const{auth:e,user:n}=r;return Ee(n,e,"internal-error"),y1(n,new fp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q1;case"linkViaPopup":case"linkViaRedirect":return F1;case"reauthViaPopup":case"reauthViaRedirect":return H1;default:qn(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new au(2e3,1e4);class Za extends e0{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G1.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="pendingRedirect",Jc=new Map;class K1 extends e0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{const s=await Q1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Jc.set(this.auth._key(),e)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q1(r,e){const n=W1(e),s=X1(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function $1(r,e){Jc.set(r._key(),e)}function X1(r){return $i(r._redirectPersistence)}function W1(r){return Zc(Y1,r.config.apiKey,r.name)}async function Z1(r,e,n=!1){if(yn(r.app))return Promise.reject(Xi(r));const s=Qs(r),o=B1(s,e),f=await new K1(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=600*1e3;class eI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!t0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ui(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J1&&this.cachedEventUids.clear(),this.cachedEventUids.has(qv(e))}saveEventToCache(e){this.cachedEventUids.add(qv(e)),this.lastProcessedEventTime=Date.now()}}function qv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function t0({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function tI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(r,e={}){return Zr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rI=/^https?/;async function sI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await nI(r);for(const n of e)try{if(aI(n))return}catch{}qn(r,"unauthorized-domain")}function aI(r){const e=Dm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!rI.test(n))return!1;if(iI.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new au(3e4,6e4);function Hv(){const r=ci().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function lI(r){return new Promise((e,n)=>{function s(){Hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hv(),n(ui(r,"network-request-failed"))},timeout:oI.get()})}if(ci().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ci().gapi?.load)s();else{const o=JR("iframefcb");return ci()[o]=()=>{gapi.load?s():n(ui(r,"network-request-failed"))},zT(`${ZR()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw eh=null,e})}let eh=null;function uI(r){return eh=eh||lI(r),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new au(5e3,15e3),hI="__/auth/iframe",fI="emulator/auth/iframe",dI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pI(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?ap(e,fI):`https://${r.config.authDomain}/${hI}`,s={apiKey:e.apiKey,appName:r.name,v:Ks},o=mI.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${su(s).slice(1)}`}async function gI(r){const e=await uI(r),n=ci().gapi;return Ee(n,r,"internal-error"),e.open({where:document.body,url:pI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=ui(r,"network-request-failed"),m=ci().setTimeout(()=>{u(f)},cI.get());function p(){ci().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_I=500,vI=600,EI="_blank",TI="http://localhost";class Fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AI(r,e,n,s=_I,o=vI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...yI,width:s.toString(),height:o.toString(),top:u,left:f},y=Zt().toLowerCase();n&&(m=xT(y)?EI:n),DT(y)&&(e=e||TI,p.scrollbars="yes");const E=Object.entries(p).reduce((w,[D,k])=>`${w}${D}=${k},`,"");if(HR(y)&&m!=="_self")return bI(e||"",m),new Fv(null);const b=window.open(e||"",m,E);Ee(b,r,"popup-blocked");try{b.focus()}catch{}return new Fv(b)}function bI(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="__/auth/handler",wI="emulator/auth/handler",RI=encodeURIComponent("fac");async function Gv(r,e,n,s,o,u){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Ks,eventId:o};if(e instanceof qT){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",hw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries({}))f[E]=b}if(e instanceof lu){const E=e.getScopes().filter(b=>b!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),y=p?`#${RI}=${encodeURIComponent(p)}`:"";return`${II(r)}?${su(m).slice(1)}${y}`}function II({config:r}){return r.emulator?ap(r,wI):`https://${r.authDomain}/${SI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="webStorageSupport";class CI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$T,this._completeRedirectFn=Z1,this._overrideRedirectResult=$1}async _openPopup(e,n,s,o){er(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Gv(e,n,s,Dm(),o);return AI(e,u,hp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Gv(e,n,s,Dm(),o);return O1(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(er(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gI(e),s=new eI(e);return n.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gm,{type:gm},o=>{const u=o?.[0]?.[gm];u!==void 0&&n(!!u),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UT()||OT()||lp()}}const NI=CI;var Yv="@firebase/auth",Kv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xI(r){Bs(new Fr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Ee(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LT(r)},y=new $R(s,o,u,p);return s1(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Bs(new Fr("auth-internal",e=>{const n=Qs(e.getProvider("auth").getImmediate());return(s=>new DI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(Yv,Kv,OI(r)),li(Yv,Kv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=300,VI=pT("authIdTokenMaxAge")||MI;let Qv=null;const PI=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>VI)return;const o=n?.token;Qv!==o&&(Qv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function kI(r=rp()){const e=Ph(r,"auth");if(e.isInitialized())return e.getImmediate();const n=r1(r,{popupRedirectResolver:NI,persistence:[j1,C1,$T]}),s=pT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=PI(u.toString());b1(n,f,()=>f(n.currentUser)),A1(n,m=>f(m))}}const o=fT("auth");return o&&a1(n,`http://${o}`),n}function UI(){return document.getElementsByTagName("head")?.[0]??document}XR({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=ui("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",UI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xI("Browser");var X=Mh(),LI="firebase",zI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(LI,zI,"app");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,n0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,S){function R(){}R.prototype=S.prototype,O.D=S.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(V,P,z){for(var N=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)N[bt-2]=arguments[bt];return S.prototype[P].apply(V,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,S,R){R||(R=0);var V=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)V[P]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(P=0;16>P;++P)V[P]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=O.g[0],R=O.g[1],P=O.g[2];var z=O.g[3],N=S+(z^R&(P^z))+V[0]+3614090360&4294967295;S=R+(N<<7&4294967295|N>>>25),N=z+(P^S&(R^P))+V[1]+3905402710&4294967295,z=S+(N<<12&4294967295|N>>>20),N=P+(R^z&(S^R))+V[2]+606105819&4294967295,P=z+(N<<17&4294967295|N>>>15),N=R+(S^P&(z^S))+V[3]+3250441966&4294967295,R=P+(N<<22&4294967295|N>>>10),N=S+(z^R&(P^z))+V[4]+4118548399&4294967295,S=R+(N<<7&4294967295|N>>>25),N=z+(P^S&(R^P))+V[5]+1200080426&4294967295,z=S+(N<<12&4294967295|N>>>20),N=P+(R^z&(S^R))+V[6]+2821735955&4294967295,P=z+(N<<17&4294967295|N>>>15),N=R+(S^P&(z^S))+V[7]+4249261313&4294967295,R=P+(N<<22&4294967295|N>>>10),N=S+(z^R&(P^z))+V[8]+1770035416&4294967295,S=R+(N<<7&4294967295|N>>>25),N=z+(P^S&(R^P))+V[9]+2336552879&4294967295,z=S+(N<<12&4294967295|N>>>20),N=P+(R^z&(S^R))+V[10]+4294925233&4294967295,P=z+(N<<17&4294967295|N>>>15),N=R+(S^P&(z^S))+V[11]+2304563134&4294967295,R=P+(N<<22&4294967295|N>>>10),N=S+(z^R&(P^z))+V[12]+1804603682&4294967295,S=R+(N<<7&4294967295|N>>>25),N=z+(P^S&(R^P))+V[13]+4254626195&4294967295,z=S+(N<<12&4294967295|N>>>20),N=P+(R^z&(S^R))+V[14]+2792965006&4294967295,P=z+(N<<17&4294967295|N>>>15),N=R+(S^P&(z^S))+V[15]+1236535329&4294967295,R=P+(N<<22&4294967295|N>>>10),N=S+(P^z&(R^P))+V[1]+4129170786&4294967295,S=R+(N<<5&4294967295|N>>>27),N=z+(R^P&(S^R))+V[6]+3225465664&4294967295,z=S+(N<<9&4294967295|N>>>23),N=P+(S^R&(z^S))+V[11]+643717713&4294967295,P=z+(N<<14&4294967295|N>>>18),N=R+(z^S&(P^z))+V[0]+3921069994&4294967295,R=P+(N<<20&4294967295|N>>>12),N=S+(P^z&(R^P))+V[5]+3593408605&4294967295,S=R+(N<<5&4294967295|N>>>27),N=z+(R^P&(S^R))+V[10]+38016083&4294967295,z=S+(N<<9&4294967295|N>>>23),N=P+(S^R&(z^S))+V[15]+3634488961&4294967295,P=z+(N<<14&4294967295|N>>>18),N=R+(z^S&(P^z))+V[4]+3889429448&4294967295,R=P+(N<<20&4294967295|N>>>12),N=S+(P^z&(R^P))+V[9]+568446438&4294967295,S=R+(N<<5&4294967295|N>>>27),N=z+(R^P&(S^R))+V[14]+3275163606&4294967295,z=S+(N<<9&4294967295|N>>>23),N=P+(S^R&(z^S))+V[3]+4107603335&4294967295,P=z+(N<<14&4294967295|N>>>18),N=R+(z^S&(P^z))+V[8]+1163531501&4294967295,R=P+(N<<20&4294967295|N>>>12),N=S+(P^z&(R^P))+V[13]+2850285829&4294967295,S=R+(N<<5&4294967295|N>>>27),N=z+(R^P&(S^R))+V[2]+4243563512&4294967295,z=S+(N<<9&4294967295|N>>>23),N=P+(S^R&(z^S))+V[7]+1735328473&4294967295,P=z+(N<<14&4294967295|N>>>18),N=R+(z^S&(P^z))+V[12]+2368359562&4294967295,R=P+(N<<20&4294967295|N>>>12),N=S+(R^P^z)+V[5]+4294588738&4294967295,S=R+(N<<4&4294967295|N>>>28),N=z+(S^R^P)+V[8]+2272392833&4294967295,z=S+(N<<11&4294967295|N>>>21),N=P+(z^S^R)+V[11]+1839030562&4294967295,P=z+(N<<16&4294967295|N>>>16),N=R+(P^z^S)+V[14]+4259657740&4294967295,R=P+(N<<23&4294967295|N>>>9),N=S+(R^P^z)+V[1]+2763975236&4294967295,S=R+(N<<4&4294967295|N>>>28),N=z+(S^R^P)+V[4]+1272893353&4294967295,z=S+(N<<11&4294967295|N>>>21),N=P+(z^S^R)+V[7]+4139469664&4294967295,P=z+(N<<16&4294967295|N>>>16),N=R+(P^z^S)+V[10]+3200236656&4294967295,R=P+(N<<23&4294967295|N>>>9),N=S+(R^P^z)+V[13]+681279174&4294967295,S=R+(N<<4&4294967295|N>>>28),N=z+(S^R^P)+V[0]+3936430074&4294967295,z=S+(N<<11&4294967295|N>>>21),N=P+(z^S^R)+V[3]+3572445317&4294967295,P=z+(N<<16&4294967295|N>>>16),N=R+(P^z^S)+V[6]+76029189&4294967295,R=P+(N<<23&4294967295|N>>>9),N=S+(R^P^z)+V[9]+3654602809&4294967295,S=R+(N<<4&4294967295|N>>>28),N=z+(S^R^P)+V[12]+3873151461&4294967295,z=S+(N<<11&4294967295|N>>>21),N=P+(z^S^R)+V[15]+530742520&4294967295,P=z+(N<<16&4294967295|N>>>16),N=R+(P^z^S)+V[2]+3299628645&4294967295,R=P+(N<<23&4294967295|N>>>9),N=S+(P^(R|~z))+V[0]+4096336452&4294967295,S=R+(N<<6&4294967295|N>>>26),N=z+(R^(S|~P))+V[7]+1126891415&4294967295,z=S+(N<<10&4294967295|N>>>22),N=P+(S^(z|~R))+V[14]+2878612391&4294967295,P=z+(N<<15&4294967295|N>>>17),N=R+(z^(P|~S))+V[5]+4237533241&4294967295,R=P+(N<<21&4294967295|N>>>11),N=S+(P^(R|~z))+V[12]+1700485571&4294967295,S=R+(N<<6&4294967295|N>>>26),N=z+(R^(S|~P))+V[3]+2399980690&4294967295,z=S+(N<<10&4294967295|N>>>22),N=P+(S^(z|~R))+V[10]+4293915773&4294967295,P=z+(N<<15&4294967295|N>>>17),N=R+(z^(P|~S))+V[1]+2240044497&4294967295,R=P+(N<<21&4294967295|N>>>11),N=S+(P^(R|~z))+V[8]+1873313359&4294967295,S=R+(N<<6&4294967295|N>>>26),N=z+(R^(S|~P))+V[15]+4264355552&4294967295,z=S+(N<<10&4294967295|N>>>22),N=P+(S^(z|~R))+V[6]+2734768916&4294967295,P=z+(N<<15&4294967295|N>>>17),N=R+(z^(P|~S))+V[13]+1309151649&4294967295,R=P+(N<<21&4294967295|N>>>11),N=S+(P^(R|~z))+V[4]+4149444226&4294967295,S=R+(N<<6&4294967295|N>>>26),N=z+(R^(S|~P))+V[11]+3174756917&4294967295,z=S+(N<<10&4294967295|N>>>22),N=P+(S^(z|~R))+V[2]+718787259&4294967295,P=z+(N<<15&4294967295|N>>>17),N=R+(z^(P|~S))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,O.g[2]=O.g[2]+P&4294967295,O.g[3]=O.g[3]+z&4294967295}s.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var R=S-this.blockSize,V=this.B,P=this.h,z=0;z<S;){if(P==0)for(;z<=R;)o(this,O,z),z+=this.blockSize;if(typeof O=="string"){for(;z<S;)if(V[P++]=O.charCodeAt(z++),P==this.blockSize){o(this,V),P=0;break}}else for(;z<S;)if(V[P++]=O[z++],P==this.blockSize){o(this,V),P=0;break}}this.h=P,this.o+=S},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var R=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=R&255,R/=256;for(this.u(O),O=Array(16),S=R=0;4>S;++S)for(var V=0;32>V;V+=8)O[R++]=this.g[S]>>>V&255;return O};function u(O,S){var R=m;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=S(O)}function f(O,S){this.h=S;for(var R=[],V=!0,P=O.length-1;0<=P;P--){var z=O[P]|0;V&&z==S||(R[P]=z,V=!1)}this.g=R}var m={};function p(O){return-128<=O&&128>O?u(O,function(S){return new f([S|0],0>S?-1:0)}):new f([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return b;if(0>O)return U(y(-O));for(var S=[],R=1,V=0;O>=R;V++)S[V]=O/R|0,R*=4294967296;return new f(S,0)}function E(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return U(E(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(S,8)),V=b,P=0;P<O.length;P+=8){var z=Math.min(8,O.length-P),N=parseInt(O.substring(P,P+z),S);8>z?(z=y(Math.pow(S,z)),V=V.j(z).add(y(N))):(V=V.j(R),V=V.add(y(N)))}return V}var b=p(0),w=p(1),D=p(16777216);r=f.prototype,r.m=function(){if(F(this))return-U(this).m();for(var O=0,S=1,R=0;R<this.g.length;R++){var V=this.i(R);O+=(0<=V?V:4294967296+V)*S,S*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(k(this))return"0";if(F(this))return"-"+U(this).toString(O);for(var S=y(Math.pow(O,6)),R=this,V="";;){var P=I(R,S).g;R=B(R,P.j(S));var z=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=P,k(R))return z+V;for(;6>z.length;)z="0"+z;V=z+V}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function k(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function F(O){return O.h==-1}r.l=function(O){return O=B(this,O),F(O)?-1:k(O)?0:1};function U(O){for(var S=O.g.length,R=[],V=0;V<S;V++)R[V]=~O.g[V];return new f(R,~O.h).add(w)}r.abs=function(){return F(this)?U(this):this},r.add=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],V=0,P=0;P<=S;P++){var z=V+(this.i(P)&65535)+(O.i(P)&65535),N=(z>>>16)+(this.i(P)>>>16)+(O.i(P)>>>16);V=N>>>16,z&=65535,N&=65535,R[P]=N<<16|z}return new f(R,R[R.length-1]&-2147483648?-1:0)};function B(O,S){return O.add(U(S))}r.j=function(O){if(k(this)||k(O))return b;if(F(this))return F(O)?U(this).j(U(O)):U(U(this).j(O));if(F(O))return U(this.j(U(O)));if(0>this.l(D)&&0>O.l(D))return y(this.m()*O.m());for(var S=this.g.length+O.g.length,R=[],V=0;V<2*S;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var P=0;P<O.g.length;P++){var z=this.i(V)>>>16,N=this.i(V)&65535,bt=O.i(P)>>>16,ot=O.i(P)&65535;R[2*V+2*P]+=N*ot,W(R,2*V+2*P),R[2*V+2*P+1]+=z*ot,W(R,2*V+2*P+1),R[2*V+2*P+1]+=N*bt,W(R,2*V+2*P+1),R[2*V+2*P+2]+=z*bt,W(R,2*V+2*P+2)}for(V=0;V<S;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=S;V<2*S;V++)R[V]=0;return new f(R,0)};function W(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function se(O,S){this.g=O,this.h=S}function I(O,S){if(k(S))throw Error("division by zero");if(k(O))return new se(b,b);if(F(O))return S=I(U(O),S),new se(U(S.g),U(S.h));if(F(S))return S=I(O,U(S)),new se(U(S.g),S.h);if(30<O.g.length){if(F(O)||F(S))throw Error("slowDivide_ only works with positive integers.");for(var R=w,V=S;0>=V.l(O);)R=L(R),V=L(V);var P=de(R,1),z=de(V,1);for(V=de(V,2),R=de(R,2);!k(V);){var N=z.add(V);0>=N.l(O)&&(P=P.add(R),z=N),V=de(V,1),R=de(R,1)}return S=B(O,P.j(S)),new se(P,S)}for(P=b;0<=O.l(S);){for(R=Math.max(1,Math.floor(O.m()/S.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),z=y(R),N=z.j(S);F(N)||0<N.l(O);)R-=V,z=y(R),N=z.j(S);k(z)&&(z=w),P=P.add(z),O=B(O,N)}return new se(P,O)}r.A=function(O){return I(this,O).h},r.and=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)&O.i(V);return new f(R,this.h&O.h)},r.or=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)|O.i(V);return new f(R,this.h|O.h)},r.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],V=0;V<S;V++)R[V]=this.i(V)^O.i(V);return new f(R,this.h^O.h)};function L(O){for(var S=O.g.length+1,R=[],V=0;V<S;V++)R[V]=O.i(V)<<1|O.i(V-1)>>>31;return new f(R,O.h)}function de(O,S){var R=S>>5;S%=32;for(var V=O.g.length-R,P=[],z=0;z<V;z++)P[z]=0<S?O.i(z+R)>>>S|O.i(z+R+1)<<32-S:O.i(z+R);return new f(P,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,n0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=E,Br=f}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var i0,Vl,r0,th,Vm,s0,a0,o0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hc=="object"&&Hc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var q=c[A];if(!(q in _))break e;_=_[q]}c=c[c.length-1],A=_[c],g=g(A),g!=A&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,A=!1,q={next:function(){if(!A&&_<c.length){var $=_++;return{value:g($,c[$]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function E(c,g,_){return c.call.apply(c.bind,arguments)}function b(c,g,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),c.apply(g,q)}}return function(){return c.apply(g,arguments)}}function w(c,g,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:b,w.apply(null,arguments)}function D(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function k(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,q,$){for(var oe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)oe[Pe-2]=arguments[Pe];return g.prototype[q].apply(A,oe)}}function F(c){const g=c.length;if(0<g){const _=Array(g);for(let A=0;A<g;A++)_[A]=c[A];return _}return[]}function U(c,g){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const q=c.length||0,$=A.length||0;c.length=q+$;for(let oe=0;oe<$;oe++)c[q+oe]=A[oe]}else c.push(A)}}class B{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function W(c){return/^[\s\xa0]*$/.test(c)}function se(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function I(c){return I[" "](c),c}I[" "]=function(){};var L=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function de(c,g,_){for(const A in c)g.call(_,c[A],A,c)}function O(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,g){let _,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(_ in A)c[_]=A[_];for(let $=0;$<R.length;$++)_=R[$],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function P(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function z(c){m.setTimeout(()=>{throw c},0)}function N(){var c=je;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class bt{constructor(){this.h=this.g=null}add(g,_){const A=ot.get();A.set(g,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ot=new B(()=>new Z,c=>c.reset());class Z{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let le,pe=!1,je=new bt,x=()=>{const c=m.Promise.resolve(void 0);le=()=>{c.then(re)}};var re=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(_){z(_)}var g=ot;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}pe=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ye=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c})();function Ce(c,g){if(ae.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(L){e:{try{I(g.nodeName);var q=!0;break e}catch{}q=!1}q||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:be[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}k(Ce,ae);var be={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function Fn(c,g,_,A,q){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!A,this.ha=q,this.key=++Ze,this.da=this.fa=!1}function rr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ai(c){this.src=c,this.g={},this.h=0}Ai.prototype.add=function(c,g,_,A,q){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var oe=es(c,g,A,q);return-1<oe?(g=c[oe],_||(g.fa=!1)):(g=new Fn(g,this.src,$,!!A,q),g.fa=_,c.push(g)),g};function Jr(c,g){var _=g.type;if(_ in c.g){var A=c.g[_],q=Array.prototype.indexOf.call(A,g,void 0),$;($=0<=q)&&Array.prototype.splice.call(A,q,1),$&&(rr(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function es(c,g,_,A){for(var q=0;q<c.length;++q){var $=c[q];if(!$.da&&$.listener==g&&$.capture==!!_&&$.ha==A)return q}return-1}var ts="closure_lm_"+(1e6*Math.random()|0),To={};function _u(c,g,_,A,q){if(Array.isArray(g)){for(var $=0;$<g.length;$++)_u(c,g[$],_,A,q);return null}return _=vu(_),c&&c[Dt]?c.K(g,_,y(A)?!!A.capture:!1,q):_n(c,g,_,!1,A,q)}function _n(c,g,_,A,q,$){if(!g)throw Error("Invalid event type");var oe=y(q)?!!q.capture:!!q,Pe=na(c);if(Pe||(c[ts]=Pe=new Ai(c)),_=Pe.add(g,_,A,oe,$),_.proxy)return _;if(A=rf(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)ye||(q=oe),q===void 0&&(q=!1),c.addEventListener(g.toString(),A,q);else if(c.attachEvent)c.attachEvent(ns(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function rf(){function c(_){return g.call(c.src,c.listener,_)}const g=sf;return c}function Ao(c,g,_,A,q){if(Array.isArray(g))for(var $=0;$<g.length;$++)Ao(c,g[$],_,A,q);else A=y(A)?!!A.capture:!!A,_=vu(_),c&&c[Dt]?(c=c.i,g=String(g).toString(),g in c.g&&($=c.g[g],_=es($,_,A,q),-1<_&&(rr($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete c.g[g],c.h--)))):c&&(c=na(c))&&(g=c.g[g.toString()],c=-1,g&&(c=es(g,_,A,q)),(_=-1<c?g[c]:null)&&ta(_))}function ta(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Dt])Jr(g.i,c);else{var _=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(_,A,c.capture):g.detachEvent?g.detachEvent(ns(_),A):g.addListener&&g.removeListener&&g.removeListener(A),(_=na(g))?(Jr(_,c),_.h==0&&(_.src=null,g[ts]=null)):rr(c)}}}function ns(c){return c in To?To[c]:To[c]="on"+c}function sf(c,g){if(c.da)c=!0;else{g=new Ce(g,this);var _=c.listener,A=c.ha||c.src;c.fa&&ta(c),c=_.call(A,g)}return c}function na(c){return c=c[ts],c instanceof Ai?c:null}var bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function vu(c){return typeof c=="function"?c:(c[bo]||(c[bo]=function(g){return c.handleEvent(g)}),c[bo])}function lt(){ue.call(this),this.i=new Ai(this),this.M=this,this.F=null}k(lt,ue),lt.prototype[Dt]=!0,lt.prototype.removeEventListener=function(c,g,_,A){Ao(this,c,g,_,A)};function Fe(c,g){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new ae(g,c);else if(g instanceof ae)g.target=g.target||c;else{var q=g;g=new ae(A,c),V(g,q)}if(q=!0,_)for(var $=_.length-1;0<=$;$--){var oe=g.g=_[$];q=ln(oe,A,!0,g)&&q}if(oe=g.g=c,q=ln(oe,A,!0,g)&&q,q=ln(oe,A,!1,g)&&q,_)for($=0;$<_.length;$++)oe=g.g=_[$],q=ln(oe,A,!1,g)&&q}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],A=0;A<_.length;A++)rr(_[A]);delete c.g[g],c.h--}}this.F=null},lt.prototype.K=function(c,g,_,A){return this.i.add(String(c),g,!1,_,A)},lt.prototype.L=function(c,g,_,A){return this.i.add(String(c),g,!0,_,A)};function ln(c,g,_,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var q=!0,$=0;$<g.length;++$){var oe=g[$];if(oe&&!oe.da&&oe.capture==_){var Pe=oe.listener,wt=oe.ha||oe.src;oe.fa&&Jr(c.i,oe),q=Pe.call(wt,A)!==!1&&q}}return q&&!A.defaultPrevented}function Yt(c,g,_){if(typeof c=="function")_&&(c=w(c,_));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function Eu(c){c.g=Yt(()=>{c.g=null,c.i&&(c.i=!1,Eu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class af extends ue{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Eu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(c){ue.call(this),this.h=c,this.g={}}k(is,ue);var rs=[];function ss(c){de(c.g,function(g,_){this.g.hasOwnProperty(_)&&ta(g)},c),c.g={}}is.prototype.N=function(){is.aa.N.call(this),ss(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=m.JSON.stringify,ia=m.JSON.parse,as=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function So(){}So.prototype.h=null;function wo(c){return c.h||(c.h=c.i())}function Ro(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Si(){ae.call(this,"d")}k(Si,ae);function Io(){ae.call(this,"c")}k(Io,ae);var Gn={},Co=null;function sr(){return Co=Co||new lt}Gn.La="serverreachability";function ra(c){ae.call(this,Gn.La,c)}k(ra,ae);function ar(c){const g=sr();Fe(g,new ra(g))}Gn.STAT_EVENT="statevent";function Tu(c,g){ae.call(this,Gn.STAT_EVENT,c),this.stat=g}k(Tu,ae);function nt(c){const g=sr();Fe(g,new Tu(g,c))}Gn.Ma="timingevent";function St(c,g){ae.call(this,Gn.Ma,c),this.size=g}k(St,ae);function pt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function vn(){this.g=!0}vn.prototype.xa=function(){this.g=!1};function No(c,g,_,A,q,$){c.info(function(){if(c.g)if($)for(var oe="",Pe=$.split("&"),wt=0;wt<Pe.length;wt++){var ke=Pe[wt].split("=");if(1<ke.length){var xt=ke[0];ke=ke[1];var Rt=xt.split("_");oe=2<=Rt.length&&Rt[1]=="type"?oe+(xt+"="+ke+"&"):oe+(xt+"=redacted&")}}else oe=null;else oe=$;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+g+`
`+_+`
`+oe})}function of(c,g,_,A,q,$,oe){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+g+`
`+_+`
`+$+" "+oe})}function or(c,g,_,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+os(c,_)+(A?" "+A:"")})}function Au(c,g){c.info(function(){return"TIMEOUT: "+g})}vn.prototype.info=function(){};function os(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var $=q[0];if($!="noop"&&$!="stop"&&$!="close")for(var oe=1;oe<q.length;oe++)q[oe]=""}}}}return Mn(_)}catch{return g}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yn;function Kn(){}k(Kn,So),Kn.prototype.g=function(){return new XMLHttpRequest},Kn.prototype.i=function(){return{}},Yn=new Kn;function Jt(c,g,_,A){this.j=c,this.i=g,this.l=_,this.R=A||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var Do={},sa={};function Vn(c,g,_){c.L=1,c.v=fs(un(g)),c.m=_,c.P=!0,Ri(c,null)}function Ri(c,g){c.F=Date.now(),ls(c),c.A=un(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),ko(_.i,"t",A),c.C=0,_=c.j.J,c.h=new ht,c.g=Lu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new af(w(c.Y,c,c.g),c.O)),g=c.U,_=c.g,A=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(rs[0]=q.toString()),q=rs);for(var $=0;$<q.length;$++){var oe=_u(_,q[$],A||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),ar(),No(c.i,c.u,c.A,c.l,c.R,c.m)}Jt.prototype.ca=function(c){c=c.target;const g=this.M;g&&bn(c)==3?g.j():this.Y(c)},Jt.prototype.Y=function(c){try{if(c==this.g)e:{const Rt=bn(this.g);var g=this.g.Ba();const Vi=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Du(this.g)))){this.J||Rt!=4||g==7||(g==8||0>=Vi?ar(3):ar(2)),ur(this);var _=this.g.Z();this.X=_;t:if(bu(this)){var A=Du(this.g);c="";var q=A.length,$=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ut(this),Qn(this);var oe="";break t}this.h.i=new m.TextDecoder}for(g=0;g<q;g++)this.h.h=!0,c+=this.h.i.decode(A[g],{stream:!($&&g==q-1)});A.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,of(this.i,this.u,this.A,this.l,this.R,Rt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,wt=this.g;if((Pe=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Pe)){var ke=Pe;break t}}ke=null}if(_=ke)or(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,us(this,_);else{this.o=!1,this.s=3,nt(12),Ut(this),Qn(this);break e}}if(this.P){_=!0;let Lt;for(;!this.J&&this.C<oe.length;)if(Lt=Su(this,oe),Lt==sa){Rt==4&&(this.s=4,nt(14),_=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==Do){this.s=4,nt(15),or(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else or(this.i,this.l,Lt,null),us(this,Lt);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||oe.length!=0||this.h.h||(this.s=1,nt(16),_=!1),this.o=this.o&&_,!_)or(this.i,this.l,oe,"[Invalid Chunked Response]"),Ut(this),Qn(this);else if(0<oe.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Es(xt),xt.M=!0,nt(11))}}else or(this.i,this.l,oe,null),us(this,oe);Rt==4&&Ut(this),this.o&&!this.J&&(Rt==4?Pu(this.j,this):(this.o=!1,ls(this)))}else ff(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),Ut(this),Qn(this)}}}catch{}finally{}};function bu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Su(c,g){var _=c.C,A=g.indexOf(`
`,_);return A==-1?sa:(_=Number(g.substring(_,A)),isNaN(_)?Do:(A+=1,A+_>g.length?sa:(g=g.slice(A,A+_),c.C=A+_,g)))}Jt.prototype.cancel=function(){this.J=!0,Ut(this)};function ls(c){c.S=Date.now()+c.I,wu(c,c.I)}function wu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=pt(w(c.ba,c),g)}function ur(c){c.B&&(m.clearTimeout(c.B),c.B=null)}Jt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Au(this.i,this.A),this.L!=2&&(ar(),nt(17)),Ut(this),this.s=2,Qn(this)):wu(this,this.S-c)};function Qn(c){c.j.G==0||c.J||Pu(c.j,c)}function Ut(c){ur(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,ss(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function us(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Oo(_.h,c))){if(!c.K&&Oo(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)ya(_),pa(_);else break e;Bo(_),nt(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=pt(w(_.Za,_),6e3));if(1>=oa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Mi(_,11)}else if((c.K||_.g==c)&&ya(_),!W(g))for(q=_.Da.g.parse(g),g=0;g<q.length;g++){let ke=q[g];if(_.T=ke[0],ke=ke[1],_.G==2)if(ke[0]=="c"){_.K=ke[1],_.ia=ke[2];const xt=ke[3];xt!=null&&(_.la=xt,_.j.info("VER="+_.la));const Rt=ke[4];Rt!=null&&(_.Aa=Rt,_.j.info("SVER="+_.Aa));const Vi=ke[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(A=1.5*Vi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Lt=c.g;if(Lt){const ti=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var $=A.h;$.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(la($,$.h),$.h=null))}if(A.D){const Ho=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(A.ya=Ho,Ke(A.I,A.D,Ho))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var oe=c;if(A.qa=Uu(A,A.J?A.ia:null,A.W),oe.K){en(A.h,oe);var Pe=oe,wt=A.L;wt&&(Pe.I=wt),Pe.B&&(ur(Pe),ls(Pe)),A.g=oe}else Mu(A);0<_.i.length&&ga(_)}else ke[0]!="stop"&&ke[0]!="close"||Mi(_,7);else _.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Mi(_,7):zo(_):ke[0]!="noop"&&_.l&&_.l.ta(ke),_.v=0)}}ar(4)}catch{}}var Ru=class{constructor(c,g){this.g=c,this.map=g}};function Ii(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function oa(c){return c.h?1:c.g?c.g.size:0}function Oo(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function la(c,g){c.g?c.g.add(g):c.h=g}function en(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ii.prototype.cancel=function(){if(this.i=xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function xo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return F(c.i)}function lf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,A=0;A<_;A++)g.push(c[A]);return g}g=[],_=0;for(A in c)g[_++]=c[A];return g}function ua(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const A in c)g[_++]=A;return g}}}function Mo(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=ua(c),A=lf(c),q=A.length,$=0;$<q;$++)g.call(void 0,A[$],_&&_[$],c)}var cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uf(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),q=null;if(0<=A){var $=c[_].substring(0,A);q=c[_].substring(A+1)}else $=c[_];g($,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function gt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof gt){this.h=c.h,hs(this,c.j),this.o=c.o,this.g=c.g,cr(this,c.s),this.l=c.l;var g=c.i,_=new Ni;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Ci(this,_),this.m=c.m}else c&&(g=String(c).match(cs))?(this.h=!1,hs(this,g[1]||"",!0),this.o=En(g[2]||""),this.g=En(g[3]||"",!0),cr(this,g[4]),this.l=En(g[5]||"",!0),Ci(this,g[6]||"",!0),this.m=En(g[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}gt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ds(g,Vo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ds(g,Vo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ds(_,_.charAt(0)=="/"?cf:Po,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ds(_,ca)),c.join("")};function un(c){return new gt(c)}function hs(c,g,_){c.j=_?En(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function cr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Ci(c,g,_){g instanceof Ni?(c.i=g,Cu(c.i,c.h)):(_||(g=ds(g,hf)),c.i=new Ni(g,c.h))}function Ke(c,g,_){c.i.set(g,_)}function fs(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function En(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ds(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Iu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Iu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vo=/[#\/\?@]/g,Po=/[#\?:]/g,cf=/[#\?]/g,hf=/[#\?@]/g,ca=/#/g;function Ni(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Tn(c){c.g||(c.g=new Map,c.h=0,c.i&&uf(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Ni.prototype,r.add=function(c,g){Tn(this),this.i=null,c=$n(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Di(c,g){Tn(c),g=$n(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Oi(c,g){return Tn(c),g=$n(c,g),c.g.has(g)}r.forEach=function(c,g){Tn(this),this.g.forEach(function(_,A){_.forEach(function(q){c.call(g,q,A,this)},this)},this)},r.na=function(){Tn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let A=0;A<g.length;A++){const q=c[A];for(let $=0;$<q.length;$++)_.push(g[A])}return _},r.V=function(c){Tn(this);let g=[];if(typeof c=="string")Oi(this,c)&&(g=g.concat(this.g.get($n(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},r.set=function(c,g){return Tn(this),this.i=null,c=$n(this,c),Oi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ko(c,g,_){Di(c,g),0<_.length&&(c.i=null,c.g.set($n(c,g),F(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var A=g[_];const $=encodeURIComponent(String(A)),oe=this.V(A);for(A=0;A<oe.length;A++){var q=$;oe[A]!==""&&(q+="="+encodeURIComponent(String(oe[A]))),c.push(q)}}return this.i=c.join("&")};function $n(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Cu(c,g){g&&!c.j&&(Tn(c),c.i=null,c.g.forEach(function(_,A){var q=A.toLowerCase();A!=q&&(Di(this,A),ko(this,q,_))},c)),c.j=g}function ms(c,g){const _=new vn;if(m.Image){const A=new Image;A.onload=D(An,_,"TestLoadImage: loaded",!0,g,A),A.onerror=D(An,_,"TestLoadImage: error",!1,g,A),A.onabort=D(An,_,"TestLoadImage: abort",!1,g,A),A.ontimeout=D(An,_,"TestLoadImage: timeout",!1,g,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function Pn(c,g){const _=new vn,A=new AbortController,q=setTimeout(()=>{A.abort(),An(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then($=>{clearTimeout(q),$.ok?An(_,"TestPingServer: ok",!0,g):An(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),An(_,"TestPingServer: error",!1,g)})}function An(c,g,_,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(_)}catch{}}function ps(){this.g=new as}function Xn(c,g,_){const A=_||"";try{Mo(c,function(q,$){let oe=q;y(q)&&(oe=Mn(q)),g.push(A+$+"="+encodeURIComponent(oe))})}catch(q){throw g.push(A+"type="+encodeURIComponent("_badmap")),q}}function hr(c){this.l=c.Ub||null,this.j=c.eb||!1}k(hr,So),hr.prototype.g=function(){return new xi(this.l,this.j)},hr.prototype.i=(function(c){return function(){return c}})({});function xi(c,g){lt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(xi,lt),r=xi.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Zn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Wn(this):Zn(this),this.readyState==3&&Uo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Wn(this))},r.Qa=function(c){this.g&&(this.response=c,Wn(this))},r.ga=function(){this.g&&Wn(this)};function Wn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Zn(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Zn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Lo(c){let g="";return de(c,function(_,A){g+=A,g+=":",g+=_,g+=`\r
`}),g}function Ot(c,g,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Lo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ke(c,g,_))}function qe(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(qe,lt);var ha=/^https?$/i,gs=["POST","PUT"];r=qe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yn.g(),this.v=this.o?wo(this.o):wo(Yn),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch($){Nu(this,$);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)_.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())_.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),q=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(gs,g,void 0))||A||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of _)this.g.setRequestHeader($,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ys(this),this.u=!0,this.g.send(c),this.u=!1}catch($){Nu(this,$)}};function Nu(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,fa(c),Jn(c)}function fa(c){c.A||(c.A=!0,Fe(c,"complete"),Fe(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Fe(this,"complete"),Fe(this,"abort"),Jn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jn(this,!0)),qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},r.bb=function(){da(this)};function da(c){if(c.h&&typeof f<"u"&&(!c.v[1]||bn(c)!=4||c.Z()!=2)){if(c.u&&bn(c)==4)Yt(c.Ea,0,c);else if(Fe(c,"readystatechange"),bn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var A;if(A=oe===0){var q=String(c.D).match(cs)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),A=!ha.test(q?q.toLowerCase():"")}_=A}if(_)Fe(c,"complete"),Fe(c,"success");else{c.m=6;try{var $=2<bn(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",fa(c)}}finally{Jn(c)}}}}function Jn(c,g){if(c.g){ys(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Fe(c,"ready");try{_.onreadystatechange=A}catch{}}}function ys(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function bn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ia(g)}};function Du(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ff(c){const g={};c=(c.g&&2<=bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(W(c[A]))continue;var _=P(c[A]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=g[q]||[];g[q]=$,$.push(_)}O(g,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function ma(c){this.Aa=0,this.i=[],this.j=new vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,c),this.cb=_s("retryDelaySeedMs",1e4,c),this.Wa=_s("forwardChannelMaxRetries",2,c),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(c&&c.concurrentRequestLimit),this.Da=new ps,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ma.prototype,r.la=8,r.G=1,r.connect=function(c,g,_,A){nt(0),this.W=c,this.H=g||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Uu(this,null,this.W),ga(this)};function zo(c){if(Ou(c),c.G==3){var g=c.U++,_=un(c.I);if(Ke(_,"SID",c.K),Ke(_,"RID",g),Ke(_,"TYPE","terminate"),vs(c,_),g=new Jt(c,c.j,g),g.L=2,g.v=fs(un(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=Lu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ls(g)}ku(c)}function pa(c){c.g&&(Es(c),c.g.cancel(),c.g=null)}function Ou(c){pa(c),c.u&&(m.clearTimeout(c.u),c.u=null),ya(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ga(c){if(!aa(c.h)&&!c.s){c.s=!0;var g=c.Ga;le||x(),pe||(le(),pe=!0),je.add(g,c),c.B=0}}function df(c,g){return oa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=pt(w(c.Ga,c,g),qo(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new Jt(this,this.j,c);let $=this.o;if(this.S&&($?($=S($),V($,this.S)):$=this.S),this.m!==null||this.O||(q.H=$,$=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=xu(this,q,g),_=un(this.I),Ke(_,"RID",c),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),vs(this,_),$&&(this.O?g="headers="+encodeURIComponent(String(Lo($)))+"&"+g:this.m&&Ot(_,this.m,$)),la(this.h,q),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",g),Ke(_,"SID","null"),q.T=!0,Vn(q,_,null)):Vn(q,_,g),this.G=2}}else this.G==3&&(c?jo(this,c):this.i.length==0||aa(this.h)||jo(this))};function jo(c,g){var _;g?_=g.l:_=c.U++;const A=un(c.I);Ke(A,"SID",c.K),Ke(A,"RID",_),Ke(A,"AID",c.T),vs(c,A),c.m&&c.o&&Ot(A,c.m,c.o),_=new Jt(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=xu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),la(c.h,_),Vn(_,A,g)}function vs(c,g){c.H&&de(c.H,function(_,A){Ke(g,A,_)}),c.l&&Mo({},function(_,A){Ke(g,A,_)})}function xu(c,g,_){_=Math.min(c.i.length,_);var A=c.l?w(c.l.Na,c.l,c):null;e:{var q=c.i;let $=-1;for(;;){const oe=["count="+_];$==-1?0<_?($=q[0].g,oe.push("ofs="+$)):$=0:oe.push("ofs="+$);let Pe=!0;for(let wt=0;wt<_;wt++){let ke=q[wt].g;const xt=q[wt].map;if(ke-=$,0>ke)$=Math.max(0,q[wt].g-100),Pe=!1;else try{Xn(xt,oe,"req"+ke+"_")}catch{A&&A(xt)}}if(Pe){A=oe.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,A}function Mu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;le||x(),pe||(le(),pe=!0),je.add(g,c),c.v=0}}function Bo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=pt(w(c.Fa,c),qo(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=pt(w(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),pa(this),Vu(this))};function Es(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Vu(c){c.g=new Jt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=un(c.qa);Ke(g,"RID","rpc"),Ke(g,"SID",c.K),Ke(g,"AID",c.T),Ke(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(g,"TO",c.ja),Ke(g,"TYPE","xmlhttp"),vs(c,g),c.m&&c.o&&Ot(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=fs(un(g)),_.m=null,_.P=!0,Ri(_,c)}r.Za=function(){this.C!=null&&(this.C=null,pa(this),Bo(this),nt(19))};function ya(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Pu(c,g){var _=null;if(c.g==g){ya(c),Es(c),c.g=null;var A=2}else if(Oo(c.h,g))_=g.D,en(c.h,g),A=1;else return;if(c.G!=0){if(g.o)if(A==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var q=c.B;A=sr(),Fe(A,new St(A,_)),ga(c)}else Mu(c);else if(q=g.s,q==3||q==0&&0<g.X||!(A==1&&df(c,g)||A==2&&Bo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),q){case 1:Mi(c,5);break;case 4:Mi(c,10);break;case 3:Mi(c,6);break;default:Mi(c,2)}}}function qo(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Mi(c,g){if(c.j.info("Error code "+g),g==2){var _=w(c.fb,c),A=c.Xa;const q=!A;A=new gt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||hs(A,"https"),fs(A),q?ms(A.toString(),_):Pn(A.toString(),_)}else nt(2);c.G=0,c.l&&c.l.sa(g),ku(c),Ou(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function ku(c){if(c.G=0,c.ka=[],c.l){const g=xo(c.h);(g.length!=0||c.i.length!=0)&&(U(c.ka,g),U(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function Uu(c,g,_){var A=_ instanceof gt?un(_):new gt(_);if(A.g!="")g&&(A.g=g+"."+A.g),cr(A,A.s);else{var q=m.location;A=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;var $=new gt(null);A&&hs($,A),g&&($.g=g),q&&cr($,q),_&&($.l=_),A=$}return _=c.D,g=c.ya,_&&g&&Ke(A,_,g),Ke(A,"VER",c.la),vs(c,A),A}function Lu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new qe(new hr({eb:_})):new qe(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}r=zu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function _a(){}_a.prototype.g=function(c,g){return new tn(c,g)};function tn(c,g){lt.call(this),this.g=new ma(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!W(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!W(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ei(this)}k(tn,lt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){zo(this.g)},tn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Mn(c),c=_);g.i.push(new Ru(g.Ya++,c)),g.G==3&&ga(g)},tn.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,tn.aa.N.call(this)};function ju(c){Si.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}k(ju,Si);function Bu(){Io.call(this),this.status=1}k(Bu,Io);function ei(c){this.g=c}k(ei,zu),ei.prototype.ua=function(){Fe(this.g,"a")},ei.prototype.ta=function(c){Fe(this.g,new ju(c))},ei.prototype.sa=function(c){Fe(this.g,new Bu)},ei.prototype.ra=function(){Fe(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,o0=function(){return new _a},a0=function(){return sr()},s0=Gn,Vm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,th=lr,wi.COMPLETE="complete",r0=wi,Ro.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Vl=Ro,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,i0=qe}).apply(typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{});const Xv="@firebase/firestore",Wv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new np("@firebase/firestore");function Ka(){return Fs.logLevel}function he(r,...e){if(Fs.logLevel<=xe.DEBUG){const n=e.map(dp);Fs.debug(`Firestore (${fo}): ${r}`,...n)}}function tr(r,...e){if(Fs.logLevel<=xe.ERROR){const n=e.map(dp);Fs.error(`Firestore (${fo}): ${r}`,...n)}}function ro(r,...e){if(Fs.logLevel<=xe.WARN){const n=e.map(dp);Fs.warn(`Firestore (${fo}): ${r}`,...n)}}function dp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,l0(r,s,n)}function l0(r,e,n){let s=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw tr(s),new Error(s)}function He(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||l0(e,o,s)}function we(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class BI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class qI{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new qr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new qr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string",31837,{l:s}),new u0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class HI{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FI{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new HI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const s=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=YI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Me(r,e){return r<e?-1:r>e?1:0}function Pm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return ym(o)===ym(u)?Me(o,u):ym(o)?1:-1}return Me(r.length,e.length)}const KI=55296,QI=57343;function ym(r){const e=r.charCodeAt(0);return e>=KI&&e<=QI}function so(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="__name__";class oi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=oi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Me(e.length,n.length)}static compareSegments(e,n){const s=oi.isNumericId(e),o=oi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?oi.extractNumericId(e).compare(oi.extractNumericId(n)):Pm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Br.fromString(e.substring(4,e.length-2))}}class et extends oi{construct(e,n,s){return new et(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new et(n)}static emptyPath(){return new et([])}}const $I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends oi{construct(e,n,s){return new Ht(e,n,s)}static isValidIdentifier(e){return $I.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jv}static keyField(){return new Ht([Jv])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ce(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ce(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(et.fromString(e))}static fromName(e){return new ge(et.fromString(e).popFirst(5))}static empty(){return new ge(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(r,e,n){if(!n)throw new ce(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function XI(r,e,n,s){if(e===!0&&s===!0)throw new ce(te.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function eE(r){if(!ge.isDocumentKey(r))throw new ce(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function tE(r){if(ge.isDocumentKey(r))throw new ce(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function h0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function zh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Ls(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zh(r);throw new ce(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(r,e){const n={typeString:r};return e&&(n.value=e),n}function cu(r,e){if(!h0(r))throw new ce(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ce(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=-62135596800,iE=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*iE);return new tt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nE)throw new ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iE}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cu(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Tt("string",tt._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new tt(0,0))}static max(){return new Se(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=-1;function WI(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new tt(n+1,0):new tt(n,s));return new Gr(o,ge.empty(),e)}function ZI(r){return new Gr(r.readTime,r.key,Kl)}class Gr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Gr(Se.min(),ge.empty(),Kl)}static max(){return new Gr(Se.max(),ge.empty(),Kl)}}function JI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(r.documentKey,e.documentKey),n!==0?n:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==eC)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,s)=>{n(e)}))}static reject(e){return new ie(((n,s)=>{s(e)}))}static waitFor(e){return new ie(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(p=>s(p)))})),f=!0,u===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const s of e)n=n.next((o=>o?ie.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ie(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((E=>{f[y]=E,++m,m===u&&s(f)}),(E=>o(E)))}}))}static doWhile(e,n){return new ie(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function nC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=-1;function Bh(r){return r==null}function vh(r){return r===0&&1/r==-1/0}function iC(r){return typeof r=="number"&&Number.isInteger(r)&&!vh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="";function rC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=rE(e)),e=sC(r.get(n),e);return rE(e)}function sC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case f0:n+="";break;default:n+=u}}return n}function rE(r){return r+f0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function $s(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function d0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??qt.RED,this.left=o??qt.EMPTY,this.right=u??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new qt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return qt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aE(this.data.getIterator())}getIteratorFrom(e){return new aE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class aE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new jn([])}unionWith(e){let n=new Nt(Ht.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new m0("Invalid base64 string: "+u):u}})(e);return new Gt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const aC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(r){if(He(!!r,39018),typeof r=="string"){let e=0;const n=aC.exec(r);if(He(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Kr(r){return typeof r=="string"?Gt.fromBase64String(r):Gt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="server_timestamp",g0="__type__",y0="__previous_value__",_0="__local_write_time__";function gp(r){return(r?.mapValue?.fields||{})[g0]?.stringValue===p0}function qh(r){const e=r.mapValue.fields[y0];return gp(e)?qh(e):e}function Ql(r){const e=Yr(r.mapValue.fields[_0].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,s,o,u,f,m,p,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const Eh="(default)";class $l{constructor(e,n){this.projectId=e,this.database=n||Eh}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="__type__",lC="__max__",Gc={mapValue:{}},E0="__vector__",Th="value";function Qr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?gp(r)?4:cC(r)?9007199254740991:uC(r)?10:11:Te(28295,{value:r})}function pi(r,e){if(r===e)return!0;const n=Qr(r);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ql(r).isEqual(Ql(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Yr(o.timestampValue),m=Yr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Kr(o.bytesValue).isEqual(Kr(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return mt(o.geoPointValue.latitude)===mt(u.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return mt(o.integerValue)===mt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=mt(o.doubleValue),m=mt(u.doubleValue);return f===m?vh(f)===vh(m):isNaN(f)&&isNaN(m)}return!1})(r,e);case 9:return so(r.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(sE(f)!==sE(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!pi(f[p],m[p])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function Xl(r,e){return(r.values||[]).find((n=>pi(n,e)))!==void 0}function ao(r,e){if(r===e)return 0;const n=Qr(r),s=Qr(e);if(n!==s)return Me(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=mt(u.integerValue||u.doubleValue),p=mt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return oE(r.timestampValue,e.timestampValue);case 4:return oE(Ql(r),Ql(e));case 5:return Pm(r.stringValue,e.stringValue);case 6:return(function(u,f){const m=Kr(u),p=Kr(f);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),p=f.split("/");for(let y=0;y<m.length&&y<p.length;y++){const E=Me(m[y],p[y]);if(E!==0)return E}return Me(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Me(mt(u.latitude),mt(f.latitude));return m!==0?m:Me(mt(u.longitude),mt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return lE(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},p=f.fields||{},y=m[Th]?.arrayValue,E=p[Th]?.arrayValue,b=Me(y?.values?.length||0,E?.values?.length||0);return b!==0?b:lE(y,E)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Gc.mapValue&&f===Gc.mapValue)return 0;if(u===Gc.mapValue)return 1;if(f===Gc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=f.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let b=0;b<p.length&&b<E.length;++b){const w=Pm(p[b],E[b]);if(w!==0)return w;const D=ao(m[p[b]],y[E[b]]);if(D!==0)return D}return Me(p.length,E.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function oE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const n=Yr(r),s=Yr(e),o=Me(n.seconds,s.seconds);return o!==0?o:Me(n.nanos,s.nanos)}function lE(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=ao(n[o],s[o]);if(u)return u}return Me(n.length,s.length)}function oo(r){return km(r)}function km(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Yr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Kr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ge.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=km(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${km(n.fields[f])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function nh(r){switch(Qr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qh(r);return e?16+nh(e):16;case 5:return 2*r.stringValue.length;case 6:return Kr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+nh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return $s(s.fields,((u,f)=>{o+=u.length+nh(f)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function uE(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Um(r){return!!r&&"integerValue"in r}function yp(r){return!!r&&"arrayValue"in r}function cE(r){return!!r&&"nullValue"in r}function hE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ih(r){return!!r&&"mapValue"in r}function uC(r){return(r?.mapValue?.fields||{})[v0]?.stringValue===E0}function jl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return $s(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=jl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jl(r.arrayValue.values[n]);return e}return{...r}}function cC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===lC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(n)}setAll(e){let n=Ht.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=jl(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];ih(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){$s(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new On(jl(this.value))}}function T0(r){const e=[];return $s(r.fields,((n,s)=>{const o=new Ht([n]);if(ih(s)){const u=T0(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Wt(e,0,Se.min(),Se.min(),Se.min(),On.empty(),0)}static newFoundDocument(e,n,s,o){return new Wt(e,1,n,Se.min(),s,o,0)}static newNoDocument(e,n){return new Wt(e,2,n,Se.min(),Se.min(),On.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Se.min(),Se.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.position=e,this.inclusive=n}}function fE(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=ge.comparator(ge.fromName(f.referenceValue),n.key):s=ao(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function dE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!pi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n="asc"){this.field=e,this.dir=n}}function hC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{}class Et extends A0{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new dC(e,n,s):n==="array-contains"?new gC(e,s):n==="in"?new yC(e,s):n==="not-in"?new _C(e,s):n==="array-contains-any"?new vC(e,s):new Et(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new mC(e,s):new pC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ao(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends A0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Hn(e,n)}matches(e){return b0(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b0(r){return r.op==="and"}function S0(r){return fC(r)&&b0(r)}function fC(r){for(const e of r.filters)if(e instanceof Hn)return!1;return!0}function Lm(r){if(r instanceof Et)return r.field.canonicalString()+r.op.toString()+oo(r.value);if(S0(r))return r.filters.map((e=>Lm(e))).join(",");{const e=r.filters.map((n=>Lm(n))).join(",");return`${r.op}(${e})`}}function w0(r,e){return r instanceof Et?(function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&pi(s.value,o.value)})(r,e):r instanceof Hn?(function(s,o){return o instanceof Hn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&w0(f,o.filters[m])),!0):!1})(r,e):void Te(19439)}function R0(r){return r instanceof Et?(function(n){return`${n.field.canonicalString()} ${n.op} ${oo(n.value)}`})(r):r instanceof Hn?(function(n){return n.op.toString()+" {"+n.getFilters().map(R0).join(" ,")+"}"})(r):"Filter"}class dC extends Et{constructor(e,n,s){super(e,n,s),this.key=ge.fromName(s.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class mC extends Et{constructor(e,n){super(e,"in",n),this.keys=I0("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class pC extends Et{constructor(e,n){super(e,"not-in",n),this.keys=I0("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function I0(r,e){return(e.arrayValue?.values||[]).map((n=>ge.fromName(n.referenceValue)))}class gC extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yp(n)&&Xl(n.arrayValue,this.value)}}class yC extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xl(this.value.arrayValue,n)}}class _C extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xl(this.value.arrayValue,n)}}class vC extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Xl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function mE(r,e=null,n=[],s=[],o=null,u=null,f=null){return new EC(r,e,n,s,o,u,f)}function _p(r){const e=we(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Lm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Bh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>oo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>oo(s))).join(",")),e.Te=n}return e.Te}function vp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!hC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!w0(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!dE(r.startAt,e.startAt)&&dE(r.endAt,e.endAt)}function zm(r){return ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TC(r,e,n,s,o,u,f,m){return new go(r,e,n,s,o,u,f,m)}function Hh(r){return new go(r)}function pE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function C0(r){return r.collectionGroup!==null}function Bl(r){const e=we(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Nt(Ht.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Wl(u,s))})),n.has(Ht.keyField().canonicalString())||e.Ie.push(new Wl(Ht.keyField(),s))}return e.Ie}function hi(r){const e=we(r);return e.Ee||(e.Ee=AC(e,Bl(r))),e.Ee}function AC(r,e){if(r.limitType==="F")return mE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Wl(o.field,u)}));const n=r.endAt?new Ah(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Ah(r.startAt.position,r.startAt.inclusive):null;return mE(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function jm(r,e){const n=r.filters.concat([e]);return new go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Bm(r,e,n){return new go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Fh(r,e){return vp(hi(r),hi(e))&&r.limitType===e.limitType}function N0(r){return`${_p(hi(r))}|lt:${r.limitType}`}function Qa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>R0(o))).join(", ")}]`),Bh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>oo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>oo(o))).join(",")),`Target(${s})`})(hi(r))}; limitType=${r.limitType})`}function Gh(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ge.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Bl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,p){const y=fE(f,m,p);return f.inclusive?y<=0:y<0})(s.startAt,Bl(s),o)||s.endAt&&!(function(f,m,p){const y=fE(f,m,p);return f.inclusive?y>=0:y>0})(s.endAt,Bl(s),o))})(r,e)}function bC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function D0(r){return(e,n)=>{let s=!1;for(const o of Bl(r)){const u=SC(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function SC(r,e,n){const s=r.field.isKeyField()?ge.comparator(e.key,n.key):(function(u,f,m){const p=f.data.field(u),y=m.data.field(u);return p!==null&&y!==null?ao(p,y):Te(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return d0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new at(ge.comparator);function nr(){return wC}const O0=new at(ge.comparator);function Pl(...r){let e=O0;for(const n of r)e=e.insert(n.key,n);return e}function x0(r){let e=O0;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Us(){return ql()}function M0(){return ql()}function ql(){return new Xs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const RC=new at(ge.comparator),IC=new Nt(ge.comparator);function Ve(...r){let e=IC;for(const n of r)e=e.add(n);return e}const CC=new Nt(Me);function NC(){return CC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function V0(r){return{integerValue:""+r}}function DC(r,e){return iC(e)?V0(e):Ep(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this._=void 0}}function OC(r,e,n){return r instanceof Zl?(function(o,u){const f={fields:{[g0]:{stringValue:p0},[_0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&gp(u)&&(u=qh(u)),u&&(f.fields[y0]=u),{mapValue:f}})(n,e):r instanceof Jl?k0(r,e):r instanceof eu?U0(r,e):(function(o,u){const f=P0(o,u),m=gE(f)+gE(o.Ae);return Um(f)&&Um(o.Ae)?V0(m):Ep(o.serializer,m)})(r,e)}function xC(r,e,n){return r instanceof Jl?k0(r,e):r instanceof eu?U0(r,e):n}function P0(r,e){return r instanceof bh?(function(s){return Um(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Zl extends Yh{}class Jl extends Yh{constructor(e){super(),this.elements=e}}function k0(r,e){const n=L0(e);for(const s of r.elements)n.some((o=>pi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class eu extends Yh{constructor(e){super(),this.elements=e}}function U0(r,e){let n=L0(e);for(const s of r.elements)n=n.filter((o=>!pi(o,s)));return{arrayValue:{values:n}}}class bh extends Yh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function gE(r){return mt(r.integerValue||r.doubleValue)}function L0(r){return yp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.field=e,this.transform=n}}function VC(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Jl&&o instanceof Jl||s instanceof eu&&o instanceof eu?so(s.elements,o.elements,pi):s instanceof bh&&o instanceof bh?pi(s.Ae,o.Ae):s instanceof Zl&&o instanceof Zl})(r.transform,e.transform)}class PC{constructor(e,n){this.version=e,this.transformResults=n}}class Wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kh{}function z0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new B0(r.key,Wi.none()):new hu(r.key,r.data,Wi.none());{const n=r.data,s=On.empty();let o=new Nt(Ht.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Ws(r.key,s,new jn(o.toArray()),Wi.none())}}function kC(r,e,n){r instanceof hu?(function(o,u,f){const m=o.value.clone(),p=_E(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Ws?(function(o,u,f){if(!rh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=_E(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(j0(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Hl(r,e,n,s){return r instanceof hu?(function(u,f,m,p){if(!rh(u.precondition,f))return m;const y=u.value.clone(),E=vE(u.fieldTransforms,p,f);return y.setAll(E),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof Ws?(function(u,f,m,p){if(!rh(u.precondition,f))return m;const y=vE(u.fieldTransforms,p,f),E=f.data;return E.setAll(j0(u)),E.setAll(y),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(r,e,n,s):(function(u,f,m){return rh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(r,e,n)}function UC(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=P0(s.transform,o||null);u!=null&&(n===null&&(n=On.empty()),n.set(s.field,u))}return n||null}function yE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&so(s,o,((u,f)=>VC(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hu extends Kh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ws extends Kh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function j0(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function _E(r,e,n){const s=new Map;He(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,xC(f,m,n[o]))}return s}function vE(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,OC(u,f,e))}return s}class B0 extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LC extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&kC(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Hl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Hl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=M0();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=z0(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,((n,s)=>yE(n,s)))&&so(this.baseMutations,e.baseMutations,((n,s)=>yE(n,s)))}}class Tp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){He(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return RC})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Tp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Le;function qC(r){switch(r){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function q0(r){if(r===void 0)return tr("GRPC error has no .code"),te.UNKNOWN;switch(r){case vt.OK:return te.OK;case vt.CANCELLED:return te.CANCELLED;case vt.UNKNOWN:return te.UNKNOWN;case vt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case vt.INTERNAL:return te.INTERNAL;case vt.UNAVAILABLE:return te.UNAVAILABLE;case vt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case vt.NOT_FOUND:return te.NOT_FOUND;case vt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case vt.ABORTED:return te.ABORTED;case vt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case vt.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:r})}}(Le=vt||(vt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Br([4294967295,4294967295],0);function EE(r){const e=HC().encode(r),n=new n0;return n.update(e),new Uint8Array(n.digest())}function TE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Br([n,s],0),new Br([o,u],0)]}class Ap{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new kl(`Invalid padding: ${n}`);if(s<0)throw new kl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new kl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new kl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Br.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Br.fromNumber(s)));return o.compare(FC)===1&&(o=new Br([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=EE(e),[s,o]=TE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Ap(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=EE(e),[s,o]=TE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Qh(Se.min(),o,new at(Me),nr(),Ve())}}class fu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new fu(s,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class H0{constructor(e,n){this.targetId=e,this.Ce=n}}class F0{constructor(e,n,s=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class AE{constructor(){this.ve=0,this.Fe=bE(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),n=Ve(),s=Ve();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:u})}})),new fu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=bE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GC{constructor(e){this.Ge=e,this.ze=new Map,this.je=nr(),this.Je=Yc(),this.He=Yc(),this.Ye=new at(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(zm(u))if(s===0){const f=new ge(u.path);this.et(n,f,Wt.newNoDocument(f,Se.min()))}else He(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),p=m?this.ct(m,e,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Kr(s).toUint8Array()}catch(p){if(p instanceof m0)return ro("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Ap(f,o,u)}catch(p){return ro(p instanceof kl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&zm(m.target)){const p=new ge(m.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Wt.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=Ve();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Qh(e,n,this.Ye,this.je,s);return this.je=nr(),this.Je=Yc(),this.He=Yc(),this.Ye=new at(Me),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new AE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new AE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yc(){return new at(ge.comparator)}function bE(){return new at(ge.comparator)}const YC={asc:"ASCENDING",desc:"DESCENDING"},KC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QC={and:"AND",or:"OR"};class $C{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qm(r,e){return r.useProto3Json||Bh(e)?e:{value:e}}function Sh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function XC(r,e){return Sh(r,e.toTimestamp())}function fi(r){return He(!!r,49232),Se.fromTimestamp((function(n){const s=Yr(n);return new tt(s.seconds,s.nanos)})(r))}function bp(r,e){return Hm(r,e).canonicalString()}function Hm(r,e){const n=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Y0(r){const e=et.fromString(r);return He(W0(e),10190,{key:e.toString()}),e}function Fm(r,e){return bp(r.databaseId,e.path)}function _m(r,e){const n=Y0(e);if(n.get(1)!==r.databaseId.projectId)throw new ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ce(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ge(Q0(n))}function K0(r,e){return bp(r.databaseId,e)}function WC(r){const e=Y0(r);return e.length===4?et.emptyPath():Q0(e)}function Gm(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Q0(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function SE(r,e,n){return{name:Fm(r,e),fields:n.value.mapValue.fields}}function ZC(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(He(E===void 0||typeof E=="string",58123),Gt.fromBase64String(E||"")):(He(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Gt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const E=y.code===void 0?te.UNKNOWN:q0(y.code);return new ce(E,y.message||"")})(f);n=new F0(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=_m(r,s.document.name),u=fi(s.document.updateTime),f=s.document.createTime?fi(s.document.createTime):Se.min(),m=new On({mapValue:{fields:s.document.fields}}),p=Wt.newFoundDocument(o,u,f,m),y=s.targetIds||[],E=s.removedTargetIds||[];n=new sh(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=_m(r,s.document),u=s.readTime?fi(s.readTime):Se.min(),f=Wt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new sh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=_m(r,s.document),u=s.removedTargetIds||[];n=new sh([],u,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new BC(o,u),m=s.targetId;n=new H0(m,f)}}return n}function JC(r,e){let n;if(e instanceof hu)n={update:SE(r,e.key,e.value)};else if(e instanceof B0)n={delete:Fm(r,e.key)};else if(e instanceof Ws)n={update:SE(r,e.key,e.data),updateMask:lN(e.fieldMask)};else{if(!(e instanceof LC))return Te(16599,{Vt:e.type});n={verify:Fm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof Zl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Jl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof eu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof bh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:XC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te(27497)})(r,e.precondition)),n}function eN(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?fi(o.updateTime):fi(u);return f.isEqual(Se.min())&&(f=fi(u)),new PC(f,o.transformResults||[])})(n,e)))):[]}function tN(r,e){return{documents:[K0(r,e.path)]}}function nN(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=K0(r,o);const u=(function(y){if(y.length!==0)return X0(Hn.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((E=>(function(w){return{field:$a(w.field),direction:sN(w.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=qm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function iN(r){let e=WC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){He(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(b){const w=$0(b);return w instanceof Hn&&S0(w)?w.getFilters():[w]})(n.where));let f=[];n.orderBy&&(f=(function(b){return b.map((w=>(function(k){return new Wl(Xa(k.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(w)))})(n.orderBy));let m=null;n.limit&&(m=(function(b){let w;return w=typeof b=="object"?b.value:b,Bh(w)?null:w})(n.limit));let p=null;n.startAt&&(p=(function(b){const w=!!b.before,D=b.values||[];return new Ah(D,w)})(n.startAt));let y=null;return n.endAt&&(y=(function(b){const w=!b.before,D=b.values||[];return new Ah(D,w)})(n.endAt)),TC(e,o,f,u,m,"F",p,y)}function rN(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $0(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Xa(n.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Xa(n.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Xa(n.unaryFilter.field);return Et.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Xa(n.unaryFilter.field);return Et.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Et.create(Xa(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Hn.create(n.compositeFilter.filters.map((s=>$0(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(n.compositeFilter.op))})(r):Te(30097,{filter:r})}function sN(r){return YC[r]}function aN(r){return KC[r]}function oN(r){return QC[r]}function $a(r){return{fieldPath:r.canonicalString()}}function Xa(r){return Ht.fromServerFormat(r.fieldPath)}function X0(r){return r instanceof Et?(function(n){if(n.op==="=="){if(hE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(cE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(cE(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:aN(n.op),value:n.value}}})(r):r instanceof Hn?(function(n){const s=n.getFilters().map((o=>X0(o)));return s.length===1?s[0]:{compositeFilter:{op:oN(n.op),filters:s}}})(r):Te(54877,{filter:r})}function lN(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function W0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,s,o,u=Se.min(),f=Se.min(),m=Gt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.yt=e}}function cN(r){const e=iN({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Bm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.Cn=new fN}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Gr.min())}updateCollectionGroup(e,n,s){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class fN{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Nt(et.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Nt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Z0=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(Z0,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lo(0)}static cr(){return new lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="LruGarbageCollector",dN=1048576;function IE([r,e],[n,s]){const o=Me(r,n);return o===0?Me(e,s):o}class mN{constructor(e){this.Ir=e,this.buffer=new Nt(IE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();IE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pN{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(RE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){po(n)?he(RE,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.Vr(3e5)}))}}class gN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(jh.ce);const s=new mN(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(wE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,f=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(s=b,m=Date.now(),this.removeTargets(e,s,n)))).next((b=>(u=b,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(y=Date.now(),Ka()<=xe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function yN(r,e){return new gN(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.changes=new Xs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ie.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Hl(s.mutation,o,jn.empty(),tt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ve()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ve()){const o=Us();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Pl();return u.forEach(((m,p)=>{f=f.insert(m,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Us();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ve())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=nr();const f=ql(),m=(function(){return ql()})();return n.forEach(((p,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Ws)?u=u.insert(y.key,y):E!==void 0?(f.set(y.key,E.mutation.getFieldMask()),Hl(E.mutation,y,E.mutation.getFieldMask(),tt.now())):f.set(y.key,jn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,E)=>f.set(y,E))),n.forEach(((y,E)=>m.set(y,new vN(E,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=ql();let o=new at(((f,m)=>f-m)),u=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let E=s.get(p)||jn.empty();E=m.applyToLocalView(y,E),s.set(p,E);const b=(o.get(m.batchId)||Ve()).add(p);o=o.insert(m.batchId,b)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,E=p.value,b=M0();E.forEach((w=>{if(!u.has(w)){const D=z0(n.get(w),s.get(w));D!==null&&b.set(w,D),u=u.add(w)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,b))}return ie.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return ge.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ie.resolve(Us());let m=Kl,p=u;return f.next((y=>ie.forEach(y,((E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?ie.resolve():this.remoteDocumentCache.getEntry(e,E).next((w=>{p=p.insert(E,w)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,Ve()))).next((E=>({batchId:m,changes:x0(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next((s=>{let o=Pl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Pl();return this.indexManager.getCollectionParents(e,u).next((m=>ie.forEach(m,(p=>{const y=(function(b,w){return new go(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((E=>{E.forEach(((b,w)=>{f=f.insert(b,w)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((p,y)=>{const E=y.getKey();f.get(E)===null&&(f=f.insert(E,Wt.newInvalidDocument(E)))}));let m=Pl();return f.forEach(((p,y)=>{const E=u.get(p);E!==void 0&&Hl(E.mutation,y,jn.empty(),tt.now()),Gh(n,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:fi(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:cN(o.bundledQuery),readTime:fi(o.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.overlays=new at(ge.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Us();return ie.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ie.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,n,s){const o=Us(),u=n.length+1,f=new ge(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new at(((y,E)=>y-E));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=Us(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=Us(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=o)););return ie.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new jC(n,s));let u=this.qr.get(n);u===void 0&&(u=Ve(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Qr=new Nt(kt.$r),this.Ur=new Nt(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new kt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new kt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ge(new et([])),s=new kt(n,e),o=new kt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new et([])),s=new kt(n,e),o=new kt(n,e+1);let u=Ve();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new kt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(kt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new zC(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(f)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?pp:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new kt(n,0),o=new kt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Nt(Me);return n.forEach((o=>{const u=new kt(o,0),f=new kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ge.isDocumentKey(u)||(u=u.child(""));const f=new kt(new ge(u),0);let m=new Nt(Me);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),f),ie.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(n.mutations,(o=>{const u=new kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new kt(n,0),o=this.Zr.firstAfterOrEqual(s);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.ri=e,this.docs=(function(){return new at(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ie.resolve(s?s.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let s=nr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Wt.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=nr();const f=n.path,m=new ge(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||JI(ZI(E),s)<=0||(o.has(E.key)||Gh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Te(9500)}ii(e,n){return ie.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new RN(this)}getSize(e){return ie.resolve(this.size)}}class RN extends _N{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.persistence=e,this.si=new Xs((n=>_p(n)),vp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Sp,this.targetCount=0,this.ai=lo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new lo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ie.waitFor(u).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ie.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ie.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ie.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ie.resolve(s)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.ui={},this.overlays={},this.ci=new jh(0),this.li=!1,this.li=!0,this.hi=new bN,this.referenceDelegate=e(this),this.Pi=new IN(this),this.indexManager=new hN,this.remoteDocumentCache=(function(o){return new wN(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new uN(n),this.Ii=new TN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new SN(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new CN(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class CN extends tC{constructor(e){super(),this.currentSequenceNumber=e}}class wp{constructor(e){this.persistence=e,this.Ri=new Sp,this.Vi=null}static mi(e){return new wp(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const o=ge.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class wh{constructor(e,n){this.persistence=e,this.pi=new Xs((s=>rC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=yN(this,n)}static mi(e,n){return new wh(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ie.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Se.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nh(e.data.value)),n}br(e,n,s){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ve(),o=Ve();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Rp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sw()?8:nC(Zt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new NN;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Ka()<=xe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Ka()<=xe.DEBUG&&he("QueryEngine","Query:",Qa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Ka()<=xe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):ie.resolve())}ys(e,n){if(pE(n))return ie.resolve(null);let s=hi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Bm(n,null,"F"),s=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Ve(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(n,m);return this.Cs(n,y,f,p.readTime)?this.ys(e,Bm(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,s,o){return pE(n)||o.isEqual(Se.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?ie.resolve(null):(Ka()<=xe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Qa(n)),this.vs(e,f,n,WI(o,Kl)).next((m=>m)))}))}Ds(e,n){let s=new Nt(D0(e));return n.forEach(((o,u)=>{Gh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Ka()<=xe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.ps.getDocumentsMatchingQuery(e,n,Gr.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="LocalStore",ON=3e8;class xN{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new at(Me),this.xs=new Xs((u=>_p(u)),vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function MN(r,e,n,s){return new xN(r,e,n,s)}async function eA(r,e){const n=we(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let p=Ve();for(const y of o){f.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function VN(r,e){const n=we(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,E){const b=y.batch,w=b.keys();let D=ie.resolve();return w.forEach((k=>{D=D.next((()=>E.getEntry(p,k))).next((F=>{const U=y.docVersions.get(k);He(U!==null,48541),F.version.compareTo(U)<0&&(b.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),E.addEntry(F)))}))})),D.next((()=>m.mutationQueue.removeMutationBatch(p,b)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Ve();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function tA(r){const e=we(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function PN(r,e){const n=we(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,b)=>{const w=o.get(b);if(!w)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,b))));let D=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?D=D.withResumeToken(Gt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):E.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(E.resumeToken,s)),o=o.insert(b,D),(function(F,U,B){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=ON?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(w,D,E)&&m.push(n.Pi.updateTargetData(u,D))}));let p=nr(),y=Ve();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(kN(u,f,e.documentUpdates).next((E=>{p=E.ks,y=E.qs}))),!s.isEqual(Se.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((b=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return ie.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function kN(r,e,n){let s=Ve(),o=Ve();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=nr();return n.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):he(Ip,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function UN(r,e){const n=we(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=pp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function LN(r,e){const n=we(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ie.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new Lr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Ym(r,e,n){const s=we(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!po(f))throw f;he(Ip,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function CE(r,e,n){const s=we(r);let o=Se.min(),u=Ve();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,y,E){const b=we(p),w=b.xs.get(E);return w!==void 0?ie.resolve(b.Ms.get(w)):b.Pi.getTargetData(y,E)})(s,f,hi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Se.min(),n?u:Ve()))).next((m=>(zN(s,bC(e),m),{documents:m,Qs:u})))))}function zN(r,e,n){let s=r.Os.get(e)||Se.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class NE{constructor(){this.activeTargetIds=NC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jN{constructor(){this.Mo=new NE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new NE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="ConnectivityMonitor";class OE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(DE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(DE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc=null;function Km(){return Kc===null?Kc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kc++,"0x"+Kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="RestConnection",qN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Eh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=Km(),m=this.zo(e,n.toUriEncodedString());he(vm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),E=Ys(y);return this.Jo(e,m,p,s,E).then((b=>(he(vm,`Received RPC '${e}' ${f}: `,b),b)),(b=>{throw ro(vm,`RPC '${e}' ${f} failed with error: `,b,"url: ",m,"request:",s),b}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=qN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class GN extends HN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=Km();return new Promise(((m,p)=>{const y=new i0;y.setWithCredentials(!0),y.listenOnce(r0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case th.NO_ERROR:const b=y.getResponseJson();he($t,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(b)),m(b);break;case th.TIMEOUT:he($t,`RPC '${e}' ${f} timed out`),p(new ce(te.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const w=y.getStatus();if(he($t,`RPC '${e}' ${f} failed with status:`,w,"response text:",y.getResponseText()),w>0){let D=y.getResponseJson();Array.isArray(D)&&(D=D[0]);const k=D?.error;if(k&&k.status&&k.message){const F=(function(B){const W=B.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(W)>=0?W:te.UNKNOWN})(k.status);p(new ce(F,k.message))}else p(new ce(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ce(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he($t,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(o);he($t,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=Km(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=o0(),m=a0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");he($t,`Creating RPC '${e}' stream ${o}: ${E}`,p);const b=f.createWebChannel(E,p);this.I_(b);let w=!1,D=!1;const k=new FN({Yo:U=>{D?he($t,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(w||(he($t,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),he($t,`RPC '${e}' stream ${o} sending:`,U),b.send(U))},Zo:()=>b.close()}),F=(U,B,W)=>{U.listen(B,(se=>{try{W(se)}catch(I){setTimeout((()=>{throw I}),0)}}))};return F(b,Vl.EventType.OPEN,(()=>{D||(he($t,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),F(b,Vl.EventType.CLOSE,(()=>{D||(D=!0,he($t,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(b))})),F(b,Vl.EventType.ERROR,(U=>{D||(D=!0,ro($t,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),k.a_(new ce(te.UNAVAILABLE,"The operation could not be completed")))})),F(b,Vl.EventType.MESSAGE,(U=>{if(!D){const B=U.data[0];He(!!B,16349);const W=B,se=W?.error||W[0]?.error;if(se){he($t,`RPC '${e}' stream ${o} received error:`,se);const I=se.status;let L=(function(S){const R=vt[S];if(R!==void 0)return q0(R)})(I),de=se.message;L===void 0&&(L=te.INTERNAL,de="Unknown error status: "+I+" with message "+se.message),D=!0,k.a_(new ce(L,de)),b.close()}else he($t,`RPC '${e}' stream ${o} received:`,B),k.u_(B)}})),F(m,s0.STAT_EVENT,(U=>{U.stat===Vm.PROXY?he($t,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Vm.NOPROXY&&he($t,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(r){return new $C(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="PersistentStream";class iA{constructor(e,n,s,o,u,f,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ce(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(xE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(xE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YN extends iA{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZC(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Se.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Se.min():f.readTime?fi(f.readTime):Se.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Gm(this.serializer),n.addTarget=(function(u,f){let m;const p=f.target;if(m=zm(p)?{documents:tN(u,p)}:{query:nN(u,p).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=G0(u,f.resumeToken);const y=qm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Se.min())>0){m.readTime=Sh(u,f.snapshotVersion.toTimestamp());const y=qm(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=rN(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Gm(this.serializer),n.removeTarget=e,this.q_(n)}}class KN extends iA{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=eN(e.writeResults,e.commitTime),s=fi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Gm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>JC(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{}class $N extends QN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Hm(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(te.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,Hm(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(te.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class XN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tr(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class WN{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Zs(this)&&(he(Gs,"Restarting streams for network reachability change."),await(async function(p){const y=we(p);y.Ea.add(4),await du(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Xh(y)})(this))}))})),this.Ra=new XN(s,o)}}async function Xh(r){if(Zs(r))for(const e of r.da)await e(!0)}async function du(r){for(const e of r.da)await e(!1)}function rA(r,e){const n=we(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Op(n)?Dp(n):yo(n).O_()&&Np(n,e))}function Cp(r,e){const n=we(r),s=yo(n);n.Ia.delete(e),s.O_()&&sA(n,e),n.Ia.size===0&&(s.O_()?s.L_():Zs(n)&&n.Ra.set("Unknown"))}function Np(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(r).Y_(e)}function sA(r,e){r.Va.Ue(e),yo(r).Z_(e)}function Dp(r){r.Va=new GC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),yo(r).start(),r.Ra.ua()}function Op(r){return Zs(r)&&!yo(r).x_()&&r.Ia.size>0}function Zs(r){return we(r).Ea.size===0}function aA(r){r.Va=void 0}async function ZN(r){r.Ra.set("Online")}async function JN(r){r.Ia.forEach(((e,n)=>{Np(r,e)}))}async function e2(r,e){aA(r),Op(r)?(r.Ra.ha(e),Dp(r)):r.Ra.set("Unknown")}async function t2(r,e,n){if(r.Ra.set("Online"),e instanceof F0&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){he(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Rh(r,s)}else if(e instanceof sh?r.Va.Ze(e):e instanceof H0?r.Va.st(e):r.Va.tt(e),!n.isEqual(Se.min()))try{const s=await tA(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(p.resumeToken,f))}})),m.targetMismatches.forEach(((p,y)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(Gt.EMPTY_BYTE_STRING,E.snapshotVersion)),sA(u,p);const b=new Lr(E.target,p,y,E.sequenceNumber);Np(u,b)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){he(Gs,"Failed to raise snapshot:",s),await Rh(r,s)}}async function Rh(r,e,n){if(!po(e))throw e;r.Ea.add(1),await du(r),r.Ra.set("Offline"),n||(n=()=>tA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(Gs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Xh(r)}))}function oA(r,e){return e().catch((n=>Rh(r,n,e)))}async function Wh(r){const e=we(r),n=$r(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pp;for(;n2(e);)try{const o=await UN(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,i2(e,o)}catch(o){await Rh(e,o)}lA(e)&&uA(e)}function n2(r){return Zs(r)&&r.Ta.length<10}function i2(r,e){r.Ta.push(e);const n=$r(r);n.O_()&&n.X_&&n.ea(e.mutations)}function lA(r){return Zs(r)&&!$r(r).x_()&&r.Ta.length>0}function uA(r){$r(r).start()}async function r2(r){$r(r).ra()}async function s2(r){const e=$r(r);for(const n of r.Ta)e.ea(n.mutations)}async function a2(r,e,n){const s=r.Ta.shift(),o=Tp.from(s,e,n);await oA(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Wh(r)}async function o2(r,e){e&&$r(r).X_&&await(async function(s,o){if((function(f){return qC(f)&&f!==te.ABORTED})(o.code)){const u=s.Ta.shift();$r(s).B_(),await oA(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Wh(s)}})(r,e),lA(r)&&uA(r)}async function ME(r,e){const n=we(r);n.asyncQueue.verifyOperationInProgress(),he(Gs,"RemoteStore received new credentials");const s=Zs(n);n.Ea.add(3),await du(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xh(n)}async function l2(r,e){const n=we(r);e?(n.Ea.delete(2),await Xh(n)):e||(n.Ea.add(2),await du(n),n.Ra.set("Unknown"))}function yo(r){return r.ma||(r.ma=(function(n,s,o){const u=we(n);return u.sa(),new YN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:ZN.bind(null,r),t_:JN.bind(null,r),r_:e2.bind(null,r),H_:t2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Op(r)?Dp(r):r.Ra.set("Unknown")):(await r.ma.stop(),aA(r))}))),r.ma}function $r(r){return r.fa||(r.fa=(function(n,s,o){const u=we(n);return u.sa(),new KN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:r2.bind(null,r),r_:o2.bind(null,r),ta:s2.bind(null,r),na:a2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Wh(r)):(await r.fa.stop(),r.Ta.length>0&&(he(Gs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new xp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mp(r,e){if(tr("AsyncQueue",`${e}: ${r}`),po(r))return new ce(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{static emptySet(e){return new no(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ge.comparator(n.key,s.key):(n,s)=>ge.comparator(n.key,s.key),this.keyedMap=Pl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new no;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.ga=new at(ge.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class uo{constructor(e,n,s,o,u,f,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new uo(e,n,no.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class c2{constructor(){this.queries=PE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=we(n),u=o.queries;o.queries=PE(),u.forEach(((f,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new ce(te.ABORTED,"Firestore shutting down"))}}function PE(){return new Xs((r=>N0(r)),Fh)}async function cA(r,e){const n=we(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new u2,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Mp(f,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Vp(n)}async function hA(r,e){const n=we(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function h2(r,e){const n=we(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&Vp(n)}function f2(r,e,n){const s=we(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Vp(r){r.Ca.forEach((e=>{e.next()}))}var Qm,kE;(kE=Qm||(Qm={})).Ma="default",kE.Cache="cache";class fA{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new uo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.key=e}}class mA{constructor(e){this.key=e}}class d2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=D0(e),this.tu=new no(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new VE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,b)=>{const w=o.get(E),D=Gh(this.query,b)?b:null,k=!!w&&this.mutatedKeys.has(w.key),F=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;w&&D?w.data.isEqual(D.data)?k!==F&&(s.track({type:3,doc:D}),U=!0):this.su(w,D)||(s.track({type:2,doc:D}),U=!0,(p&&this.eu(D,p)>0||y&&this.eu(D,y)<0)&&(m=!0)):!w&&D?(s.track({type:0,doc:D}),U=!0):w&&!D&&(s.track({type:1,doc:w}),U=!0,(p||y)&&(m=!0)),U&&(D?(f=f.add(D),u=F?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,b)=>(function(D,k){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:U})}};return F(D)-F(k)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new uo(this.query,e.tu,u,f,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new mA(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new dA(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ve();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pp="SyncEngine";class m2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class p2{constructor(e){this.key=e,this.hu=!1}}class g2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Xs((m=>N0(m)),Fh),this.Iu=new Map,this.Eu=new Set,this.du=new at(ge.comparator),this.Au=new Map,this.Ru=new Sp,this.Vu={},this.mu=new Map,this.fu=lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y2(r,e,n=!0){const s=EA(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await pA(s,e,n,!0),o}async function _2(r,e){const n=EA(r);await pA(n,e,!0,!1)}async function pA(r,e,n,s){const o=await LN(r.localStore,hi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await v2(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&rA(r.remoteStore,o),m}async function v2(r,e,n,s,o){r.pu=(b,w,D)=>(async function(F,U,B,W){let se=U.view.ru(B);se.Cs&&(se=await CE(F.localStore,U.query,!1).then((({documents:O})=>U.view.ru(O,se))));const I=W&&W.targetChanges.get(U.targetId),L=W&&W.targetMismatches.get(U.targetId)!=null,de=U.view.applyChanges(se,F.isPrimaryClient,I,L);return LE(F,U.targetId,de.au),de.snapshot})(r,b,w,D);const u=await CE(r.localStore,e,!0),f=new d2(e,u.Qs),m=f.ru(u.documents),p=fu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=f.applyChanges(m,r.isPrimaryClient,p);LE(r,n,y.au);const E=new m2(e,n,f);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function E2(r,e,n){const s=we(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!Fh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Ym(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Cp(s.remoteStore,o.targetId),$m(s,o.targetId)})).catch(mo)):($m(s,o.targetId),await Ym(s.localStore,o.targetId,!0))}async function T2(r,e){const n=we(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Cp(n.remoteStore,s.targetId))}async function A2(r,e,n){const s=N2(r);try{const o=await(function(f,m){const p=we(f),y=tt.now(),E=m.reduce(((D,k)=>D.add(k.key)),Ve());let b,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let k=nr(),F=Ve();return p.Ns.getEntries(D,E).next((U=>{k=U,k.forEach(((B,W)=>{W.isValidDocument()||(F=F.add(B))}))})).next((()=>p.localDocuments.getOverlayedDocuments(D,k))).next((U=>{b=U;const B=[];for(const W of m){const se=UC(W,b.get(W.key).overlayedDocument);se!=null&&B.push(new Ws(W.key,se,T0(se.value.mapValue),Wi.exists(!0)))}return p.mutationQueue.addMutationBatch(D,y,B,m)})).next((U=>{w=U;const B=U.applyToLocalDocumentSet(b,F);return p.documentOverlayCache.saveOverlays(D,U.batchId,B)}))})).then((()=>({batchId:w.batchId,changes:x0(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new at(Me)),y=y.insert(m,p),f.Vu[f.currentUser.toKey()]=y})(s,o.batchId,n),await mu(s,o.changes),await Wh(s.remoteStore)}catch(o){const u=Mp(o,"Failed to persist write");n.reject(u)}}async function gA(r,e){const n=we(r);try{const s=await PN(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?He(f.hu,14607):o.removedDocuments.size>0&&(He(f.hu,42227),f.hu=!1))})),await mu(n,s,e)}catch(s){await mo(s)}}function UE(r,e,n){const s=we(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const p=we(f);p.onlineState=m;let y=!1;p.queries.forEach(((E,b)=>{for(const w of b.Sa)w.va(m)&&(y=!0)})),y&&Vp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function b2(r,e,n){const s=we(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new at(ge.comparator);f=f.insert(u,Wt.newNoDocument(u,Se.min()));const m=Ve().add(u),p=new Qh(Se.min(),new Map,new at(Me),f,m);await gA(s,p),s.du=s.du.remove(u),s.Au.delete(e),kp(s)}else await Ym(s.localStore,e,!1).then((()=>$m(s,e,n))).catch(mo)}async function S2(r,e){const n=we(r),s=e.batch.batchId;try{const o=await VN(n.localStore,e);_A(n,s,null),yA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await mu(n,o)}catch(o){await mo(o)}}async function w2(r,e,n){const s=we(r);try{const o=await(function(f,m){const p=we(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return p.mutationQueue.lookupMutationBatch(y,m).next((b=>(He(b!==null,37113),E=b.keys(),p.mutationQueue.removeMutationBatch(y,b)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>p.localDocuments.getDocuments(y,E)))}))})(s.localStore,e);_A(s,e,n),yA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await mu(s,o)}catch(o){await mo(o)}}function yA(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function _A(r,e,n){const s=we(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function $m(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||vA(r,s)}))}function vA(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Cp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),kp(r))}function LE(r,e,n){for(const s of n)s instanceof dA?(r.Ru.addReference(s.key,e),R2(r,s)):s instanceof mA?(he(Pp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||vA(r,s.key)):Te(19791,{wu:s})}function R2(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(he(Pp,"New document in limbo: "+n),r.Eu.add(s),kp(r))}function kp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ge(et.fromString(e)),s=r.fu.next();r.Au.set(s,new p2(n)),r.du=r.du.insert(n,s),rA(r.remoteStore,new Lr(hi(Hh(n.path)),s,"TargetPurposeLimboResolution",jh.ce))}}async function mu(r,e,n){const s=we(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{f.push(s.pu(p,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const E=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Rp.As(p.targetId,y);u.push(E)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(p,y){const E=we(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ie.forEach(y,(w=>ie.forEach(w.Es,(D=>E.persistence.referenceDelegate.addReference(b,w.targetId,D))).next((()=>ie.forEach(w.ds,(D=>E.persistence.referenceDelegate.removeReference(b,w.targetId,D)))))))))}catch(b){if(!po(b))throw b;he(Ip,"Failed to update sequence numbers: "+b)}for(const b of y){const w=b.targetId;if(!b.fromCache){const D=E.Ms.get(w),k=D.snapshotVersion,F=D.withLastLimboFreeSnapshotVersion(k);E.Ms=E.Ms.insert(w,F)}}})(s.localStore,u))}async function I2(r,e){const n=we(r);if(!n.currentUser.isEqual(e)){he(Pp,"User change. New user:",e.toKey());const s=await eA(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new ce(te.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await mu(n,s.Ls)}}function C2(r,e){const n=we(r),s=n.Au.get(e);if(s&&s.hu)return Ve().add(s.key);{let o=Ve();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function EA(r){const e=we(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b2.bind(null,e),e.Pu.H_=h2.bind(null,e.eventManager),e.Pu.yu=f2.bind(null,e.eventManager),e}function N2(r){const e=we(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w2.bind(null,e),e}class Ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MN(this.persistence,new DN,e.initialUser,this.serializer)}Cu(e){return new J0(wp.mi,this.serializer)}Du(e){return new jN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ih.provider={build:()=>new Ih};class D2 extends Ih{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof wh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new pN(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new J0((s=>wh.mi(s,n)),this.serializer)}}class Xm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>UE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=I2.bind(null,this.syncEngine),await l2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new c2})()}createDatastore(e){const n=$h(e.databaseInfo.databaseId),s=(function(u){return new GN(u)})(e.databaseInfo);return(function(u,f,m,p){return new $N(u,f,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new WN(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>UE(this.syncEngine,n,0)),(function(){return OE.v()?new OE:new BN})())}createSyncEngine(e,n){return(function(o,u,f,m,p,y,E){const b=new g2(o,u,f,m,p,y);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=we(n);he(Gs,"RemoteStore shutting down."),s.Ea.add(5),await du(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xm.provider={build:()=>new Xm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="FirestoreClient";class O2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{he(Xr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(he(Xr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Mp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Tm(r,e){r.asyncQueue.verifyOperationInProgress(),he(Xr,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await eA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function zE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await x2(r);he(Xr,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>ME(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>ME(e.remoteStore,o))),r._onlineComponents=e}async function x2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(Xr,"Using user provided OfflineComponentProvider");try{await Tm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ro("Error using user provided cache. Falling back to memory cache: "+n),await Tm(r,new Ih)}}else he(Xr,"Using default OfflineComponentProvider"),await Tm(r,new D2(void 0));return r._offlineComponents}async function AA(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(Xr,"Using user provided OnlineComponentProvider"),await zE(r,r._uninitializedComponentsProvider._online)):(he(Xr,"Using default OnlineComponentProvider"),await zE(r,new Xm))),r._onlineComponents}function M2(r){return AA(r).then((e=>e.syncEngine))}async function Wm(r){const e=await AA(r),n=e.eventManager;return n.onListen=y2.bind(null,e.syncEngine),n.onUnlisten=E2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=T2.bind(null,e.syncEngine),n}function V2(r,e,n={}){const s=new qr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,p,y){const E=new TA({next:w=>{E.Nu(),f.enqueueAndForget((()=>hA(u,b)));const D=w.docs.has(m);!D&&w.fromCache?y.reject(new ce(te.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&w.fromCache&&p&&p.source==="server"?y.reject(new ce(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),b=new fA(Hh(m.path),E,{includeMetadataChanges:!0,qa:!0});return cA(u,b)})(await Wm(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firestore.googleapis.com",BE=!0;class qE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SA,this.ssl=BE}else this.host=e.host,this.ssl=e.ssl??BE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Z0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dN)throw new ce(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new jI;switch(s.type){case"firstParty":return new FI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=jE.get(n);s&&(he("ComponentProvider","Removing Datastore"),jE.delete(n),s.terminate())})(this),Promise.resolve()}}function P2(r,e,n,s={}){r=Ls(r,Zh);const o=Ys(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(ep(`https://${m}`),tp("Firestore",!0)),u.host!==SA&&u.host!==m&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!js(p,f)&&(r._setSettings(p),s.mockUserToken)){let y,E;if(typeof s.mockUserToken=="string")y=s.mockUserToken,E=Xt.MOCK_USER;else{y=gT(s.mockUserToken,r._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new ce(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xt(b)}r._authCredentials=new BI(new u0(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class At{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(cu(n,At._jsonSchema))return new At(e,s||null,new ge(et.fromString(n.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Tt("string",At._jsonSchemaVersion),referencePath:Tt("string")};class Hr extends Js{constructor(e,n,s){super(e,n,Hh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ge(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function Ch(r,e,...n){if(r=Ft(r),c0("collection","path",e),r instanceof Zh){const s=et.fromString(e,...n);return tE(s),new Hr(r,null,s)}{if(!(r instanceof At||r instanceof Hr))throw new ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...n));return tE(s),new Hr(r.firestore,null,s)}}function wA(r,e,...n){if(r=Ft(r),arguments.length===1&&(e=mp.newId()),c0("doc","path",e),r instanceof Zh){const s=et.fromString(e,...n);return eE(s),new At(r,null,new ge(s))}{if(!(r instanceof At||r instanceof Hr))throw new ce(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...n));return eE(s),new At(r.firestore,r instanceof Hr?r.converter:null,new ge(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="AsyncQueue";class FE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nA(this,"async_queue_retry"),this._c=()=>{const s=Em();s&&he(HE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Em();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Em();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!po(e))throw e;he(HE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,tr("INTERNAL UNHANDLED ERROR: ",GE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=xp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:GE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function GE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class tu extends Zh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new FE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FE(e),this._firestoreClient=void 0,await e}}}function k2(r,e){const n=typeof r=="object"?r:rp(),s=typeof r=="string"?r:Eh,o=Ph(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=dT("firestore");u&&P2(o,...u)}return o}function Up(r){if(r._terminated)throw new ce(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||U2(r),r._firestoreClient}function U2(r){const e=r._freezeSettings(),n=(function(o,u,f,m){return new oC(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,bA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new O2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xn(Gt.fromBase64String(e))}catch(n){throw new ce(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cu(e,xn._jsonSchema))return xn.fromBase64String(e.bytes)}}xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:Tt("string",xn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(cu(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Tt("string",di._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cu(e,mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mi(e.vectorValues);throw new ce(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Tt("string",mi._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=/^__.*__$/;class z2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}function RA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class jp{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(RA(this.Ac)&&L2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||$h(e)}Cc(e,n,s,o=!1){return new jp({Ac:e,methodName:n,Dc:s,path:Ht.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IA(r){const e=r._freezeSettings(),n=$h(r._databaseId);return new j2(r._databaseId,!!e.ignoreUndefinedProperties,n)}function B2(r,e,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);DA("Data must be an object, but it was:",f,s);const m=CA(s,f);let p,y;if(u.merge)p=new jn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const w=H2(e,b,n);if(!f.contains(w))throw new ce(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);G2(E,w)||E.push(w)}p=new jn(E),y=f.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,y=f.fieldTransforms;return new z2(new On(m),p,y)}class Bp extends zp{_toFieldTransform(e){return new MC(e.path,new Zl)}isEqual(e){return e instanceof Bp}}function q2(r,e,n,s=!1){return qp(n,r.Cc(s?4:3,e))}function qp(r,e){if(NA(r=Ft(r)))return DA("Unsupported field value:",e,r),CA(r,e);if(r instanceof zp)return(function(s,o){if(!RA(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let p=qp(m,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=Ft(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return DC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=tt.fromDate(s);return{timestampValue:Sh(o.serializer,u)}}if(s instanceof tt){const u=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Sh(o.serializer,u)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof xn)return{bytesValue:G0(o.serializer,s._byteString)};if(s instanceof At){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:bp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof mi)return(function(f,m){return{mapValue:{fields:{[v0]:{stringValue:E0},[Th]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Ep(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${zh(s)}`)})(r,e)}function CA(r,e){const n={};return d0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(r,((s,o)=>{const u=qp(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function NA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof di||r instanceof xn||r instanceof At||r instanceof zp||r instanceof mi)}function DA(r,e,n){if(!NA(n)||!h0(n)){const s=zh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function H2(r,e,n){if((e=Ft(e))instanceof Lp)return e._internalPath;if(typeof e=="string")return OA(r,e);throw Nh("Field path arguments must be of type string or ",r,!1,void 0,n)}const F2=new RegExp("[~\\*/\\[\\]]");function OA(r,e,n){if(e.search(F2)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Lp(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Nh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new ce(te.INVALID_ARGUMENT,m+r+p)}function G2(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y2 extends xA{data(){return super.data()}}function Jh(r,e){return typeof e=="string"?OA(r,e):e instanceof Lp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hp{}class MA extends Hp{}function VA(r,e,...n){let s=[];e instanceof Hp&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((p=>p instanceof Fp)).length,m=u.filter((p=>p instanceof ef)).length;if(f>1||f>0&&m>0)throw new ce(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class ef extends MA{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ef(e,n,s)}_apply(e){const n=this._parse(e);return PA(e._query,n),new Js(e.firestore,e.converter,jm(e._query,n))}_parse(e){const n=IA(e.firestore);return(function(u,f,m,p,y,E,b){let w;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){QE(b,E);const k=[];for(const F of b)k.push(KE(p,u,F));w={arrayValue:{values:k}}}else w=KE(p,u,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||QE(b,E),w=q2(m,f,b,E==="in"||E==="not-in");return Et.create(y,E,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Q2(r,e,n){const s=e,o=Jh("where",r);return ef._create(o,s,n)}class Fp extends Hp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)PA(f,p),f=jm(f,p)})(e._query,n),new Js(e.firestore,e.converter,jm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gp extends MA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gp(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new ce(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(u,f)})(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new go(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function $2(r,e="asc"){const n=e,s=Jh("orderBy",r);return Gp._create(s,n)}function KE(r,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new ce(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C0(e)&&n.indexOf("/")!==-1)throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(et.fromString(n));if(!ge.isDocumentKey(s))throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uE(r,new ge(s))}if(n instanceof At)return uE(r,n._key);throw new ce(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zh(n)}.`)}function QE(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PA(r,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class X2{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return $s(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Th].arrayValue?.values?.map((s=>mt(s.doubleValue)));return new mi(n)}convertGeoPoint(e){return new di(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=qh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=et.fromString(e);He(W0(s),9688,{name:e});const o=new $l(s.get(1),s.get(3)),u=new ge(s.popFirst(5));return o.isEqual(n)||tr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(r,e,n){let s;return s=r?r.toFirestore(e):e,s}class Ul{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zs extends xA{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Jh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:Tt("string",zs._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class ah extends zs{data(e={}){return super.data(e)}}class io{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ul(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new ah(this._firestore,this._userDataWriter,s.key,s,new Ul(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const p=new ah(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ul(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new ah(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ul(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:Z2(m.type),doc:p,oldIndex:y,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Z2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(r){r=Ls(r,At);const e=Ls(r.firestore,tu);return V2(Up(e),r._key).then((n=>zA(e,r,n)))}io._jsonSchemaVersion="firestore/querySnapshot/1.0",io._jsonSchema={type:Tt("string",io._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class kA extends X2{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function UA(r,e){const n=Ls(r.firestore,tu),s=wA(r),o=W2(r.converter,e);return eD(n,[B2(IA(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Wi.exists(!1))]).then((()=>s))}function LA(r,...e){r=Ft(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||YE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(YE(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,f,m;if(r instanceof At)f=Ls(r.firestore,tu),m=Hh(r._key.path),u={next:p=>{e[s]&&e[s](zA(f,r,p))},error:e[s+1],complete:e[s+2]};else{const p=Ls(r,Js);f=Ls(p.firestore,tu),m=p._query;const y=new kA(f);u={next:E=>{e[s]&&e[s](new io(f,y,p,E))},error:e[s+1],complete:e[s+2]},K2(r._query)}return(function(y,E,b,w){const D=new TA(w),k=new fA(E,D,b);return y.asyncQueue.enqueueAndForget((async()=>cA(await Wm(y),k))),()=>{D.Nu(),y.asyncQueue.enqueueAndForget((async()=>hA(await Wm(y),k)))}})(Up(f),m,o,u)}function eD(r,e){return(function(s,o){const u=new qr;return s.asyncQueue.enqueueAndForget((async()=>A2(await M2(s),o,u))),u.promise})(Up(r),e)}function zA(r,e,n){const s=n.docs.get(e._key),o=new kA(r);return new zs(r,o,e._key,s,new Ul(n.hasPendingWrites,n.fromCache),e.converter)}function jA(){return new Bp("serverTimestamp")}(function(e,n=!0){(function(o){fo=o})(Ks),Bs(new Fr("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new tu(new qI(s.getProvider("auth-internal")),new GI(f,s.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(y.options.projectId,E)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),li(Xv,Wv,e),li(Xv,Wv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebasestorage.googleapis.com",tD="storageBucket",nD=120*1e3,iD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends _i{constructor(e,n,s=0){super(Am(e),`Firebase Storage: ${n} (${Am(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Am(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gi;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gi||(gi={}));function Am(r){return"storage/"+r}function rD(){const r="An unknown error occurred, please check the error payload for server response.";return new vi(gi.UNKNOWN,r)}function sD(){return new vi(gi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aD(){return new vi(gi.CANCELED,"User canceled the upload/download.")}function oD(r){return new vi(gi.INVALID_URL,"Invalid URL '"+r+"'.")}function lD(r){return new vi(gi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function $E(r){return new vi(gi.INVALID_ARGUMENT,r)}function qA(){return new vi(gi.APP_DELETED,"The Firebase app was deleted.")}function uD(r){return new vi(gi.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Bn.makeFromUrl(e,n)}catch{return new Bn(e,"")}if(s.path==="")return s;throw lD(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),p={bucket:1,path:3};function y(I){I.path_=decodeURIComponent(I.path)}const E="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",D=new RegExp(`^https?://${b}/${E}/b/${o}/o${w}`,"i"),k={bucket:1,path:3},F=n===BA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",B=new RegExp(`^https?://${F}/${o}/${U}`,"i"),se=[{regex:m,indices:p,postModify:u},{regex:D,indices:k,postModify:y},{regex:B,indices:{bucket:1,path:2},postModify:y}];for(let I=0;I<se.length;I++){const L=se[I],de=L.regex.exec(e);if(de){const O=de[L.indices.bucket];let S=de[L.indices.path];S||(S=""),s=new Bn(O,S),L.postModify(s);break}}if(s==null)throw oD(e);return s}}class cD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(r,e,n){let s=1,o=null,u=null,f=!1,m=0;function p(){return m===2}let y=!1;function E(...U){y||(y=!0,e.apply(null,U))}function b(U){o=setTimeout(()=>{o=null,r(D,p())},U)}function w(){u&&clearTimeout(u)}function D(U,...B){if(y){w();return}if(U){w(),E.call(null,U,...B);return}if(p()||f){w(),E.call(null,U,...B);return}s<64&&(s*=2);let se;m===1?(m=2,se=0):se=(s+Math.random())*1e3,b(se)}let k=!1;function F(U){k||(k=!0,w(),!y&&(o!==null?(U||(m=2),clearTimeout(o),b(0)):U||(m=1)))}return b(0),u=setTimeout(()=>{f=!0,F(!0)},n),F}function fD(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(r){return r!==void 0}function XE(r,e,n,s){if(s<e)throw $E(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw $E(`Invalid value for '${r}'. Expected ${n} or less.`)}function mD(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Dh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Dh||(Dh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n,s,o,u,f,m,p,y,E,b,w=!0,D=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=b,this.retry=w,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,F)=>{this.resolve_=k,this.reject_=F,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Qc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const p=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===Dh.NO_ERROR,p=u.getStatus();if(!m||pD(p,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===Dh.ABORT;s(!1,new Qc(!1,null,E));return}const y=this.successCodes_.indexOf(p)!==-1;s(!0,new Qc(y,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());dD(p)?u(p):u()}catch(p){f(p)}else if(m!==null){const p=rD();p.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,p)):f(p)}else if(o.canceled){const p=this.appDelete_?qA():aD();f(p)}else{const p=sD();f(p)}};this.canceled_?n(!1,new Qc(!1,null,!0)):this.backoffId_=hD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qc{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function yD(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function _D(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vD(r,e){e&&(r["X-Firebase-GMPID"]=e)}function ED(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function TD(r,e,n,s,o,u,f=!0,m=!1){const p=mD(r.urlParams),y=r.url+p,E=Object.assign({},r.headers);return vD(E,e),yD(E,n),_D(E,u),ED(E,s),new gD(y,r.method,E,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function bD(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this._service=e,n instanceof Bn?this._location=n:this._location=Bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Oh(e,n)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bD(this._location.path)}get storage(){return this._service}get parent(){const e=AD(this._location.path);if(e===null)return null;const n=new Bn(this._location.bucket,e);return new Oh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw uD(e)}}function WE(r,e){const n=e?.[tD];return n==null?null:Bn.makeFromBucketSpec(n,r)}function SD(r,e,n,s={}){r.host=`${e}:${n}`;const o=Ys(e);o&&(ep(`https://${r.host}/b`),tp("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(r._overrideAuthToken=typeof u=="string"?u:gT(u,r.app.options.projectId))}class wD{constructor(e,n,s,o,u,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=BA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nD,this._maxUploadRetryTime=iD,this._requests=new Set,o!=null?this._bucket=Bn.makeFromBucketSpec(o,this._host):this._bucket=WE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=WE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oh(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new cD(qA());{const f=TD(e,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const ZE="@firebase/storage",JE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="storage";function RD(r=rp(),e){r=Ft(r);const s=Ph(r,HA).getImmediate({identifier:e}),o=dT("storage");return o&&ID(s,...o),s}function ID(r,e,n,s={}){SD(r,e,n,s)}function CD(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new wD(n,s,o,e,Ks)}function ND(){Bs(new Fr(HA,CD,"PUBLIC").setMultipleInstances(!0)),li(ZE,JE,""),li(ZE,JE,"esm2020")}ND();const DD={apiKey:"AIzaSyARGB45X-BLofb8__UXaQC_Bui1iJ-P-9k",authDomain:"tienda-productos-cb0d2.firebaseapp.com",projectId:"tienda-productos-cb0d2",storageBucket:"tienda-productos-cb0d2.firebasestorage.app",appId:"1:961946163519:web:6dda0caf8ef3bd26a69b8a"},Yp=vT(DD),$c=kI(Yp),nu=k2(Yp);RD(Yp);const FA=X.createContext(null),_o=()=>X.useContext(FA);function OD({children:r}){const[e,n]=X.useState(null),[s,o]=X.useState(!0);X.useEffect(()=>S1($c,p=>{n(p),o(!1)}),[]);const u=(p,y)=>T1($c,p,y),f=(p,y)=>E1($c,p,y),m=()=>w1($c);return Y.jsx(FA.Provider,{value:{user:e,login:u,register:f,logout:m,loading:s},children:!s&&r})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var eT="popstate";function xD(r={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return Zm("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:iu(o)}return VD(e,n,null,r)}function st(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function yi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MD(){return Math.random().toString(36).substring(2,10)}function tT(r,e){return{usr:r.state,key:r.key,idx:e}}function Zm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?vo(e):e,state:n,key:e&&e.key||s||MD()}}function iu({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function vo(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function VD(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,y=E();y==null&&(y=0,f.replaceState({...f.state,idx:y},""));function E(){return(f.state||{idx:null}).idx}function b(){m="POP";let U=E(),B=U==null?null:U-y;y=U,p&&p({action:m,location:F.location,delta:B})}function w(U,B){m="PUSH";let W=Zm(F.location,U,B);y=E()+1;let se=tT(W,y),I=F.createHref(W);try{f.pushState(se,"",I)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;o.location.assign(I)}u&&p&&p({action:m,location:F.location,delta:1})}function D(U,B){m="REPLACE";let W=Zm(F.location,U,B);y=E();let se=tT(W,y),I=F.createHref(W);f.replaceState(se,"",I),u&&p&&p({action:m,location:F.location,delta:0})}function k(U){return PD(U)}let F={get action(){return m},get location(){return r(o,f)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(eT,b),p=U,()=>{o.removeEventListener(eT,b),p=null}},createHref(U){return e(o,U)},createURL:k,encodeLocation(U){let B=k(U);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:w,replace:D,go(U){return f.go(U)}};return F}function PD(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),st(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:iu(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function GA(r,e,n="/"){return kD(r,e,n,!1)}function kD(r,e,n,s){let o=typeof e=="string"?vo(e):e,u=ir(o.pathname||"/",n);if(u==null)return null;let f=YA(r);UD(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let y=QD(u);m=YD(f[p],y,s)}return m}function YA(r,e=[],n=[],s="",o=!1){let u=(f,m,p=o,y)=>{let E={relativePath:y===void 0?f.path||"":y,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&p)return;st(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let b=Zi([s,E.relativePath]),w=n.concat(E);f.children&&f.children.length>0&&(st(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),YA(f.children,e,w,b,p)),!(f.path==null&&!f.index)&&e.push({path:b,score:FD(b,f.index),routesMeta:w})};return r.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of KA(f.path))u(f,m,!0,p)}),e}function KA(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=KA(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function UD(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:GD(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var LD=/^:[\w-]+$/,zD=3,jD=2,BD=1,qD=10,HD=-2,nT=r=>r==="*";function FD(r,e){let n=r.split("/"),s=n.length;return n.some(nT)&&(s+=HD),e&&(s+=jD),n.filter(o=>!nT(o)).reduce((o,u)=>o+(LD.test(u)?zD:u===""?BD:qD),s)}function GD(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function YD(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],y=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",b=xh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},E),w=p.route;if(!b&&y&&n&&!s[s.length-1].route.index&&(b=xh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!b)return null;Object.assign(o,b.params),f.push({params:o,pathname:Zi([u,b.pathname]),pathnameBase:ZD(Zi([u,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(u=Zi([u,b.pathnameBase]))}return f}function xh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=KD(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:E,isOptional:b},w)=>{if(E==="*"){let k=m[w]||"";f=u.slice(0,u.length-k.length).replace(/(.)\/+$/,"$1")}const D=m[w];return b&&!D?y[E]=void 0:y[E]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:f,pattern:r}}function KD(r,e=!1,n=!0){yi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function QD(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ir(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function $D(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?vo(r):r;return{pathname:n?n.startsWith("/")?n:XD(n,e):e,search:JD(s),hash:eO(o)}}function XD(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function bm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WD(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function QA(r){let e=WD(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function $A(r,e,n,s=!1){let o;typeof r=="string"?o=vo(r):(o={...r},st(!o.pathname||!o.pathname.includes("?"),bm("?","pathname","search",o)),st(!o.pathname||!o.pathname.includes("#"),bm("#","pathname","hash",o)),st(!o.search||!o.search.includes("#"),bm("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let b=e.length-1;if(!s&&f.startsWith("..")){let w=f.split("/");for(;w[0]==="..";)w.shift(),b-=1;o.pathname=w.join("/")}m=b>=0?e[b]:"/"}let p=$D(o,m),y=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||E)&&(p.pathname+="/"),p}var Zi=r=>r.join("/").replace(/\/\/+/g,"/"),ZD=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),JD=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,eO=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function tO(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var XA=["POST","PUT","PATCH","DELETE"];new Set(XA);var nO=["GET",...XA];new Set(nO);var Eo=X.createContext(null);Eo.displayName="DataRouter";var tf=X.createContext(null);tf.displayName="DataRouterState";X.createContext(!1);var WA=X.createContext({isTransitioning:!1});WA.displayName="ViewTransition";var iO=X.createContext(new Map);iO.displayName="Fetchers";var rO=X.createContext(null);rO.displayName="Await";var Ei=X.createContext(null);Ei.displayName="Navigation";var pu=X.createContext(null);pu.displayName="Location";var Ti=X.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var Kp=X.createContext(null);Kp.displayName="RouteError";function sO(r,{relative:e}={}){st(gu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=X.useContext(Ei),{hash:o,pathname:u,search:f}=yu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Zi([n,u])),s.createHref({pathname:m,search:f,hash:o})}function gu(){return X.useContext(pu)!=null}function ea(){return st(gu(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(pu).location}var ZA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JA(r){X.useContext(Ei).static||X.useLayoutEffect(r)}function Qp(){let{isDataRoute:r}=X.useContext(Ti);return r?vO():aO()}function aO(){st(gu(),"useNavigate() may be used only in the context of a <Router> component.");let r=X.useContext(Eo),{basename:e,navigator:n}=X.useContext(Ei),{matches:s}=X.useContext(Ti),{pathname:o}=ea(),u=JSON.stringify(QA(s)),f=X.useRef(!1);return JA(()=>{f.current=!0}),X.useCallback((p,y={})=>{if(yi(f.current,ZA),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=$A(p,JSON.parse(u),o,y.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Zi([e,E.pathname])),(y.replace?n.replace:n.push)(E,y.state,y)},[e,n,u,o,r])}X.createContext(null);function oO(){let{matches:r}=X.useContext(Ti),e=r[r.length-1];return e?e.params:{}}function yu(r,{relative:e}={}){let{matches:n}=X.useContext(Ti),{pathname:s}=ea(),o=JSON.stringify(QA(n));return X.useMemo(()=>$A(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function lO(r,e){return eb(r,e)}function eb(r,e,n,s,o){st(gu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=X.useContext(Ei),{matches:f}=X.useContext(Ti),m=f[f.length-1],p=m?m.params:{},y=m?m.pathname:"/",E=m?m.pathnameBase:"/",b=m&&m.route;{let W=b&&b.path||"";tb(y,!b||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let w=ea(),D;if(e){let W=typeof e=="string"?vo(e):e;st(E==="/"||W.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${W.pathname}" was given in the \`location\` prop.`),D=W}else D=w;let k=D.pathname||"/",F=k;if(E!=="/"){let W=E.replace(/^\//,"").split("/");F="/"+k.replace(/^\//,"").split("/").slice(W.length).join("/")}let U=GA(r,{pathname:F});yi(b||U!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),yi(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=dO(U&&U.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:Zi([E,u.encodeLocation?u.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?E:Zi([E,u.encodeLocation?u.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),f,n,s,o);return e&&B?X.createElement(pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},B):B}function uO(){let r=_O(),e=tO(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=X.createElement(X.Fragment,null,X.createElement("p",null," Hey developer "),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:u},"ErrorBoundary")," or"," ",X.createElement("code",{style:u},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),n?X.createElement("pre",{style:o},n):null,f)}var cO=X.createElement(uO,null),hO=class extends X.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?X.createElement(Ti.Provider,{value:this.props.routeContext},X.createElement(Kp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fO({routeContext:r,match:e,children:n}){let s=X.useContext(Eo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),X.createElement(Ti.Provider,{value:r},n)}function dO(r,e=[],n=null,s=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,f=n?.errors;if(f!=null){let y=u.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);st(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,p=-1;if(n)for(let y=0;y<u.length;y++){let E=u[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=y),E.route.id){let{loaderData:b,errors:w}=n,D=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!w||w[E.route.id]===void 0);if(E.route.lazy||D){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((y,E,b)=>{let w,D=!1,k=null,F=null;n&&(w=f&&E.route.id?f[E.route.id]:void 0,k=E.route.errorElement||cO,m&&(p<0&&b===0?(tb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,F=null):p===b&&(D=!0,F=E.route.hydrateFallbackElement||null)));let U=e.concat(u.slice(0,b+1)),B=()=>{let W;return w?W=k:D?W=F:E.route.Component?W=X.createElement(E.route.Component,null):E.route.element?W=E.route.element:W=y,X.createElement(fO,{match:E,routeContext:{outlet:y,matches:U,isDataRoute:n!=null},children:W})};return n&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?X.createElement(hO,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:B(),routeContext:{outlet:null,matches:U,isDataRoute:!0},unstable_onError:s}):B()},null)}function $p(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mO(r){let e=X.useContext(Eo);return st(e,$p(r)),e}function pO(r){let e=X.useContext(tf);return st(e,$p(r)),e}function gO(r){let e=X.useContext(Ti);return st(e,$p(r)),e}function Xp(r){let e=gO(r),n=e.matches[e.matches.length-1];return st(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function yO(){return Xp("useRouteId")}function _O(){let r=X.useContext(Kp),e=pO("useRouteError"),n=Xp("useRouteError");return r!==void 0?r:e.errors?.[n]}function vO(){let{router:r}=mO("useNavigate"),e=Xp("useNavigate"),n=X.useRef(!1);return JA(()=>{n.current=!0}),X.useCallback(async(o,u={})=>{yi(n.current,ZA),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var iT={};function tb(r,e,n){!e&&!iT[r]&&(iT[r]=!0,yi(!1,n))}X.memo(EO);function EO({routes:r,future:e,state:n,unstable_onError:s}){return eb(r,void 0,n,s,e)}function Wa(r){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TO({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){st(!gu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),m=X.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=vo(n));let{pathname:p="/",search:y="",hash:E="",state:b=null,key:w="default"}=n,D=X.useMemo(()=>{let k=ir(p,f);return k==null?null:{location:{pathname:k,search:y,hash:E,state:b,key:w},navigationType:s}},[f,p,y,E,b,w,s]);return yi(D!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:X.createElement(Ei.Provider,{value:m},X.createElement(pu.Provider,{children:e,value:D}))}function AO({children:r,location:e}){return lO(Jm(r),e)}function Jm(r,e=[]){let n=[];return X.Children.forEach(r,(s,o)=>{if(!X.isValidElement(s))return;let u=[...e,o];if(s.type===X.Fragment){n.push.apply(n,Jm(s.props.children,u));return}st(s.type===Wa,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Jm(s.props.children,u)),n.push(f)}),n}var oh="get",lh="application/x-www-form-urlencoded";function nf(r){return r!=null&&typeof r.tagName=="string"}function bO(r){return nf(r)&&r.tagName.toLowerCase()==="button"}function SO(r){return nf(r)&&r.tagName.toLowerCase()==="form"}function wO(r){return nf(r)&&r.tagName.toLowerCase()==="input"}function RO(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function IO(r,e){return r.button===0&&(!e||e==="_self")&&!RO(r)}var Xc=null;function CO(){if(Xc===null)try{new FormData(document.createElement("form"),0),Xc=!1}catch{Xc=!0}return Xc}var NO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sm(r){return r!=null&&!NO.has(r)?(yi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lh}"`),null):r}function DO(r,e){let n,s,o,u,f;if(SO(r)){let m=r.getAttribute("action");s=m?ir(m,e):null,n=r.getAttribute("method")||oh,o=Sm(r.getAttribute("enctype"))||lh,u=new FormData(r)}else if(bO(r)||wO(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?ir(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||oh,o=Sm(r.getAttribute("formenctype"))||Sm(m.getAttribute("enctype"))||lh,u=new FormData(m,r),!CO()){let{name:y,type:E,value:b}=r;if(E==="image"){let w=y?`${y}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else y&&u.append(y,b)}}else{if(nf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=oh,s=null,o=lh,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function OO(r,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&ir(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function xO(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MO(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function VO(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await xO(u,n);return f.links?f.links():[]}return[]}));return LO(s.flat(1).filter(MO).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function rT(r,e,n,s,o,u){let f=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,m=(p,y)=>n[y].pathname!==p.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,y)=>f(p,y)||m(p,y)):u==="data"?e.filter((p,y)=>{let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function PO(r,e,{includeHydrateFallback:n}={}){return kO(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function kO(r){return[...new Set(r)]}function UO(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function LO(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(UO(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function nb(){let r=X.useContext(Eo);return Wp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function zO(){let r=X.useContext(tf);return Wp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Zp=X.createContext(void 0);Zp.displayName="FrameworkContext";function ib(){let r=X.useContext(Zp);return Wp(r,"You must render this element inside a <HydratedRouter> element"),r}function jO(r,e){let n=X.useContext(Zp),[s,o]=X.useState(!1),[u,f]=X.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:E,onTouchStart:b}=e,w=X.useRef(null);X.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let F=B=>{B.forEach(W=>{f(W.isIntersecting)})},U=new IntersectionObserver(F,{threshold:.5});return w.current&&U.observe(w.current),()=>{U.disconnect()}}},[r]),X.useEffect(()=>{if(s){let F=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(F)}}},[s]);let D=()=>{o(!0)},k=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,w,{}]:[u,w,{onFocus:Ol(m,D),onBlur:Ol(p,k),onMouseEnter:Ol(y,D),onMouseLeave:Ol(E,k),onTouchStart:Ol(b,D)}]:[!1,w,{}]}function Ol(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function BO({page:r,...e}){let{router:n}=nb(),s=X.useMemo(()=>GA(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?X.createElement(HO,{page:r,matches:s,...e}):null}function qO(r){let{manifest:e,routeModules:n}=ib(),[s,o]=X.useState([]);return X.useEffect(()=>{let u=!1;return VO(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),s}function HO({page:r,matches:e,...n}){let s=ea(),{manifest:o,routeModules:u}=ib(),{basename:f}=nb(),{loaderData:m,matches:p}=zO(),y=X.useMemo(()=>rT(r,e,p,o,s,"data"),[r,e,p,o,s]),E=X.useMemo(()=>rT(r,e,p,o,s,"assets"),[r,e,p,o,s]),b=X.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let k=new Set,F=!1;if(e.forEach(B=>{let W=o.routes[B.route.id];!W||!W.hasLoader||(!y.some(se=>se.route.id===B.route.id)&&B.route.id in m&&u[B.route.id]?.shouldRevalidate||W.hasClientLoader?F=!0:k.add(B.route.id))}),k.size===0)return[];let U=OO(r,f,"data");return F&&k.size>0&&U.searchParams.set("_routes",e.filter(B=>k.has(B.route.id)).map(B=>B.route.id).join(",")),[U.pathname+U.search]},[f,m,s,o,y,e,r,u]),w=X.useMemo(()=>PO(E,o),[E,o]),D=qO(E);return X.createElement(X.Fragment,null,b.map(k=>X.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),w.map(k=>X.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),D.map(({key:k,link:F})=>X.createElement("link",{key:k,nonce:n.nonce,...F})))}function FO(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var rb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rb&&(window.__reactRouterVersion="7.9.1")}catch{}function GO({basename:r,children:e,window:n}){let s=X.useRef();s.current==null&&(s.current=xD({window:n,v5Compat:!0}));let o=s.current,[u,f]=X.useState({action:o.action,location:o.location}),m=X.useCallback(p=>{X.startTransition(()=>f(p))},[f]);return X.useLayoutEffect(()=>o.listen(m),[o,m]),X.createElement(TO,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var sb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,co=X.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:y,preventScrollReset:E,viewTransition:b,...w},D){let{basename:k}=X.useContext(Ei),F=typeof y=="string"&&sb.test(y),U,B=!1;if(typeof y=="string"&&F&&(U=y,rb))try{let R=new URL(window.location.href),V=y.startsWith("//")?new URL(R.protocol+y):new URL(y),P=ir(V.pathname,k);V.origin===R.origin&&P!=null?y=P+V.search+V.hash:B=!0}catch{yi(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=sO(y,{relative:o}),[se,I,L]=jO(s,w),de=QO(y,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:b});function O(R){e&&e(R),R.defaultPrevented||de(R)}let S=X.createElement("a",{...w,...L,href:U||W,onClick:B||u?e:O,ref:FO(D,I),target:p,"data-discover":!F&&n==="render"?"true":void 0});return se&&!F?X.createElement(X.Fragment,null,S,X.createElement(BO,{page:W})):S});co.displayName="Link";var uh=X.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...y},E){let b=yu(f,{relative:y.relative}),w=ea(),D=X.useContext(tf),{navigator:k,basename:F}=X.useContext(Ei),U=D!=null&&JO(b)&&m===!0,B=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,W=w.pathname,se=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(W=W.toLowerCase(),se=se?se.toLowerCase():null,B=B.toLowerCase()),se&&F&&(se=ir(se,F)||se);const I=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let L=W===B||!o&&W.startsWith(B)&&W.charAt(I)==="/",de=se!=null&&(se===B||!o&&se.startsWith(B)&&se.charAt(B.length)==="/"),O={isActive:L,isPending:de,isTransitioning:U},S=L?e:void 0,R;typeof s=="function"?R=s(O):R=[s,L?"active":null,de?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(O):u;return X.createElement(co,{...y,"aria-current":S,className:R,ref:E,style:V,to:f,viewTransition:m},typeof p=="function"?p(O):p)});uh.displayName="NavLink";var YO=X.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=oh,action:m,onSubmit:p,relative:y,preventScrollReset:E,viewTransition:b,...w},D)=>{let k=WO(),F=ZO(m,{relative:y}),U=f.toLowerCase()==="get"?"get":"post",B=typeof m=="string"&&sb.test(m),W=se=>{if(p&&p(se),se.defaultPrevented)return;se.preventDefault();let I=se.nativeEvent.submitter,L=I?.getAttribute("formmethod")||f;k(I||se.currentTarget,{fetcherKey:e,method:L,navigate:n,replace:o,state:u,relative:y,preventScrollReset:E,viewTransition:b})};return X.createElement("form",{ref:D,method:U,action:F,onSubmit:s?p:W,...w,"data-discover":!B&&r==="render"?"true":void 0})});YO.displayName="Form";function KO(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ab(r){let e=X.useContext(Eo);return st(e,KO(r)),e}function QO(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=Qp(),p=ea(),y=yu(r,{relative:u});return X.useCallback(E=>{if(IO(E,e)){E.preventDefault();let b=n!==void 0?n:iu(p)===iu(y);m(r,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,y,n,s,e,r,o,u,f])}var $O=0,XO=()=>`__${String(++$O)}__`;function WO(){let{router:r}=ab("useSubmit"),{basename:e}=X.useContext(Ei),n=yO();return X.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:y}=DO(s,e);if(o.navigate===!1){let E=o.fetcherKey||XO();await r.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function ZO(r,{relative:e}={}){let{basename:n}=X.useContext(Ei),s=X.useContext(Ti);st(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...yu(r||".",{relative:e})},f=ea();if(r==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Zi([n,u.pathname])),iu(u)}function JO(r,{relative:e}={}){let n=X.useContext(WA);st(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ab("useViewTransitionState"),o=yu(r,{relative:e});if(!n.isTransitioning)return!1;let u=ir(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=ir(n.nextLocation.pathname,s)||n.nextLocation.pathname;return xh(o.pathname,f)!=null||xh(o.pathname,u)!=null}function ex(){const{user:r,logout:e}=_o(),n=Qp(),s=async()=>{await e(),n("/")};return Y.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary shadow-sm",children:Y.jsxs("div",{className:"container",children:[Y.jsx(co,{className:"navbar-brand fw-semibold",to:"/",children:"Tienda de Productos"}),Y.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#nav","aria-controls":"nav","aria-expanded":"false","aria-label":"Toggle navigation",children:Y.jsx("span",{className:"navbar-toggler-icon"})}),Y.jsx("div",{className:"collapse navbar-collapse",id:"nav",children:Y.jsxs("ul",{className:"navbar-nav ms-auto align-items-lg-center gap-lg-2",children:[Y.jsx("li",{className:"nav-item",children:Y.jsx(uh,{className:"nav-link",to:"/",children:"Inicio"})}),r&&Y.jsx("li",{className:"nav-item",children:Y.jsx(uh,{className:"nav-link",to:"/admin",children:"Admin"})}),r&&Y.jsx("li",{className:"nav-item",children:Y.jsx(uh,{className:"nav-link",to:"/mis-compras",children:"Mis compras"})}),r?Y.jsxs("li",{className:"nav-item ms-lg-3 d-flex align-items-center gap-2",children:[Y.jsx("span",{className:"text-white-50 small",children:r.email}),Y.jsx("button",{className:"btn btn-outline-light btn-sm",onClick:s,children:"Salir"})]}):Y.jsx("li",{className:"nav-item ms-lg-2",children:Y.jsx(co,{className:"btn btn-light btn-sm",to:"/auth",children:"Entrar / Registrarse"})})]})})]})})}var ch={exports:{}},tx=ch.exports,sT;function nx(){return sT||(sT=1,(function(r,e){(function(n,s){r.exports=s(Mh())})(tx,function(n){function s(D,k){return(function(F){if(Array.isArray(F))return F})(D)||(function(F,U){var B=F==null?null:typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(B!=null){var W,se,I=[],L=!0,de=!1;try{for(B=B.call(F);!(L=(W=B.next()).done)&&(I.push(W.value),!U||I.length!==U);L=!0);}catch(O){de=!0,se=O}finally{try{L||B.return==null||B.return()}finally{if(de)throw se}}return I}})(D,k)||u(D,k)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function o(D,k){var F=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!F){if(Array.isArray(D)||(F=u(D))||k){F&&(D=F);var U=0,B=function(){};return{s:B,n:function(){return U>=D.length?{done:!0}:{done:!1,value:D[U++]}},e:function(L){throw L},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W,se=!0,I=!1;return{s:function(){F=F.call(D)},n:function(){var L=F.next();return se=L.done,L},e:function(L){I=!0,W=L},f:function(){try{se||F.return==null||F.return()}finally{if(I)throw W}}}}function u(D,k){if(D){if(typeof D=="string")return f(D,k);var F=Object.prototype.toString.call(D).slice(8,-1);return F==="Object"&&D.constructor&&(F=D.constructor.name),F==="Map"||F==="Set"?Array.from(D):F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F)?f(D,k):void 0}}function f(D,k){(k==null||k>D.length)&&(k=D.length);for(var F=0,U=new Array(k);F<k;F++)U[F]=D[F];return U}function m(D){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(D)}function p(D,k){var F=Object.keys(D);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(D);k&&(U=U.filter(function(B){return Object.getOwnPropertyDescriptor(D,B).enumerable})),F.push.apply(F,U)}return F}function y(D){for(var k=1;k<arguments.length;k++){var F=arguments[k]!=null?arguments[k]:{};k%2?p(Object(F),!0).forEach(function(U){b(D,U,F[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(F)):p(Object(F)).forEach(function(U){Object.defineProperty(D,U,Object.getOwnPropertyDescriptor(F,U))})}return D}function E(D,k){for(var F=0;F<k.length;F++){var U=k[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(D,U.key,U)}}function b(D,k,F){return k in D?Object.defineProperty(D,k,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[k]=F,D}var w=(function(){function D(){var B=this,W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};(function(I,L){if(!(I instanceof L))throw new TypeError("Cannot call a class as a function")})(this,D),b(this,"showMessageFor",function(I){B.visibleFields.includes(I)||B.visibleFields.push(I),B.helpers.forceUpdateIfNeeded()}),b(this,"hideMessageFor",function(I){var L=B.visibleFields.indexOf(I);-1<L&&B.visibleFields.splice(L,1),B.helpers.forceUpdateIfNeeded()}),b(this,"helpers",{parent:this,passes:function(I,L,de,O){return O.hasOwnProperty(I)?!(this.isRequired(I,O)||!this.isBlank(L))||O[I].rule(L,de,this.parent)!==!1:(console.error("Rule Not Found: There is no rule with the name ".concat(I,".")),!0)},isRequired:function(I,L){return L[I].hasOwnProperty("required")&&L[I].required},isBlank:function(I){return I==null||this.testRegex(I,/^[\s]*$/)},normalizeValues:function(I,L){return[this.valueOrEmptyString(I),this.getValidation(L),this.getOptions(L)]},getValidation:function(I){return I===Object(I)&&Object.keys(I).length?Object.keys(I)[0]:I.split(":")[0]},getOptions:function(I){if(I===Object(I)&&Object.values(I).length){var L=Object.values(I)[0];return Array.isArray(L)?L:[L]}return 1<(L=I.split(":")).length?L[1].split(","):[]},valueOrEmptyString:function(I){return I??""},toSentence:function(I){return I.slice(0,-2).join(", ")+(I.slice(0,-2).length?", ":"")+I.slice(-2).join(2<I.length?", or ":" or ")},testRegex:function(I,L){return I.toString().match(L)!==null},forceUpdateIfNeeded:function(){this.parent.autoForceUpdate&&this.parent.autoForceUpdate.forceUpdate()},message:function(I,L,de,O){de.messages=de.messages||{};var S=de.messages[I]||de.messages.default||this.parent.messages[I]||this.parent.messages.default||O[I].message;return S.replace(":attribute",this.humanizeFieldName(L))},humanizeFieldName:function(I){return I.replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/_/g," ").toLowerCase()},element:function(I,L){var de=L.element||this.parent.element;return de(I,L.className)},momentInstalled:function(){return!(!window||!window.moment)||(console.warn("Date validators require using momentjs https://momentjs.com and moment objects."),!1)},size:function(I,L){return L==="string"||L===void 0||L==="array"?I.length:L==="num"?parseFloat(I):void 0},sizeText:function(I){return I==="string"||I===void 0?" characters":I==="array"?" elements":""}}),this.fields={},this.visibleFields=[],this.errorMessages={},this.messagesShown=!1,this.rules=y({accepted:{message:"The :attribute must be accepted.",rule:function(I){return I===!0},required:!0},after:{message:"The :attribute must be after :date.",rule:function(I,L){return B.helpers.momentInstalled()&&moment.isMoment(I)&&I.isAfter(L[0],"day")},messageReplace:function(I,L){return I.replace(":date",L[0].format("MM/DD/YYYY"))}},after_or_equal:{message:"The :attribute must be after or on :date.",rule:function(I,L){return B.helpers.momentInstalled()&&moment.isMoment(I)&&I.isSameOrAfter(L[0],"day")},messageReplace:function(I,L){return I.replace(":date",L[0].format("MM/DD/YYYY"))}},alpha:{message:"The :attribute may only contain letters.",rule:function(I){return B.helpers.testRegex(I,/^[A-Z]*$/i)}},alpha_space:{message:"The :attribute may only contain letters and spaces.",rule:function(I){return B.helpers.testRegex(I,/^[A-Z\s]*$/i)}},alpha_num:{message:"The :attribute may only contain letters and numbers.",rule:function(I){return B.helpers.testRegex(I,/^[A-Z0-9]*$/i)}},alpha_num_space:{message:"The :attribute may only contain letters, numbers, and spaces.",rule:function(I){return B.helpers.testRegex(I,/^[A-Z0-9\s]*$/i)}},alpha_num_dash:{message:"The :attribute may only contain letters, numbers, and dashes.",rule:function(I){return B.helpers.testRegex(I,/^[A-Z0-9_-]*$/i)}},alpha_num_dash_space:{message:"The :attribute may only contain letters, numbers, dashes, and spaces.",rule:function(I){return B.helpers.testRegex(I,/^[A-Z0-9_-\s]*$/i)}},array:{message:"The :attribute must be an array.",rule:function(I){return Array.isArray(I)}},before:{message:"The :attribute must be before :date.",rule:function(I,L){return B.helpers.momentInstalled()&&moment.isMoment(I)&&I.isBefore(L[0],"day")},messageReplace:function(I,L){return I.replace(":date",L[0].format("MM/DD/YYYY"))}},before_or_equal:{message:"The :attribute must be before or on :date.",rule:function(I,L){return B.helpers.momentInstalled()&&moment.isMoment(I)&&I.isSameOrBefore(L[0],"day")},messageReplace:function(I,L){return I.replace(":date",L[0].format("MM/DD/YYYY"))}},between:{message:"The :attribute must be between :min and :max:type.",rule:function(I,L){return B.helpers.size(I,L[2])>=parseFloat(L[0])&&B.helpers.size(I,L[2])<=parseFloat(L[1])},messageReplace:function(I,L){return I.replace(":min",L[0]).replace(":max",L[1]).replace(":type",B.helpers.sizeText(L[2]))}},boolean:{message:"The :attribute must be a boolean.",rule:function(I){return I===!1||I===!0}},card_exp:{message:"The :attribute must be a valid expiration date.",rule:function(I){return B.helpers.testRegex(I,/^(([0]?[1-9]{1})|([1]{1}[0-2]{1}))\s?\/\s?(\d{2}|\d{4})$/)}},card_num:{message:"The :attribute must be a valid credit card number.",rule:function(I){return B.helpers.testRegex(I,/^\d{4}\s?\d{4,6}\s?\d{4,5}\s?\d{0,8}$/)}},currency:{message:"The :attribute must be a valid currency.",rule:function(I){return B.helpers.testRegex(I,/^[\$]?(\d{1,3})(\,?\d{3})*\.?\d{0,2}$/)}},date:{message:"The :attribute must be a date.",rule:function(I){return B.helpers.momentInstalled()&&moment.isMoment(I)}},date_equals:{message:"The :attribute must be on :date.",rule:function(I,L){return B.helpers.momentInstalled()&&moment.isMoment(I)&&I.isSame(L[0],"day")},messageReplace:function(I,L){return I.replace(":date",L[0].format("MM/DD/YYYY"))}},email:{message:"The :attribute must be a valid email address.",rule:function(I){return B.helpers.testRegex(I,/^[A-Z0-9.!#$%&'*+-/=?^_`{|}~]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i)}},in:{message:"The selected :attribute must be :values.",rule:function(I,L){return L.includes(I)},messageReplace:function(I,L){return I.replace(":values",B.helpers.toSentence(L))}},integer:{message:"The :attribute must be an integer.",rule:function(I){return B.helpers.testRegex(I,/^\-?\d*$/)}},max:{message:"The :attribute may not be greater than :max:type.",rule:function(I,L){return B.helpers.size(I,L[1])<=parseFloat(L[0])},messageReplace:function(I,L){return I.replace(":max",L[0]).replace(":type",B.helpers.sizeText(L[1]))}},min:{message:"The :attribute must be at least :min:type.",rule:function(I,L){return B.helpers.size(I,L[1])>=parseFloat(L[0])},messageReplace:function(I,L){return I.replace(":min",L[0]).replace(":type",B.helpers.sizeText(L[1]))}},not_in:{message:"The selected :attribute must not be :values.",rule:function(I,L){return!L.includes(I)},messageReplace:function(I,L){return I.replace(":values",B.helpers.toSentence(L))}},not_regex:{message:"The :attribute must not match the required pattern.",rule:function(I,L){return!B.helpers.testRegex(I,typeof L[0]=="string"||L[0]instanceof String?new RegExp(L[0]):L[0])}},numeric:{message:"The :attribute must be a number.",rule:function(I){return B.helpers.testRegex(I,/^\-?\d*\.?\d+$/)}},phone:{message:"The :attribute must be a valid phone number.",rule:function(I){return B.helpers.testRegex(I,/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)$/)&&!B.helpers.testRegex(I,/^\b(\d)\1{8,}\b$/)}},regex:{message:"The :attribute must match the required pattern.",rule:function(I,L){return B.helpers.testRegex(I,typeof L[0]=="string"||L[0]instanceof String?new RegExp(L[0]):L[0])}},required:{message:"The :attribute field is required.",rule:function(I){return!B.helpers.isBlank(I)},required:!0},size:{message:"The :attribute must be :size:type.",rule:function(I,L){return B.helpers.size(I,L[1])==parseFloat(L[0])},messageReplace:function(I,L){return I.replace(":size",L[0]).replace(":type",B.helpers.sizeText(L[1]))}},string:{message:"The :attribute must be a string.",rule:function(I){return m(I)===m("string")}},typeof:{message:"The :attribute is not the correct type of :type.",rule:function(I,L){return m(I)===m(L[0])},messageReplace:function(I,L){return I.replace(":type",m(L[0]))}},url:{message:"The :attribute must be a url.",rule:function(I){return B.helpers.testRegex(I,/^https?:\/\/[-a-z0-9@:%._\+~#=]{1,256}\.[a-z0-9()]{2,13}\b([-a-z0-9()@:%_\+.~#?&//=]*)$/i)}}},W.validators||{}),W.locale&&!D.locales.hasOwnProperty(W.locale)&&console.warn("Locale not found! Make sure it is spelled correctly and the locale file is loaded.");var se=D.locales[W.locale]||{};Object.keys(this.rules).forEach(function(I){B.rules[I].message=se[I]||B.rules[I].message}),this.messages=W.messages||{},this.className=W.className,this.autoForceUpdate=W.autoForceUpdate||!1,W.element===!1?this.element=function(I){return I}:W.hasOwnProperty("element")?this.element=W.element:(typeof navigator>"u"?"undefined":m(navigator))==="object"&&navigator.product==="ReactNative"?this.element=function(I){return I}:this.element=function(I,L){return n.createElement("div",{className:L||B.className||"srv-validation-message"},I)}}var k,F,U;return k=D,U=[{key:"addLocale",value:function(B,W){this.locales[B]=W}}],(F=[{key:"getErrorMessages",value:function(){return this.errorMessages}},{key:"showMessages",value:function(){this.messagesShown=!0,this.helpers.forceUpdateIfNeeded()}},{key:"hideMessages",value:function(){this.messagesShown=!1,this.helpers.forceUpdateIfNeeded()}},{key:"allValid",value:function(){for(var B in this.fields)if(this.fieldValid(B)===!1)return!1;return!0}},{key:"fieldValid",value:function(B){return this.fields.hasOwnProperty(B)&&this.fields[B]===!0}},{key:"purgeFields",value:function(){this.fields={},this.errorMessages={}}},{key:"messageWhenPresent",value:function(B){var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(!this.helpers.isBlank(B)&&this.messagesShown)return this.helpers.element(B,W)}},{key:"messageAlways",value:function(B,W){var se=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};if(console.warn("The messageAlways() method is deprecated in SimpleReactValidator. Please see the documentation and switch to the messageWhenPresent() method."),W&&this.messagesShown)return this.helpers.element(W,se)}},{key:"check",value:function(B,W){var se=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(W)||(W=W.split("|"));var I,L=se.validators?y(y({},this.rules),se.validators):this.rules,de=o(W);try{for(de.s();!(I=de.n()).done;){var O=I.value,S=s(this.helpers.normalizeValues(B,O),3),R=S[0],V=S[1],P=S[2];if(!this.helpers.passes(V,R,P,L))return!1}}catch(z){de.e(z)}finally{de.f()}return!0}},{key:"message",value:function(B,W,se){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};this.errorMessages[B]=null,this.fields[B]=!0,Array.isArray(se)||(se=se.split("|"));var L,de=I.validators?y(y({},this.rules),I.validators):this.rules,O=o(se);try{for(O.s();!(L=O.n()).done;){var S=L.value,R=s(this.helpers.normalizeValues(W,S),3),V=R[0],P=R[1],z=R[2];if(!this.helpers.passes(P,V,z,de)){this.fields[B]=!1;var N=this.helpers.message(P,B,I,de);if(0<z.length&&de[P].hasOwnProperty("messageReplace")&&(N=de[P].messageReplace(N,z)),this.errorMessages[B]=N,this.messagesShown||this.visibleFields.includes(B))return this.helpers.element(N,I)}}}catch(bt){O.e(bt)}finally{O.f()}}}])&&E(k.prototype,F),U&&E(k,U),Object.defineProperty(k,"prototype",{writable:!1}),D})();return b(w,"version","1.5.1"),b(w,"locales",{en:{}}),w})})(ch)),ch.exports}var ix=nx();const rx=lT(ix);async function sx(r){const e="rodofla",n="product",s=`https://api.cloudinary.com/v1_1/${e}/image/upload`,o=new FormData;o.append("file",r),o.append("upload_preset",n);const u=await fetch(s,{method:"POST",body:o});if(!u.ok){const m=await u.text().catch(()=>"");throw new Error(`Error al subir imagen a Cloudinary: ${u.status} ${m}`)}return(await u.json()).secure_url}function ax(){const{user:r}=_o(),[e,n]=X.useState({name:"",price:"",image:null}),[,s]=X.useState(),[o,u]=X.useState(!1),f=X.useRef(new rx({messages:{required:"Obligatorio",numeric:"Debe ser numrico"}})),m=y=>{const{name:E,value:b,files:w}=y.target;n(D=>({...D,[E]:w?w[0]:b})),f.current.messageShown(E)&&s({})},p=async y=>{if(y.preventDefault(),!r)return alert("Debes iniciar sesin para crear productos.");if(!f.current.allValid())return f.current.showMessages(),s({});try{u(!0);let E="";e.image&&(E=await sx(e.image)),await UA(Ch(nu,"products"),{name:e.name,price:Number(e.price),imageUrl:E,ownerUid:r.uid,createdAt:jA()}),n({name:"",price:"",image:null}),alert("Producto creado")}catch(E){alert(E.message||"Error al crear producto")}finally{u(!1)}};return Y.jsxs("form",{className:"card p-3 shadow-sm",onSubmit:p,children:[Y.jsx("h5",{className:"mb-3",children:"Nuevo producto"}),Y.jsxs("div",{className:"mb-2",children:[Y.jsx("label",{className:"form-label",children:"Nombre"}),Y.jsx("input",{className:"form-control",name:"name",value:e.name,onChange:m}),Y.jsx("small",{className:"text-danger",children:f.current.message("name",e.name,"required|alpha_space")})]}),Y.jsxs("div",{className:"mb-2",children:[Y.jsx("label",{className:"form-label",children:"Precio"}),Y.jsx("input",{className:"form-control",name:"price",value:e.price,onChange:m}),Y.jsx("small",{className:"text-danger",children:f.current.message("price",e.price,"required|numeric")})]}),Y.jsxs("div",{className:"mb-3",children:[Y.jsx("label",{className:"form-label",children:"Imagen (opcional)"}),Y.jsx("input",{type:"file",accept:"image/*",className:"form-control",name:"image",onChange:m})]}),Y.jsx("button",{className:"btn btn-primary",disabled:o,children:o?"Guardando":"Guardar"})]})}function ox(){const{user:r}=_o();return r?Y.jsxs("div",{className:"container py-3",children:[Y.jsx("h2",{className:"mb-3",children:"Administrar productos"}),Y.jsxs("div",{className:"row g-3",children:[Y.jsx("div",{className:"col-lg-6",children:Y.jsx(ax,{})}),Y.jsx("div",{className:"col-lg-6",children:Y.jsx("div",{className:"alert alert-secondary",children:"Sube una imagen y completa nombre y precio. Solo estilos fueron mejorados."})})]})]}):Y.jsx("div",{className:"container py-4",children:Y.jsx("div",{className:"alert alert-info",children:"Necesitas iniciar sesin."})})}function lx(){const{login:r,register:e}=_o(),[n,s]=X.useState("login"),[o,u]=X.useState(""),[f,m]=X.useState(""),[p,y]=X.useState(""),E=Qp(),b=async w=>{w.preventDefault(),y("");try{n==="login"?await r(o,f):await e(o,f),E("/")}catch(D){y(D.message||"Error de autenticacin")}};return Y.jsx("div",{className:"container d-flex align-items-center justify-content-center",style:{minHeight:"70vh"},children:Y.jsx("div",{className:"card shadow-sm w-100",style:{maxWidth:420},children:Y.jsxs("div",{className:"card-body p-4",children:[Y.jsx("h3",{className:"mb-3",children:n==="login"?"Iniciar sesin":"Crear cuenta"}),Y.jsxs("form",{onSubmit:b,className:"vstack gap-3",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"form-label",children:"Email"}),Y.jsx("input",{className:"form-control",type:"email",value:o,onChange:w=>u(w.target.value),required:!0})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"form-label",children:"Contrasea"}),Y.jsx("input",{className:"form-control",type:"password",value:f,onChange:w=>m(w.target.value),required:!0})]}),p&&Y.jsx("div",{className:"alert alert-danger py-2",children:p}),Y.jsxs("div",{className:"d-flex gap-2",children:[Y.jsx("button",{className:"btn btn-primary",type:"submit",children:n==="login"?"Entrar":"Registrarse"}),Y.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>s(n==="login"?"register":"login"),children:n==="login"?"Crear cuenta":"Ya tengo cuenta"})]})]})]})})})}const aT=new Intl.NumberFormat("es-CL");class ux extends X.Component{state={items:[]};componentDidMount(){}addItem=e=>{const n=[...this.state.items],s=n.findIndex(o=>o.id===e.id);s>-1?n[s].qty+=1:n.push({...e,qty:1}),this.setState({items:n})};clear=()=>this.setState({items:[]});get total(){return this.state.items.reduce((e,n)=>e+n.price*n.qty,0)}render(){const{onCheckout:e}=this.props,{items:n}=this.state;return Y.jsx("div",{className:"card border-0 shadow-sm",children:Y.jsxs("div",{className:"card-body",children:[Y.jsx("h5",{className:"mb-3",children:"Carrito"}),n.length===0?Y.jsx("p",{className:"text-secondary",children:"No hay productos"}):Y.jsx("ul",{className:"list-group list-group-flush mb-3",children:n.map(s=>Y.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Y.jsxs("span",{children:[s.name," ",Y.jsxs("span",{className:"text-secondary",children:["x",s.qty]})]}),Y.jsxs("span",{className:"fw-semibold",children:["$",aT.format(s.price*s.qty)]})]},s.id))}),Y.jsxs("div",{className:"d-flex align-items-center",children:[Y.jsx("span",{className:"me-auto text-secondary",children:"Total"}),Y.jsxs("span",{className:"fs-5 fw-bold",children:["$",aT.format(this.total)]})]}),Y.jsxs("div",{className:"d-flex gap-2 mt-3",children:[Y.jsx("button",{className:"btn btn-outline-secondary",onClick:this.clear,children:"Vaciar"}),Y.jsx("button",{className:"btn btn-success ms-auto",onClick:()=>e(n,this.total),children:"Comprar"})]})]})})}}function cx({product:r,onAddToCart:e}){return Y.jsxs("div",{className:"card h-100 border-0 shadow-sm card-hover",children:[Y.jsx("div",{className:"p-2",children:Y.jsx("img",{src:r.imageUrl||"https://via.placeholder.com/600x400?text=Sin+imagen",alt:r.name,className:"product-img",loading:"lazy"})}),Y.jsxs("div",{className:"card-body d-flex flex-column",children:[Y.jsx("h5",{className:"fw-semibold",children:r.name}),Y.jsxs("div",{className:"mt-auto d-flex justify-content-between align-items-center",children:[Y.jsxs("span",{className:"price",children:["$",r.price]}),Y.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>e(r),children:"Agregar"})]})]})]})}function hx(){const[r,e]=X.useState([]),[n,s]=X.useState(""),o=X.useRef(null),{user:u}=_o();X.useEffect(()=>{const p=VA(Ch(nu,"products"),$2("createdAt","desc")),y=LA(p,E=>e(E.docs.map(b=>({id:b.id,...b.data()}))),E=>s(E.message));return()=>y()},[]);const f=p=>o.current?.addItem(p),m=async(p,y)=>{if(!u)return alert("Inicia sesin para comprar.");await UA(Ch(nu,"orders"),{userUid:u.uid,items:p,total:y,createdAt:jA()}),alert('Compra registrada (simulada). Revisa "Mis compras".')};return Y.jsxs("div",{className:"container",children:[Y.jsxs("div",{className:"hero",children:[Y.jsx("h1",{className:"display-5 fw-semibold",children:"Tienda de Productos"}),Y.jsx("p",{className:"text-secondary",children:"Explora, agrega al carrito y compra (simulado)."})]}),n&&Y.jsxs("div",{className:"alert alert-warning",children:["No se pudo cargar productos: ",n]}),Y.jsxs("div",{className:"row g-4",children:[Y.jsx("div",{className:"col-lg-8",children:Y.jsx("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3",children:r.map(p=>Y.jsx("div",{className:"col",children:Y.jsx(cx,{product:p,onAddToCart:f})},p.id))})}),Y.jsx("div",{className:"col-lg-4",children:Y.jsx("div",{className:"cart-sticky",children:Y.jsx(ux,{ref:o,onCheckout:m})})})]})]})}const oT=new Intl.NumberFormat("es-CL"),fx=r=>r?r.toLocaleString("es-CL",{dateStyle:"medium",timeStyle:"short"}):"Sin fecha";function dx(){const{user:r}=_o(),[e,n]=X.useState([]),[s,o]=X.useState(!0);return X.useEffect(()=>{if(!r)return;o(!0);const u=VA(Ch(nu,"orders"),Q2("userUid","==",r.uid)),f=LA(u,m=>{const p=m.docs.map(y=>{const E=y.data(),b=E.createdAt?.toDate?.()??null;return{id:y.id,...E,createdAt:b}});p.sort((y,E)=>(E.createdAt?.getTime?.()??0)-(y.createdAt?.getTime?.()??0)),n(p),o(!1)},m=>o(!1));return()=>f()},[r]),r?Y.jsxs("div",{className:"container py-4",children:[Y.jsxs("div",{className:"d-flex align-items-center mb-3",children:[Y.jsx("h2",{className:"me-3 mb-0",children:"Mis compras"}),Y.jsx("span",{className:"badge text-bg-secondary",children:e.length})]}),s&&Y.jsxs("div",{className:"vstack gap-3",children:[Y.jsx("div",{className:"card border-0 shadow-sm",children:Y.jsxs("div",{className:"card-body",children:[Y.jsx("span",{className:"placeholder col-3"}),Y.jsx("div",{className:"mt-2",children:Y.jsx("span",{className:"placeholder col-8"})})]})}),Y.jsx("div",{className:"card border-0 shadow-sm",children:Y.jsxs("div",{className:"card-body",children:[Y.jsx("span",{className:"placeholder col-2"}),Y.jsx("div",{className:"mt-2",children:Y.jsx("span",{className:"placeholder col-6"})})]})})]}),!s&&e.length===0&&Y.jsx("div",{className:"alert alert-secondary",children:"An no tienes compras registradas."}),Y.jsx("div",{className:"row g-3",children:e.map(u=>Y.jsx("div",{className:"col-12",children:Y.jsx("div",{className:"card border-0 shadow-sm card-hover",children:Y.jsxs("div",{className:"card-body",children:[Y.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[Y.jsxs("span",{className:"badge text-bg-primary",children:["Orden #",u.id.slice(-6)]}),Y.jsx("small",{className:"text-secondary ms-auto",children:fx(u.createdAt)})]}),Y.jsx("ul",{className:"list-group list-group-flush mt-3",children:u.items?.map((f,m)=>Y.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Y.jsxs("div",{children:[Y.jsx("div",{className:"fw-semibold",children:f.name}),Y.jsxs("small",{className:"text-secondary",children:["x",f.qty]})]}),Y.jsxs("div",{className:"fw-semibold",children:["$",oT.format((f.price??0)*(f.qty??0))]})]},m))}),Y.jsxs("div",{className:"d-flex align-items-center mt-3",children:[Y.jsx("span",{className:"text-secondary",children:"Total"}),Y.jsxs("span",{className:"fs-5 fw-bold ms-auto",children:["$",oT.format(u.total??0)]})]})]})})},u.id))})]}):Y.jsx("div",{className:"container py-4",children:Y.jsx("div",{className:"alert alert-info",children:"Debes iniciar sesin para ver tus compras."})})}function mx(){const{id:r}=oO(),[e,n]=X.useState(null),[s,o]=X.useState(!0);return X.useEffect(()=>{let u=!0;return(async()=>{try{const f=await J2(wA(nu,"products",r));u&&n(f.exists()?{id:f.id,...f.data()}:null)}finally{u&&o(!1)}})(),()=>{u=!1}},[r]),s?Y.jsx("div",{className:"container py-4",children:"Cargando"}):e?Y.jsxs("div",{className:"container py-4",children:[Y.jsx(co,{to:"/",className:"text-decoration-none",children:" Volver"}),Y.jsxs("div",{className:"row g-4 mt-1",children:[Y.jsx("div",{className:"col-md-6",children:Y.jsx("img",{src:e.imageUrl||"https://via.placeholder.com/800x600?text=Sin+imagen",alt:e.name,className:"img-fluid rounded shadow-sm"})}),Y.jsxs("div",{className:"col-md-6",children:[Y.jsx("h2",{className:"fw-semibold",children:e.name}),Y.jsxs("p",{className:"fs-3 fw-bold mt-2",children:["$",e.price]}),Y.jsx("p",{className:"text-secondary",children:"Producto de la tienda"})]})]})]}):Y.jsxs("div",{className:"container py-4",children:[Y.jsx("div",{className:"alert alert-warning",children:"Producto no encontrado."}),Y.jsx(co,{className:"btn btn-outline-secondary",to:"/",children:"Volver"})]})}function px(){return Y.jsxs(GO,{children:[Y.jsx(ex,{}),Y.jsxs(AO,{children:[Y.jsx(Wa,{path:"/",element:Y.jsx(hx,{})})," ",Y.jsx(Wa,{path:"/product/:id",element:Y.jsx(mx,{})})," ",Y.jsx(Wa,{path:"/auth",element:Y.jsx(lx,{})}),Y.jsx(Wa,{path:"/admin",element:Y.jsx(ox,{})})," ",Y.jsx(Wa,{path:"/mis-compras",element:Y.jsx(dx,{})})]})]})}function gx(){return Y.jsx(OD,{children:Y.jsx(px,{})})}BS.createRoot(document.getElementById("root")).render(Y.jsx(gx,{}));
